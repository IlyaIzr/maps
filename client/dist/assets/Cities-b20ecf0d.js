import{b as Pt,D as Gt,g as $t,f as tt,l as At,u as qt,j as b,E as Lt,r as Ht}from"./index-5904d5c1.js";import{S as Tt}from"./SearchBar-059e002a.js";import{p as zt,b as vt,c as Ft,d as Jt,s as Qt,m as Ut,e as It,T as Kt}from"./url-eb152807.js";import"./tags-edc2d07f.js";const Vt="_container_1f5s5_1",Zt={container:Vt},Wt="_cityItem_17oj7_1",bt="_geojsonPreview_17oj7_19",te="_cityDetails_17oj7_35",ee="_cityName_17oj7_43",ne="_cityRating_17oj7_55",rt={cityItem:Wt,geojsonPreview:bt,cityDetails:te,cityName:ee,cityRating:ne};function ot(o,n,r){if(o!==null)for(var a,f,l,m,d,v,_,P=0,E=0,M,X=o.type,x=X==="FeatureCollection",y=X==="Feature",R=x?o.features.length:1,S=0;S<R;S++){_=x?o.features[S].geometry:y?o.geometry:o,M=_?_.type==="GeometryCollection":!1,d=M?_.geometries.length:1;for(var t=0;t<d;t++){var e=0,i=0;if(m=M?_.geometries[t]:_,m!==null){v=m.coordinates;var s=m.type;switch(P=r&&(s==="Polygon"||s==="MultiPolygon")?1:0,s){case null:break;case"Point":if(n(v,E,S,e,i)===!1)return!1;E++,e++;break;case"LineString":case"MultiPoint":for(a=0;a<v.length;a++){if(n(v[a],E,S,e,i)===!1)return!1;E++,s==="MultiPoint"&&e++}s==="LineString"&&e++;break;case"Polygon":case"MultiLineString":for(a=0;a<v.length;a++){for(f=0;f<v[a].length-P;f++){if(n(v[a][f],E,S,e,i)===!1)return!1;E++}s==="MultiLineString"&&e++,s==="Polygon"&&i++}s==="Polygon"&&e++;break;case"MultiPolygon":for(a=0;a<v.length;a++){for(i=0,f=0;f<v[a].length;f++){for(l=0;l<v[a][f].length-P;l++){if(n(v[a][f][l],E,S,e,i)===!1)return!1;E++}i++}e++}break;case"GeometryCollection":for(a=0;a<m.geometries.length;a++)if(ot(m.geometries[a],n,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function pt(o){var n=[1/0,1/0,-1/0,-1/0];return ot(o,function(r){n[0]>r[0]&&(n[0]=r[0]),n[1]>r[1]&&(n[1]=r[1]),n[2]<r[0]&&(n[2]=r[0]),n[3]<r[1]&&(n[3]=r[1])}),n}pt.default=pt;var gt={exports:{}},St={exports:{}};(function(o,n){(function(r,a){o.exports=a()})(Pt,function(){function r(t,e,i,s,c){(function h(u,p,Y,B,N){for(;B>Y;){if(B-Y>600){var D=B-Y+1,j=p-Y+1,I=Math.log(D),$=.5*Math.exp(2*I/3),A=.5*Math.sqrt(I*$*(D-$)/D)*(j-D/2<0?-1:1),q=Math.max(Y,Math.floor(p-j*$/D+A)),z=Math.min(B,Math.floor(p+(D-j)*$/D+A));h(u,p,q,z,N)}var g=u[p],w=Y,C=B;for(a(u,Y,p),N(u[B],g)>0&&a(u,Y,B);w<C;){for(a(u,w,C),w++,C--;N(u[w],g)<0;)w++;for(;N(u[C],g)>0;)C--}N(u[Y],g)===0?a(u,Y,C):a(u,++C,B),C<=p&&(Y=C+1),p<=C&&(B=C-1)}})(t,e,i||0,s||t.length-1,c||f)}function a(t,e,i){var s=t[e];t[e]=t[i],t[i]=s}function f(t,e){return t<e?-1:t>e?1:0}var l=function(t){t===void 0&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function m(t,e,i){if(!i)return e.indexOf(t);for(var s=0;s<e.length;s++)if(i(t,e[s]))return s;return-1}function d(t,e){v(t,0,t.children.length,e,t)}function v(t,e,i,s,c){c||(c=R(null)),c.minX=1/0,c.minY=1/0,c.maxX=-1/0,c.maxY=-1/0;for(var h=e;h<i;h++){var u=t.children[h];_(c,t.leaf?s(u):u)}return c}function _(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function P(t,e){return t.minX-e.minX}function E(t,e){return t.minY-e.minY}function M(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function X(t){return t.maxX-t.minX+(t.maxY-t.minY)}function x(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function y(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function R(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function S(t,e,i,s,c){for(var h=[e,i];h.length;)if(!((i=h.pop())-(e=h.pop())<=s)){var u=e+Math.ceil((i-e)/s/2)*s;r(t,u,e,i,c),h.push(e,u,u,i)}}return l.prototype.all=function(){return this._all(this.data,[])},l.prototype.search=function(t){var e=this.data,i=[];if(!y(t,e))return i;for(var s=this.toBBox,c=[];e;){for(var h=0;h<e.children.length;h++){var u=e.children[h],p=e.leaf?s(u):u;y(t,p)&&(e.leaf?i.push(u):x(t,p)?this._all(u,i):c.push(u))}e=c.pop()}return i},l.prototype.collides=function(t){var e=this.data;if(!y(t,e))return!1;for(var i=[];e;){for(var s=0;s<e.children.length;s++){var c=e.children[s],h=e.leaf?this.toBBox(c):c;if(y(t,h)){if(e.leaf||x(t,h))return!0;i.push(c)}}e=i.pop()}return!1},l.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var s=this.data;this.data=i,i=s}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},l.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},l.prototype.clear=function(){return this.data=R([]),this},l.prototype.remove=function(t,e){if(!t)return this;for(var i,s,c,h=this.data,u=this.toBBox(t),p=[],Y=[];h||p.length;){if(h||(h=p.pop(),s=p[p.length-1],i=Y.pop(),c=!0),h.leaf){var B=m(t,h.children,e);if(B!==-1)return h.children.splice(B,1),p.push(h),this._condense(p),this}c||h.leaf||!x(h,u)?s?(i++,h=s.children[i],c=!1):h=null:(p.push(h),Y.push(i),i=0,s=h,h=h.children[0])}return this},l.prototype.toBBox=function(t){return t},l.prototype.compareMinX=function(t,e){return t.minX-e.minX},l.prototype.compareMinY=function(t,e){return t.minY-e.minY},l.prototype.toJSON=function(){return this.data},l.prototype.fromJSON=function(t){return this.data=t,this},l.prototype._all=function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},l.prototype._build=function(t,e,i,s){var c,h=i-e+1,u=this._maxEntries;if(h<=u)return d(c=R(t.slice(e,i+1)),this.toBBox),c;s||(s=Math.ceil(Math.log(h)/Math.log(u)),u=Math.ceil(h/Math.pow(u,s-1))),(c=R([])).leaf=!1,c.height=s;var p=Math.ceil(h/u),Y=p*Math.ceil(Math.sqrt(u));S(t,e,i,Y,this.compareMinX);for(var B=e;B<=i;B+=Y){var N=Math.min(B+Y-1,i);S(t,B,N,p,this.compareMinY);for(var D=B;D<=N;D+=p){var j=Math.min(D+p-1,N);c.children.push(this._build(t,D,j,s-1))}}return d(c,this.toBBox),c},l.prototype._chooseSubtree=function(t,e,i,s){for(;s.push(e),!e.leaf&&s.length-1!==i;){for(var c=1/0,h=1/0,u=void 0,p=0;p<e.children.length;p++){var Y=e.children[p],B=M(Y),N=(D=t,j=Y,(Math.max(j.maxX,D.maxX)-Math.min(j.minX,D.minX))*(Math.max(j.maxY,D.maxY)-Math.min(j.minY,D.minY))-B);N<h?(h=N,c=B<c?B:c,u=Y):N===h&&B<c&&(c=B,u=Y)}e=u||e.children[0]}var D,j;return e},l.prototype._insert=function(t,e,i){var s=i?t:this.toBBox(t),c=[],h=this._chooseSubtree(s,this.data,e,c);for(h.children.push(t),_(h,s);e>=0&&c[e].children.length>this._maxEntries;)this._split(c,e),e--;this._adjustParentBBoxes(s,c,e)},l.prototype._split=function(t,e){var i=t[e],s=i.children.length,c=this._minEntries;this._chooseSplitAxis(i,c,s);var h=this._chooseSplitIndex(i,c,s),u=R(i.children.splice(h,i.children.length-h));u.height=i.height,u.leaf=i.leaf,d(i,this.toBBox),d(u,this.toBBox),e?t[e-1].children.push(u):this._splitRoot(i,u)},l.prototype._splitRoot=function(t,e){this.data=R([t,e]),this.data.height=t.height+1,this.data.leaf=!1,d(this.data,this.toBBox)},l.prototype._chooseSplitIndex=function(t,e,i){for(var s,c,h,u,p,Y,B,N=1/0,D=1/0,j=e;j<=i-e;j++){var I=v(t,0,j,this.toBBox),$=v(t,j,i,this.toBBox),A=(c=I,h=$,u=void 0,p=void 0,Y=void 0,B=void 0,u=Math.max(c.minX,h.minX),p=Math.max(c.minY,h.minY),Y=Math.min(c.maxX,h.maxX),B=Math.min(c.maxY,h.maxY),Math.max(0,Y-u)*Math.max(0,B-p)),q=M(I)+M($);A<N?(N=A,s=j,D=q<D?q:D):A===N&&q<D&&(D=q,s=j)}return s||i-e},l.prototype._chooseSplitAxis=function(t,e,i){var s=t.leaf?this.compareMinX:P,c=t.leaf?this.compareMinY:E;this._allDistMargin(t,e,i,s)<this._allDistMargin(t,e,i,c)&&t.children.sort(s)},l.prototype._allDistMargin=function(t,e,i,s){t.children.sort(s);for(var c=this.toBBox,h=v(t,0,e,c),u=v(t,i-e,i,c),p=X(h)+X(u),Y=e;Y<i-e;Y++){var B=t.children[Y];_(h,t.leaf?c(B):B),p+=X(h)}for(var N=i-e-1;N>=e;N--){var D=t.children[N];_(u,t.leaf?c(D):D),p+=X(u)}return p},l.prototype._adjustParentBBoxes=function(t,e,i){for(var s=i;s>=0;s--)_(e[s],t)},l.prototype._condense=function(t){for(var e=t.length-1,i=void 0;e>=0;e--)t[e].children.length===0?e>0?(i=t[e-1].children).splice(i.indexOf(t[e]),1):this.clear():d(t[e],this.toBBox)},l})})(St);var re=St.exports;class ie{constructor(n=[],r=ae){if(this.data=n,this.length=this.data.length,this.compare=r,this.length>0)for(let a=(this.length>>1)-1;a>=0;a--)this._down(a)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],r=this.data.pop();return this.length--,this.length>0&&(this.data[0]=r,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:r,compare:a}=this,f=r[n];for(;n>0;){const l=n-1>>1,m=r[l];if(a(f,m)>=0)break;r[n]=m,n=l}r[n]=f}_down(n){const{data:r,compare:a}=this,f=this.length>>1,l=r[n];for(;n<f;){let m=(n<<1)+1,d=r[m];const v=m+1;if(v<this.length&&a(r[v],d)<0&&(m=v,d=r[v]),a(d,l)>=0)break;r[n]=d,n=m}r[n]=l}}function ae(o,n){return o<n?-1:o>n?1:0}const oe=Object.freeze(Object.defineProperty({__proto__:null,default:ie},Symbol.toStringTag,{value:"Module"})),se=Gt(oe);var ct={exports:{}},le=function(n,r,a,f){var l=n[0],m=n[1],d=!1;a===void 0&&(a=0),f===void 0&&(f=r.length);for(var v=(f-a)/2,_=0,P=v-1;_<v;P=_++){var E=r[a+_*2+0],M=r[a+_*2+1],X=r[a+P*2+0],x=r[a+P*2+1],y=M>m!=x>m&&l<(X-E)*(m-M)/(x-M)+E;y&&(d=!d)}return d},ce=function(n,r,a,f){var l=n[0],m=n[1],d=!1;a===void 0&&(a=0),f===void 0&&(f=r.length);for(var v=f-a,_=0,P=v-1;_<v;P=_++){var E=r[_+a][0],M=r[_+a][1],X=r[P+a][0],x=r[P+a][1],y=M>m!=x>m&&l<(X-E)*(m-M)/(x-M)+E;y&&(d=!d)}return d},Ct=le,Et=ce;ct.exports=function(n,r,a,f){return r.length>0&&Array.isArray(r[0])?Et(n,r,a,f):Ct(n,r,a,f)};ct.exports.nested=Et;ct.exports.flat=Ct;var fe=ct.exports,dt={exports:{}};(function(o,n){(function(r,a){a(n)})(Pt,function(r){const f=33306690738754706e-32;function l(y,R,S,t,e){let i,s,c,h,u=R[0],p=t[0],Y=0,B=0;p>u==p>-u?(i=u,u=R[++Y]):(i=p,p=t[++B]);let N=0;if(Y<y&&B<S)for(p>u==p>-u?(c=i-((s=u+i)-u),u=R[++Y]):(c=i-((s=p+i)-p),p=t[++B]),i=s,c!==0&&(e[N++]=c);Y<y&&B<S;)p>u==p>-u?(c=i-((s=i+u)-(h=s-i))+(u-h),u=R[++Y]):(c=i-((s=i+p)-(h=s-i))+(p-h),p=t[++B]),i=s,c!==0&&(e[N++]=c);for(;Y<y;)c=i-((s=i+u)-(h=s-i))+(u-h),u=R[++Y],i=s,c!==0&&(e[N++]=c);for(;B<S;)c=i-((s=i+p)-(h=s-i))+(p-h),p=t[++B],i=s,c!==0&&(e[N++]=c);return i===0&&N!==0||(e[N++]=i),N}function m(y){return new Float64Array(y)}const d=33306690738754716e-32,v=22204460492503146e-32,_=11093356479670487e-47,P=m(4),E=m(8),M=m(12),X=m(16),x=m(4);r.orient2d=function(y,R,S,t,e,i){const s=(R-i)*(S-e),c=(y-e)*(t-i),h=s-c;if(s===0||c===0||s>0!=c>0)return h;const u=Math.abs(s+c);return Math.abs(h)>=d*u?h:-function(p,Y,B,N,D,j,I){let $,A,q,z,g,w,C,L,O,H,k,G,F,T,J,Q,et,U;const K=p-D,V=B-D,Z=Y-j,W=N-j;g=(J=(L=K-(C=(w=134217729*K)-(w-K)))*(H=W-(O=(w=134217729*W)-(w-W)))-((T=K*W)-C*O-L*O-C*H))-(k=J-(et=(L=Z-(C=(w=134217729*Z)-(w-Z)))*(H=V-(O=(w=134217729*V)-(w-V)))-((Q=Z*V)-C*O-L*O-C*H))),P[0]=J-(k+g)+(g-et),g=(F=T-((G=T+k)-(g=G-T))+(k-g))-(k=F-Q),P[1]=F-(k+g)+(g-Q),g=(U=G+k)-G,P[2]=G-(U-g)+(k-g),P[3]=U;let nt=function(Ot,xt){let yt=xt[0];for(let ft=1;ft<Ot;ft++)yt+=xt[ft];return yt}(4,P),at=v*I;if(nt>=at||-nt>=at||($=p-(K+(g=p-K))+(g-D),q=B-(V+(g=B-V))+(g-D),A=Y-(Z+(g=Y-Z))+(g-j),z=N-(W+(g=N-W))+(g-j),$===0&&A===0&&q===0&&z===0)||(at=_*I+f*Math.abs(nt),(nt+=K*z+W*$-(Z*q+V*A))>=at||-nt>=at))return nt;g=(J=(L=$-(C=(w=134217729*$)-(w-$)))*(H=W-(O=(w=134217729*W)-(w-W)))-((T=$*W)-C*O-L*O-C*H))-(k=J-(et=(L=A-(C=(w=134217729*A)-(w-A)))*(H=V-(O=(w=134217729*V)-(w-V)))-((Q=A*V)-C*O-L*O-C*H))),x[0]=J-(k+g)+(g-et),g=(F=T-((G=T+k)-(g=G-T))+(k-g))-(k=F-Q),x[1]=F-(k+g)+(g-Q),g=(U=G+k)-G,x[2]=G-(U-g)+(k-g),x[3]=U;const Rt=l(4,P,4,x,E);g=(J=(L=K-(C=(w=134217729*K)-(w-K)))*(H=z-(O=(w=134217729*z)-(w-z)))-((T=K*z)-C*O-L*O-C*H))-(k=J-(et=(L=Z-(C=(w=134217729*Z)-(w-Z)))*(H=q-(O=(w=134217729*q)-(w-q)))-((Q=Z*q)-C*O-L*O-C*H))),x[0]=J-(k+g)+(g-et),g=(F=T-((G=T+k)-(g=G-T))+(k-g))-(k=F-Q),x[1]=F-(k+g)+(g-Q),g=(U=G+k)-G,x[2]=G-(U-g)+(k-g),x[3]=U;const kt=l(Rt,E,4,x,M);g=(J=(L=$-(C=(w=134217729*$)-(w-$)))*(H=z-(O=(w=134217729*z)-(w-z)))-((T=$*z)-C*O-L*O-C*H))-(k=J-(et=(L=A-(C=(w=134217729*A)-(w-A)))*(H=q-(O=(w=134217729*q)-(w-q)))-((Q=A*q)-C*O-L*O-C*H))),x[0]=J-(k+g)+(g-et),g=(F=T-((G=T+k)-(g=G-T))+(k-g))-(k=F-Q),x[1]=F-(k+g)+(g-Q),g=(U=G+k)-G,x[2]=G-(U-g)+(k-g),x[3]=U;const jt=l(kt,M,4,x,X);return X[jt-1]}(y,R,S,t,e,i,u)},r.orient2dfast=function(y,R,S,t,e,i){return(R-i)*(S-e)-(y-e)*(t-i)},Object.defineProperty(r,"__esModule",{value:!0})})})(dt,dt.exports);var he=dt.exports,Mt=re,lt=se,ue=fe,me=he.orient2d;lt.default&&(lt=lt.default);gt.exports=Nt;gt.exports.default=Nt;function Nt(o,n,r){n=Math.max(0,n===void 0?2:n),r=r||0;var a=xe(o),f=new Mt(16);f.toBBox=function(t){return{minX:t[0],minY:t[1],maxX:t[0],maxY:t[1]}},f.compareMinX=function(t,e){return t[0]-e[0]},f.compareMinY=function(t,e){return t[1]-e[1]},f.load(o);for(var l=[],m=0,d;m<a.length;m++){var v=a[m];f.remove(v),d=Yt(v,d),l.push(d)}var _=new Mt(16);for(m=0;m<l.length;m++)_.insert(ht(l[m]));for(var P=n*n,E=r*r;l.length;){var M=l.shift(),X=M.p,x=M.next.p,y=ut(X,x);if(!(y<E)){var R=y/P;v=ve(f,M.prev.p,X,x,M.next.next.p,R,_),v&&Math.min(ut(v,X),ut(v,x))<=R&&(l.push(M),l.push(Yt(v,M)),f.remove(v),_.remove(M),_.insert(ht(M)),_.insert(ht(M.next)))}}M=d;var S=[];do S.push(M.p),M=M.next;while(M!==d);return S.push(M.p),S}function ve(o,n,r,a,f,l,m){for(var d=new lt([],pe),v=o.data;v;){for(var _=0;_<v.children.length;_++){var P=v.children[_],E=v.leaf?mt(P,r,a):de(r,a,P);E>l||d.push({node:P,dist:E})}for(;d.length&&!d.peek().node.children;){var M=d.pop(),X=M.node,x=mt(X,n,r),y=mt(X,a,f);if(M.dist<x&&M.dist<y&&Xt(r,X,m)&&Xt(a,X,m))return X}v=d.pop(),v&&(v=v.node)}return null}function pe(o,n){return o.dist-n.dist}function de(o,n,r){if(_t(o,r)||_t(n,r))return 0;var a=st(o[0],o[1],n[0],n[1],r.minX,r.minY,r.maxX,r.minY);if(a===0)return 0;var f=st(o[0],o[1],n[0],n[1],r.minX,r.minY,r.minX,r.maxY);if(f===0)return 0;var l=st(o[0],o[1],n[0],n[1],r.maxX,r.minY,r.maxX,r.maxY);if(l===0)return 0;var m=st(o[0],o[1],n[0],n[1],r.minX,r.maxY,r.maxX,r.maxY);return m===0?0:Math.min(a,f,l,m)}function _t(o,n){return o[0]>=n.minX&&o[0]<=n.maxX&&o[1]>=n.minY&&o[1]<=n.maxY}function Xt(o,n,r){for(var a=Math.min(o[0],n[0]),f=Math.min(o[1],n[1]),l=Math.max(o[0],n[0]),m=Math.max(o[1],n[1]),d=r.search({minX:a,minY:f,maxX:l,maxY:m}),v=0;v<d.length;v++)if(ge(d[v].p,d[v].next.p,o,n))return!1;return!0}function it(o,n,r){return me(o[0],o[1],n[0],n[1],r[0],r[1])}function ge(o,n,r,a){return o!==a&&n!==r&&it(o,n,r)>0!=it(o,n,a)>0&&it(r,a,o)>0!=it(r,a,n)>0}function ht(o){var n=o.p,r=o.next.p;return o.minX=Math.min(n[0],r[0]),o.minY=Math.min(n[1],r[1]),o.maxX=Math.max(n[0],r[0]),o.maxY=Math.max(n[1],r[1]),o}function xe(o){for(var n=o[0],r=o[0],a=o[0],f=o[0],l=0;l<o.length;l++){var m=o[l];m[0]<n[0]&&(n=m),m[0]>a[0]&&(a=m),m[1]<r[1]&&(r=m),m[1]>f[1]&&(f=m)}var d=[n,r,a,f],v=d.slice();for(l=0;l<o.length;l++)ue(o[l],d)||v.push(o[l]);return Me(v)}function Yt(o,n){var r={p:o,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function ut(o,n){var r=o[0]-n[0],a=o[1]-n[1];return r*r+a*a}function mt(o,n,r){var a=n[0],f=n[1],l=r[0]-a,m=r[1]-f;if(l!==0||m!==0){var d=((o[0]-a)*l+(o[1]-f)*m)/(l*l+m*m);d>1?(a=r[0],f=r[1]):d>0&&(a+=l*d,f+=m*d)}return l=o[0]-a,m=o[1]-f,l*l+m*m}function st(o,n,r,a,f,l,m,d){var v=r-o,_=a-n,P=m-f,E=d-l,M=o-f,X=n-l,x=v*v+_*_,y=v*P+_*E,R=P*P+E*E,S=v*M+_*X,t=P*M+E*X,e=x*R-y*y,i,s,c,h,u=e,p=e;e===0?(s=0,u=1,h=t,p=R):(s=y*t-R*S,h=x*t-y*S,s<0?(s=0,h=t,p=R):s>u&&(s=u,h=t+y,p=R)),h<0?(h=0,-S<0?s=0:-S>x?s=u:(s=-S,u=x)):h>p&&(h=p,-S+y<0?s=0:-S+y>x?s=u:(s=-S+y,u=x)),i=s===0?0:s/u,c=h===0?0:h/p;var Y=(1-i)*o+i*r,B=(1-i)*n+i*a,N=(1-c)*f+c*m,D=(1-c)*l+c*d,j=N-Y,I=D-B;return j*j+I*I}function ye(o,n){return o[0]===n[0]?o[1]-n[1]:o[0]-n[0]}function Me(o){o.sort(ye);for(var n=[],r=0;r<o.length;r++){for(;n.length>=2&&it(n[n.length-2],n[n.length-1],o[r])<=0;)n.pop();n.push(o[r])}for(var a=[],f=o.length-1;f>=0;f--){for(;a.length>=2&&it(a[a.length-2],a[a.length-1],o[f])<=0;)a.pop();a.push(o[f])}return a.pop(),n.pop(),n.concat(a)}var _e=gt.exports;const Xe=$t(_e);function Ye(o,n){n===void 0&&(n={}),n.concavity=n.concavity||1/0;var r=[];if(ot(o,function(f){r.push([f[0],f[1]])}),!r.length)return null;var a=Xe(r,n.concavity);return a.length>3?zt([a]):null}function Bt(o,n){n===void 0&&(n={});var r=0,a=0,f=0;return ot(o,function(l){r+=l[0],a+=l[1],f++},!0),vt([r/f,a/f],n.properties)}function Dt(o,n){switch(n===void 0&&(n={}),Ft(o)){case"Point":return vt(Jt(o),n.properties);case"Polygon":var r=[];ot(o,function(i){r.push(i)});var a=Bt(o,{properties:n.properties}),f=a.geometry.coordinates,l=0,m=0,d=0,v,_,P,E,M,X,x,y,R=r.map(function(i){return[i[0]-f[0],i[1]-f[1]]});for(v=0;v<r.length-1;v++)_=R[v],E=_[0],X=_[1],P=R[v+1],M=P[0],x=P[1],y=E*x-M*X,d+=y,l+=(E+M)*y,m+=(X+x)*y;if(d===0)return a;var S=d*.5,t=1/(6*S);return vt([f[0]+t*l,f[1]+t*m],n.properties);default:var e=Ye(o);return e?Dt(e,{properties:n.properties}):Bt(o,{properties:n.properties})}}function Be(o){return o.map(r=>r.map(a=>a.map(f=>[f.x,f.y])))}const we=({amount:o,rating:n,en:r,ru:a,geometry:f})=>{const l=tt.useRef(null),[m,d]=tt.useState([]),[v,_]=tt.useState(null),P=At(),E=qt(X=>X.app.mapRef),M=tt.useCallback(()=>{const X=+m[0].toFixed(5),x=+m[1].toFixed(5),y=wt;Qt({lat:X,lng:x,zoom:y}),P.push(`/?lat=${X}&lng=${x}&zoom=${y}`),E.flyTo({center:[X,x],zoom:y,speed:.8})},[v,wt,m]);return tt.useEffect(()=>{if(f){const X=Ut(Be(f));_(X),d(Dt(X).geometry.coordinates)}},[f]),tt.useEffect(()=>{if(v&&l.current){const X=l.current,x=X.getContext("2d");if(x){const y=pt(v),R=y[2]-y[0],S=y[3]-y[1],t=X.width/R,e=X.height/S,i=getComputedStyle(document.querySelector("html")).getPropertyValue("--secondary");x.fillStyle=i,x.beginPath();const s=It(v);if(Array.isArray(s))for(const c of s[0][0]){const h=(c[0]-y[0])*t,u=X.height-(c[1]-y[1])*e;x.lineTo(h,u)}x.closePath(),x.fill()}}},[v,l]),b.jsxs("div",{className:rt.cityItem,children:[b.jsx("div",{className:rt.preview,onClick:M,children:b.jsx("canvas",{className:rt.geojsonPreview,ref:l})}),b.jsxs("div",{className:rt.cityDetails,children:[b.jsx("h2",{className:rt.cityName,children:Lt==="ru"?a:r}),b.jsx("div",{className:rt.cityRating,children:b.jsx(Kt,{rating:n,amount:o})})]})]})};async function Pe(){return await Ht("GET","cities","top",null,!1)()}const wt=13;function De(){const[o,n]=tt.useState([]),r=o.length?o.map(a=>tt.createElement(we,{...a,key:a.code})):b.jsx("h3",{children:"TEXT.no cities yet"});return tt.useEffect(()=>{(async function(){const f=await Pe();f.data&&n(f.data)})()},[]),b.jsxs("div",{className:"cities",children:[b.jsx(Tt,{}),b.jsx("div",{className:Zt.container,children:r})]})}export{De as Cities,wt as ZOOM_ON_CITY};

import{T as e,a as h,B as b,r as o,j as s,C as L,i as N,h as v}from"./index-8ffe9592.js";import{Login as C}from"./Login-a09b2948.js";import{r as R}from"./users-c83c930d.js";import{R as q}from"./Responser-c5df3789.js";const g={login:"",pword:"",name:"",question:e.secretExample,answer:""},y=()=>{const l=h(),c=b(),[t,n]=o.useState(g),[x,r]=o.useState(""),u=o.useRef(null),[f,d]=o.useState(!1);function i(a){n({...t,[a.target.name]:a.target.value})}function j(){d(!1),r(e.secretReplica2),u.current.focus()}async function w(){var m,p;if(!t.login||!t.pword)return r(e.fillRequiredFields);if(t.question&&!t.answer)return t.question===e.secretExample&&d(!0),u.current.focus(),r(e.secretValidation);if(((m=t.question)==null?void 0:m.length)>300)return r((e.field+" "+e.secretQuestion+" "+e.tooLong).toLocaleLowerCase().capitalize());if(((p=t.answer)==null?void 0:p.length)>255)return r((e.field+" "+e.secterAnswer+" "+e.tooLong).toLocaleLowerCase().capitalize());if(t.login.length>50)return r((e.field+" "+e.login+" "+e.tooLong).toLocaleLowerCase().capitalize());if(t.pword.length>50)return r((e.field+" "+e.password+" "+e.tooLong).toLocaleLowerCase().capitalize());if(t.name.length>140)return r((e.field+" "+e.userName+" "+e.tooLong).toLocaleLowerCase().capitalize());const a=await R(t);if(console.log("%câ§­","color: #86bf60",t,a),a.status==="OK")r(e.successfullReg),L(l,a.data),n(g),c.push("/");else{if(a.status==="EXISTING")return r(e.loginOccupied+" - "+t.login);if(a.status==="BANEDPWORD")return r(e.bannedPwod+" - "+t.pword);r(e.errorReg+", "+e.errCode+": "+(a.msg||a))}}return s.jsx("div",{children:s.jsxs("div",{className:"register-form",children:[s.jsx("h4",{children:e.register}),s.jsxs("label",{htmlFor:"login",children:[e.login,":"]}),s.jsx("input",{type:"text",name:"login",value:t.login,onInput:i,autoFocus:!0,required:!0}),s.jsx("br",{}),s.jsxs("label",{htmlFor:"name",children:[e.userName,":"]}),s.jsx("input",{type:"text",name:"name",value:t.name,onInput:i,required:!0}),s.jsx("br",{}),s.jsxs("label",{htmlFor:"pword",children:[e.password,":"]}),s.jsx("input",{type:"password",name:"pword",value:t.pword,onInput:i,required:!0}),s.jsx("br",{}),s.jsx("br",{}),s.jsxs("label",{htmlFor:"question",children:[e.secretQuestion,":"]}),s.jsx("br",{}),s.jsx("textarea",{type:"text",name:"question",value:t.question,onInput:i,autoComplete:"false"}),s.jsx("p",{className:"little-hint",children:e.secretHint}),s.jsxs("label",{htmlFor:"answer",children:[e.secterAnswer,":"]}),s.jsx("input",{type:"text",name:"answer",value:t.answer,onInput:i,required:!!t.question,ref:u,autoComplete:"false"}),s.jsx("div",{className:"register-responser",children:s.jsx(q,{message:x,setMessage:r})}),f&&s.jsx("button",{className:"btn-replica mp-border-counter mp-primary-hover",onClick:j,children:e.secretReplica}),s.jsx("button",{className:"mp-border-accent",type:"button",onClick:w,children:e.submit})]})})};const z=()=>{const l=h(),c=new URLSearchParams(N().search).get("reg"),[t,n]=o.useState(!0);return o.useEffect(()=>{v(l),c&&n(!1)},[]),s.jsxs("div",{className:"auth-container relative",children:[s.jsxs("div",{className:"absolute center auth-subcontainer",children:[t?s.jsx("h3",{className:"align-center",children:e.login}):null,s.jsx("div",{className:"auth-action-wrap mp-border-secondary",children:t?s.jsx(C,{}):s.jsx(y,{})}),s.jsx("div",{className:"align-center",children:t?s.jsx("button",{className:"small",onClick:()=>n(!1),children:e.register}):s.jsx("button",{className:"small",onClick:()=>n(!0),children:e.login})})]}),s.jsx("div",{className:"bottom"})]})};export{z as AuthMain};

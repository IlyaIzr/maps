import{a as w,l as b,f as a,j as s,T as e,F as L,G as N}from"./index-5904d5c1.js";import{Login as v}from"./Login-5607ca5d.js";import{r as C}from"./users-3bc48640.js";import{R}from"./Responser-fdda9d80.js";/* empty css             */const g={login:"",pword:"",name:"",question:e.secretExample,answer:""},q=()=>{const l=w(),o=b(),[t,u]=a.useState(g),[h,r]=a.useState(""),c=a.useRef(null),[x,d]=a.useState(!1);function i(n){u({...t,[n.target.name]:n.target.value})}function f(){d(!1),r(e.secretReplica2),c.current.focus()}async function j(){var m,p;if(!t.login||!t.pword)return r(e.fillRequiredFields);if(t.question&&!t.answer)return t.question===e.secretExample&&d(!0),c.current.focus(),r(e.secretValidation);if(((m=t.question)==null?void 0:m.length)>300)return r((e.field+" "+e.secretQuestion+" "+e.tooLong).toLocaleLowerCase().capitalize());if(((p=t.answer)==null?void 0:p.length)>255)return r((e.field+" "+e.secterAnswer+" "+e.tooLong).toLocaleLowerCase().capitalize());if(t.login.length>50)return r((e.field+" "+e.login+" "+e.tooLong).toLocaleLowerCase().capitalize());if(t.pword.length>50)return r((e.field+" "+e.password+" "+e.tooLong).toLocaleLowerCase().capitalize());if(t.name.length>140)return r((e.field+" "+e.userName+" "+e.tooLong).toLocaleLowerCase().capitalize());const n=await C(t);if(console.log("%câ§­","color: #86bf60",t,n),n.status==="OK")r(e.successfullReg),L(l,n.data),u(g),o.push("/");else{if(n.status==="EXISTING")return r(e.loginOccupied+" - "+t.login);if(n.status==="BANEDPWORD")return r(e.bannedPwod+" - "+t.pword);r(e.errorReg+", "+e.errCode+": "+(n.msg||n))}}return s.jsx("div",{children:s.jsxs("div",{className:"register-form",children:[s.jsx("h4",{children:e.register}),s.jsxs("label",{htmlFor:"login",children:[e.login,":"]}),s.jsx("input",{type:"text",name:"login",value:t.login,onInput:i,autoFocus:!0,required:!0}),s.jsx("br",{}),s.jsxs("label",{htmlFor:"name",children:[e.userName,":"]}),s.jsx("input",{type:"text",name:"name",value:t.name,onInput:i,required:!0}),s.jsx("br",{}),s.jsxs("label",{htmlFor:"pword",children:[e.password,":"]}),s.jsx("input",{type:"password",name:"pword",value:t.pword,onInput:i,required:!0}),s.jsx("br",{}),s.jsx("br",{}),s.jsxs("label",{htmlFor:"question",children:[e.secretQuestion,":"]}),s.jsx("br",{}),s.jsx("textarea",{type:"text",name:"question",value:t.question,onInput:i,autoComplete:"false"}),s.jsx("p",{className:"little-hint",children:e.secretHint}),s.jsxs("label",{htmlFor:"answer",children:[e.secterAnswer,":"]}),s.jsx("input",{type:"text",name:"answer",value:t.answer,onInput:i,required:!!t.question,ref:c,autoComplete:"false"}),s.jsx("div",{className:"register-responser",children:s.jsx(R,{message:h,setMessage:r})}),x&&s.jsx("button",{className:"btn-replica mp-border-counter mp-primary-hover",onClick:f,children:e.secretReplica}),s.jsx("button",{className:"mp-border-accent",type:"button",onClick:j,children:e.submit})]})})},I=()=>{const l=new URLSearchParams(N().search).get("reg"),[o,t]=a.useState(!0);return a.useEffect(()=>{l&&t(!1)},[]),s.jsx("div",{className:"auth-container relative",children:s.jsxs("div",{className:"absolute center auth-subcontainer",children:[o?s.jsx("h3",{className:"align-center",children:e.login}):null,s.jsx("div",{className:"auth-action-wrap mp-border-secondary",children:o?s.jsx(v,{}):s.jsx(q,{})}),s.jsx("div",{className:"align-center",children:o?s.jsx("button",{className:"small",onClick:()=>t(!1),children:e.register}):s.jsx("button",{className:"small",onClick:()=>t(!0),children:e.login})})]})})};export{I as AuthMain};

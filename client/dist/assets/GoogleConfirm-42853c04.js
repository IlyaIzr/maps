import{a as p,x as h,f as l,F as o,j as s,T as e,y as f}from"./index-4b67aea8.js";import{b as x}from"./users-eb5b7c09.js";import{R as j}from"./Responser-5062a836.js";const v=()=>{const u=p(),g=h(),[t,i]=l.useState({...o}),[d,r]=l.useState("");function c(a){i({...t,[a.target.name]:a.target.value})}l.useEffect(()=>{i(o)},[]);async function m(){if(t.login.length>50)return r((e.field+" "+e.login+" "+e.tooLong).toLocaleLowerCase().capitalize());if(t.name.length>140)return r((e.field+" "+e.userName+" "+e.tooLong).toLocaleLowerCase().capitalize());const a={...t};delete a.occupiedLogin;const n=await x(a);if(console.log("%c⧭","color: #0088cc",n),n.status==="OK")r(e.successfullReg),f(u,n.data),console.log("%c⧭","color: #00b300",o),Object.keys(o).forEach(b=>{o.key=null}),i(o),g.push("/");else{if(n.status==="EXISTING")return r(e.loginOccupied+" - "+t.login);if(n.status==="BANEDPWORD")return r(e.bannedPwod+" - "+t.pword);r(e.errorReg+", "+e.errCode+": "+(n.msg||n))}}return s.jsx("div",{className:"auth-container relative",children:s.jsx("div",{className:"absolute center auth-subcontainer",children:s.jsxs("div",{className:"google-regform mp-border-secondary",children:[s.jsx("h4",{children:e.oauthTitle}),s.jsxs("label",{htmlFor:"login",children:[e.login,":"]}),s.jsx("input",{type:"text",name:"login",value:t.login,onInput:c,required:!0}),o.occupiedLogin&&s.jsx("p",{className:"little-hint",children:e.login+" "+o.occupiedLogin+" "+e.occupied}),s.jsx("br",{}),s.jsxs("label",{htmlFor:"name",children:[e.userName,":"]}),s.jsx("input",{type:"text",name:"name",value:t.name,onInput:c,required:!0}),s.jsx("br",{}),s.jsx(j,{message:d,setMessage:r}),s.jsx("button",{className:"mp-border-accent",type:"button",onClick:m,children:e.confirm})]})})})};export{v as GoogleConfirm};

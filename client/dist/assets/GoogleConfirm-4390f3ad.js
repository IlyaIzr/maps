import{a as p,q as h,o as c,R as o,j as s,T as e,N as f}from"./index-6eca9cb0.js";import{b as x}from"./users-7c042c4b.js";import{R as j}from"./Responser-295392a4.js";import{w as b}from"./url-6d62d571.js";const w=()=>{const u=p(),d=h(),[t,i]=c.useState({...o}),[g,r]=c.useState("");function l(n){i({...t,[n.target.name]:n.target.value})}c.useEffect(()=>{i(o)},[]);async function m(){if(t.login.length>50)return r((e.field+" "+e.login+" "+e.tooLong).toLocaleLowerCase().capitalize());if(t.name.length>140)return r((e.field+" "+e.userName+" "+e.tooLong).toLocaleLowerCase().capitalize());const n={...t};delete n.occupiedLogin;const a=await x(n);if(console.log("%c⧭","color: #0088cc",a),a.status==="OK")r(e.successfullReg),f(u,a.data),console.log("%c⧭","color: #00b300",o),Object.keys(o).forEach(y=>{o.key=null}),i(o),d.push(b("/"));else{if(a.status==="EXISTING")return r(e.loginOccupied+" - "+t.login);if(a.status==="BANEDPWORD")return r(e.bannedPassword+" - "+t.pword);r(e.errorReg+", "+e.errCode+": "+(a.msg||a))}}return s.jsx("div",{className:"auth-container relative",children:s.jsx("div",{className:"absolute center auth-subcontainer",children:s.jsxs("div",{className:"google-regform mp-border-secondary",children:[s.jsx("h4",{children:e.oauthTitle}),s.jsxs("label",{htmlFor:"login",children:[e.login,":"]}),s.jsx("input",{type:"text",name:"login",value:t.login,onInput:l,required:!0}),o.occupiedLogin&&s.jsx("p",{className:"little-hint",children:e.login+" "+o.occupiedLogin+" "+e.occupied}),s.jsx("br",{}),s.jsxs("label",{htmlFor:"name",children:[e.userName,":"]}),s.jsx("input",{type:"text",name:"name",value:t.name,onInput:l,required:!0}),s.jsx("br",{}),s.jsx(j,{message:g,setMessage:r}),s.jsx("button",{className:"mp-border-accent",type:"button",onClick:m,children:e.confirm})]})})})};export{w as GoogleConfirm};

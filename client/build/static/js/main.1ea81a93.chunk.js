(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{28:function(e,t,r){},29:function(e,t,r){},41:function(e,t,r){},42:function(e,t,r){},43:function(e,t,r){},44:function(e,t,r){},46:function(e,t,r){"use strict";r.r(t);var n=r(2),a=r.n(n),c=r(4),s=r(1),i=r.n(s),o=r(20),l=r.n(o),u=r(7),d=r(9),p=r(3),b=r(10),j=r(5),f=r(6),m=r(17),h=r.n(m),O="https://m4ps.herokuapp.com/"||"http://localhost:1414/",v=O+"api/";function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GET",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auth",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"refresh",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o={method:e,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":O},mode:"cors"};s&&(o.credentials="include"),n&&(o.body=JSON.stringify(Object(p.a)({},n)));var l=v+t+"/"+r+(i&&"?"+i);return Object(c.a)(a.a.mark((function e(){var t,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(l,o);case 3:return t=e.sent,e.next=6,t.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))}function x(){return y.apply(this,arguments)}function y(){return(y=Object(c.a)(a.a.mark((function e(){var t,r,n,c,s,i=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:0,r=i.length>1&&void 0!==i[1]?i[1]:99999999,n=i.length>2&&void 0!==i[2]?i[2]:0,c=i.length>3&&void 0!==i[3]?i[3]:99999999,s=g("GET","maps","places",null,!1,"minx=".concat(t,"&miny=").concat(n,"&maxx=").concat(r,"&maxy=").concat(c)),e.next=7,s();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return k.apply(this,arguments)}function k(){return(k=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("GET","maps","userPlaces",null,!1,"id=".concat(t)),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return S.apply(this,arguments)}function S(){return(S=Object(c.a)(a.a.mark((function e(t){var r,n,c,s,i,o=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:0,n=o.length>2&&void 0!==o[2]?o[2]:99999999,c=o.length>3&&void 0!==o[3]?o[3]:0,s=o.length>4&&void 0!==o[4]?o[4]:99999999,i=g("GET","maps","taggedPlaces",null,!1,"tag=".concat(t,"&minx=").concat(r,"&miny=").concat(c,"&maxx=").concat(n,"&maxy=").concat(s)),e.next=7,i();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t){return C.apply(this,arguments)}function C(){return(C=Object(c.a)(a.a.mark((function e(t,r){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g("POST","maps","taggedByTiles",{tag:t,data:r},!1),e.next=3,n();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){return I.apply(this,arguments)}function I(){return(I=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("POST","maps","placesByTiles",Object(p.a)({},t),!1),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t){return P.apply(this,arguments)}function P(){return(P=Object(c.a)(a.a.mark((function e(t,r){var n,c,s,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Set(["street_address","natural_feature","airport","park","point_of_interest","establishment","food","store"]),t=Number(t),r=Number(r),e.next=5,window.geocoderRef.geocode({location:{lat:t,lng:r}});case 5:if(c=e.sent,s="",!c.results){e.next=20;break}i=0;case 9:if(!(i<c.results.length)){e.next=20;break}if("premise"!==(o=c.results[i]).types[0]){e.next=14;break}return s=o.formatted_address.split(", ")[0]+", "+o.formatted_address.split(", ")[1],e.abrupt("break",20);case 14:if(!o.types.find((function(e){return n.has(e)}))){e.next=17;break}return s=o.address_components[1].long_name+", "+o.address_components[0].long_name,e.abrupt("break",20);case 17:i++,e.next=9;break;case 20:return e.abrupt("return",s);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var R=["standart","dark","b&w","blueprint"],T={login:null,name:null,avatar:null,token:null,occupiedLogin:null,id:null},z={ru:"ru",en:"en"},B=["@","!","$","\u2116","#","%","^","*","(",")",".",",","`","|",NaN,"[","]","{","}"," "],F=["#cd0c0c","#e14612","#e1922c","#e8c337","#94c52f","#0aa112"],q={standart:F,blueprint:["#422424","#723e36","#866b3c","#afb766","#6bc41c","#149f04"],dark:["#850000","#9c330d","#b8740f","#b3a700","#88c70a","#00e00b"],"b&w":["#422424","#723e36","#866b3c","#afb766","#96ce7e","#5fb961"]},A=["primary","secondary","accent","light","dark","counter"],_={standart:{primary:"#5e7ba1",secondary:"#99a6b8",accent:"#c78605",light:"#f2f2f2",dark:"#575757",counter:"#2f396f"},dark:{primary:"#dd55ab",secondary:"#7b4780",accent:"#dab11b",light:"#262626",dark:"#d8d8d8",counter:"#35d5e3"},"b&w":{primary:"#8c8c8c",secondary:"#999999",accent:"#000000",light:"#ffffff",dark:"#575757",counter:"#454545"},blueprint:{primary:"#e49bd3",secondary:"#c9abca",accent:"#e9eb7d",light:"#34568b",dark:"#ffffff",counter:"#9affd5"}};function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R[0],t=document.querySelector(":root").style;Object.entries(_[e]).forEach((function(e){var r=Object(j.a)(e,2),n=r[0],a=r[1];return t.setProperty("--"+n,a)}))}function K(){var e="",t=".mp";A.forEach((function(r){e+="\n    ".concat(t,"-").concat(r,"{color: var(--").concat(r,")}\n    ").concat(t,"-").concat(r,"-hover:hover{color: var(--").concat(r,")}\n\n    ").concat(t,"-bg-").concat(r,"{background-color: var(--").concat(r,")}\n    ").concat(t,"-bg-").concat(r,"-hover:hover{background-color: var(--").concat(r,")}\n\n    ").concat(t,"-border-").concat(r,"{border-color: var(--").concat(r,")}\n    ").concat(t,"-shadow-").concat(r,"{ box-shadow: var(--").concat(r,") 2px 2px 4px }\n    ")})),document.head.insertAdjacentHTML("beforeend","<style>".concat(e,"</style>"))}function W(e,t,r){e.on("load",(function(n){var a=q[r];e.addSource("ratedFeaturesSource",{type:"geojson",data:{type:"FeatureCollection",features:t}}),e.addSource("selectedFeatureSrc",{type:"geojson",data:{type:"FeatureCollection",features:[]}});var c=e.getStyle().layers.find((function(e){return"symbol"===e.type})).id;e.addLayer({id:"ratedFeatures",source:"ratedFeaturesSource",minzoom:11,type:"fill",paint:{"fill-opacity":["interpolate",["linear"],["get","amount"],0,0,1,.4,2,.5,5,.9],"fill-color":["interpolate",["linear"],["get","rating"],0,a[0],1,a[1],2,a[2],3,a[3],4,a[4],5,a[5]]}},c),e.addLayer({id:"selectedFeature",source:"selectedFeatureSrc",minzoom:13,type:"fill",paint:{"fill-opacity":.9,"fill-color":_[r].accent,"fill-outline-color":_[r].counter}},c)}))}var H=r(0),D="app/log_in",U="app/log_out",X="app/expand_comms",J="app/shrink_comms",V="app/close_legend",Q="app/show_main",Y="app/hide_main",Z="app/set_modal",$="app/close_modal",ee="app/switch_theme",te="app/set_toast",re="app/close_toast",ne="app/rerender_map",ae="app/friend_id",ce="app/set_tag",se="app/set_mode",ie="app/set_mapref",oe={isLogged:!1,reviewsShown:!0,legendShown:!0,mapHidden:!1,modal:!1,theme:R[0],toast:!1,mapKey:1e3,mode:null,friendModeId:null,tagModeTag:null,mapRef:null};var le=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e(t?{type:D}:{type:U})},ue=function(e){e({type:Q})},de=function(e){e({type:Y})},pe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{message:"",acceptLabel:"",cancelLabel:"",acceptAction:function(){},cancelAction:function(){},children:Object(H.jsx)(H.Fragment,{})};e({type:Z,modalInfo:t})},be=function(e){e({type:$})},je=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{message:"",clickAction:function(){},status:"error",title:""};e({type:te,toastInfo:t})},fe=function(e,t){e({type:ae,id:t})},me=function(e,t){e({type:ce,tag:t})},he=function(e,t){["watch","draw","drawRoute","tags","?withRoutes"].includes(t)||(t=null),e({type:se,mode:t})},Oe=function(e,t){return e({type:ie,mapRef:t})};function ve(e){return(null===e||void 0===e?void 0:e.length)?e.map((function(e){var t,r={type:"Feature",geometry:{type:"MultiPolygon"},id:e.id,properties:{rating:Number(e.rating),amount:e.amount,name:e.name,lng:e.lng,lat:e.lat},source:"composite",sourceLayer:"building"};return r.geometry.coordinates=null===e||void 0===e||null===(t=e.polygon)||void 0===t?void 0:t.map((function(e){return e.map((function(e){return e.map((function(e){return[e.x,e.y]}))}))})),r})):[]}function ge(e,t,r,n,a,c){if("OK"!==e.status)return je(t,{title:r.networkError,message:"object"===typeof e.msg?JSON.stringify(e.msg):e.msg||JSON.stringify(e.smg)});var s=ve(e.data);n(s);var i=new Map(Object(b.a)(a));return e.data.forEach((function(e){var t={type:"Feature",geometry:{type:"MultiPolygon"},id:e.id,properties:{rating:Number(e.rating),amount:e.amount,name:e.name,lng:e.lng,lat:e.lat},source:"composite",sourceLayer:"building"},r="x"+e.x+"y"+e.y;if(i.has(r))i.get(r).set(e.id,t);else{var n=new Map;n.set(e.id,t),i.set(r,n)}})),c(i),s}function xe(e,t,r,n){function s(t){return function(e){if(!e[1])return e[0];var t=window.turf.union(e[0],e[1]);if(e[2])for(var r=2;r<e.length;r++)t=window.turf.union(t,e[r]);return t.geometry}(function(t){var r=e.querySourceFeatures("composite",{filter:["any",["==",["id"],t.id]],sourceLayer:t.sourceLayer});return r.splice(r.length/2),r.map((function(e){return e.geometry}))}(t)||[])}e.on("click",function(){var i=Object(c.a)(a.a.mark((function c(i){var o,l,u,d,b,f,m,h,O,v,g,x,y,w;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=function(t){var r=i.lngLat,n=r.lng,a=r.lat;e.flyTo({center:[n,a],zoom:t})},l=e.queryRenderedFeatures(i.point),u=new Set(["building","landuse"]),!(d=l.find((function(e){return"ratedFeaturesSource"===e.source})))){a.next=10;break}return console.log("found rated feature",d),null===n||void 0===n||n.trash(),Lt(e,d),t(d),a.abrupt("return");case 10:if(!(null===(b=l.find((function(e){return u.has(e.sourceLayer)})))||void 0===b?void 0:b.id)){a.next=24;break}return console.log("found feature",b),null===n||void 0===n||n.trash(),f=e.getZoom(),m=Lt(e,b,f<16?16:f),h=Object(j.a)(m,2),O=h[0],v=h[1],g=s(b),a.next=19,M(v,O);case 19:return b.properties.name=a.sent,t(Object(p.a)(Object(p.a)({},b),{},{geometry:g})),a.abrupt("return");case 24:if(!b){a.next=32;break}return console.log("interesting, but no id",b),null===n||void 0===n||n.trash(),o(e.getZoom()+1),t(null),a.abrupt("return");case 32:if("mapbox-gl-draw-hot"!==(null===l||void 0===l||null===(x=l[0])||void 0===x?void 0:x.source)){a.next=34;break}return a.abrupt("return");case 34:return console.log("no interesting features",l),y=new Set(["natural_label","place_label","poi_label","housenum_label","airport_label"]),l.find((function(e){return y.has(e.sourceLayer)}))&&(w=e.getZoom()+1)<16&&o(w),r(),a.abrupt("return");case 40:case"end":return a.stop()}}),c)})));return function(e){return i.apply(this,arguments)}}())}function ye(){return we.apply(this,arguments)}function we(){return(we=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g("GET","friends","all",null,!0),e.next=3,t();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g("GET","friends","requests",null,!0),e.next=3,t();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Se(e){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("GET","friends","search",null,!0,"input="+t),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(e){return Le.apply(this,arguments)}function Le(){return(Le=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("GET","friends","details",null,!0,"id="+t),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e){return Me.apply(this,arguments)}function Me(){return(Me=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("GET","friends","add",null,!0,"id="+t),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(e){return Re.apply(this,arguments)}function Re(){return(Re=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("GET","friends","remove",null,!0,"id="+t),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(e){return ze.apply(this,arguments)}function ze(){return(ze=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("GET","friends","accept",null,!0,"id="+t),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Be(e){return Fe.apply(this,arguments)}function Fe(){return(Fe=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("GET","friends","addByLink",null,!0,"id="+t),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qe="user/set_credentials",Ae="user/set_level",_e="user/set_friends",Ge="user/set_requests",Ke="user/comments_number",We={name:"anonimus",login:"",level:0,id:"anonimus",commentsn:0,avatar:null,friends:[],requests:[]},He=Object(p.a)({},We);var De,Ue=function(e,t){e({type:qe,credentials:Object(p.a)({},t)})},Xe=function(e,t){Ue(e,t),le(e,!0)},Je=function(e){fe(e,null),he(e,"default"),Ue(e,We),le(e,!1)},Ve=function(e,t){e({type:Ae,newLevel:Number(t)})},Qe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e({type:_e,friendsArr:t})},Ye=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e({type:Ge,requestsArr:t})},Ze=function(e,t){return e({type:Ke,number:t})},$e=window.APPTEXT;function et(){var e=window.localStorage.getItem("lastLocation");if(!e)return{};var t=e=JSON.parse(e);return{lng:t.lng,lat:t.lat}}function tt(e,t,r){return{x:Math.floor((e+180)/360*Math.pow(2,r)),y:Math.floor((1-Math.log(Math.tan(t*Math.PI/180)+1/Math.cos(t*Math.PI/180))/Math.PI)/2*Math.pow(2,r))}}function rt(e){return nt.apply(this,arguments)}function nt(){return(nt=Object(c.a)(a.a.mark((function e(t){var r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye();case 2:if("OK"===(r=e.sent).status||"REAUTH"===r.status){e.next=5;break}return e.abrupt("return",je(t,{message:$e.requestError+" #gFII1"}));case 5:return Qe(t,r.data),e.next=8,ke();case 8:if(n=e.sent,"OK"===r.status||"REAUTH"===r.status){e.next=11;break}return e.abrupt("return",je(t,{message:$e.requestError+" #gFII2"}));case 11:Ye(t,n.data);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function at(e){return e||"number"!==typeof e||0===e?e:0}function ct(e,t,r,n,s,i){var o=new window.MapboxDraw({displayControlsDefault:!1,controls:{}});function l(e){return u.apply(this,arguments)}function u(){return(u=Object(c.a)(a.a.mark((function n(c){var i,l,u,d,b,f;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s(!1),r.style.display="none",!((i=o.getAll()).features.length>0)){n.next=16;break}return(l=Object(p.a)({},i.features[0])).properties.amount=0,l.properties.created=!0,l.source="createdPoly",u=Object(j.a)(window.turf.centroid(l.geometry).geometry.coordinates,2),d=u[0],b=u[1],f=e.getZoom(),l._vectorTileFeature={_x:Math.floor((d+180)/360*Math.pow(2,f)),_y:Math.floor((1-Math.log(Math.tan(b*Math.PI/180)+1/Math.cos(b*Math.PI/180))/Math.PI)/2*Math.pow(2,f))},n.next=13,M(b,d);case 13:l.properties.name=n.sent,console.log("%c\u29ed","color: #917399",l.properties.name),t(l);case 16:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return r.onclick=function(){o.changeMode("draw_polygon"),n.style.display="block",s(!0)},n.onclick=function(){o.deleteAll(),i(),s(!1),r.style.display="block",n.style.display="none"},e.addControl(o),r.style.display="block",n.style.display="none",e.on("draw.create",l),e.on("draw.update",l),o}function st(e,t,r,n,a,c){e.on("move",(function(){e.dragRotate.isActive()&&c(!0)})),e.on("moveend",(function(c){var s,i=e.getCenter(),o=tt(i.lng,i.lat,16),l=o.x,u=o.y;if(t((function(e){return s=e,{x:l,y:u}})),s&&(s.x!==l||s.y!==u)){var d,p=new Set([]);a((function(e){d=e;for(var t=r;t>-r-1;t--)for(var n=-r;n<r+1;n++){var a="x"+(l+n)+"y"+(u+t);d.has(a)||p.add(a)}return p.size>10&&Array.from(d.keys()).forEach((function(e){if(p.has(e))return console.log("%c\u29ed it had tilekey","color: #e50000",e);d.delete(e)})),e})),n(p)}}))}var it=["title","titleId"];function ot(){return(ot=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function lt(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ut(e,t){var r=e.title,n=e.titleId,a=lt(e,it);return s.createElement("svg",ot({fill:"current",enableBackground:"new 0 0 512 512",height:"512px",id:"Layer_1",viewBox:"0 0 512 512",width:"512px",xmlSpace:"preserve",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,De||(De=s.createElement("path",{d:"M493.278,154.515l-22.625,22.641L334.871,41.39l22.625-22.641c25-25,65.531-25,90.531,0l45.25,45.266  C518.246,89,518.246,129.515,493.278,154.515z M176.465,426.031c-6.25,6.25-6.25,16.375,0,22.625c6.25,6.281,16.375,6.281,22.625,0  l248.938-248.875l-22.656-22.641L176.465,426.031z M63.309,312.906c-6.25,6.25-6.25,16.375,0,22.625s16.375,6.25,22.625,0  L334.871,86.64l-22.625-22.625L63.309,312.906z M357.465,109.25L108.559,358.156c-12.5,12.469-12.469,32.75,0,45.25  c12.5,12.5,32.75,12.563,45.281-0.031l248.906-248.859L357.465,109.25z M153.778,471.219c-7.656-7.656-11.344-17.375-12.719-27.375  c-3.25,0.5-6.531,0.969-9.875,0.969c-17.094,0-33.156-6.688-45.25-18.781c-12.094-12.125-18.75-28.156-18.75-45.25  c0-3.125,0.469-6.156,0.906-9.188c-10.344-1.406-19.906-5.938-27.406-13.438c-0.719-0.719-0.969-1.688-1.625-2.469L-0.004,512  l155.906-39.031C155.215,472.344,154.434,471.875,153.778,471.219z"})))}var dt,pt=s.forwardRef(ut),bt=(r.p,["title","titleId"]);function jt(){return(jt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ft(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function mt(e,t){var r=e.title,n=e.titleId,a=ft(e,bt);return s.createElement("svg",jt({fill:"current",xmlns:"http://www.w3.org/2000/svg",width:"980.000000pt",height:"952.000000pt",viewBox:"0 0 980.000000 952.000000",preserveAspectRatio:"xMidYMid meet",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,dt||(dt=s.createElement("g",{transform:"translate(0.000000,952.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none"},s.createElement("path",{d:"M3665 9513 c-274 -38 -540 -237 -651 -489 -64 -145 -67 -168 -72 -551 l-4 -353 -1347 0 c-1535 0 -1416 7 -1507 -84 -79 -80 -102 -173 -68 -286 22 -74 100 -152 174 -174 49 -15 492 -16 4711 -16 4301 0 4661 1 4708 17 66 21 125 72 159 137 22 42 27 63 26 126 0 113 -50 197 -148 248 l-51 27 -1367 3 -1368 2 0 309 c0 232 -4 330 -15 396 -30 169 -106 314 -230 440 -129 132 -291 217 -465 244 -62 10 -2414 14 -2485 4z m2483 -588 c59 -32 91 -66 125 -129 21 -39 22 -53 25 -358 l3 -318 -1401 0 -1401 0 3 318 3 317 27 51 c36 69 100 121 178 145 14 4 556 7 1205 6 l1180 -2 53 -30z"}),s.createElement("path",{d:"M1726 7264 c-34 -11 -64 -31 -102 -68 -93 -94 -84 236 -84 -3160 0 -3275 -3 -3089 56 -3265 29 -86 91 -214 136 -279 138 -201 353 -361 584 -437 174 -57 69 -55 2584 -55 1482 0 2340 4 2385 10 292 42 549 187 729 412 76 94 153 237 191 354 58 176 55 8 55 3265 0 3390 9 3062 -84 3155 -114 113 -278 113 -392 0 -93 -93 -84 233 -84 -3141 0 -2072 -3 -2999 -11 -3041 -35 -194 -186 -361 -389 -430 -53 -18 -135 -19 -2405 -19 l-2350 0 -59 22 c-150 57 -263 157 -326 286 -21 45 -43 109 -49 141 -8 42 -11 969 -11 3041 0 3374 9 3048 -84 3141 -80 79 -178 102 -290 68z"}),s.createElement("path",{d:"M3406 6144 c-34 -11 -64 -31 -102 -68 -92 -93 -84 110 -84 -2156 0 -2265 -8 -2063 84 -2156 113 -112 278 -112 391 1 93 92 85 -114 85 2154 0 2266 8 2064 -84 2157 -80 79 -178 102 -290 68z"}),s.createElement("path",{d:"M4806 6144 c-34 -11 -64 -31 -102 -68 -92 -93 -84 110 -84 -2156 0 -2265 -8 -2063 84 -2156 113 -112 278 -112 391 1 93 92 85 -114 85 2154 0 2266 8 2064 -84 2157 -80 79 -178 102 -290 68z"}),s.createElement("path",{d:"M6206 6144 c-34 -11 -64 -31 -102 -68 -92 -93 -84 110 -84 -2156 0 -2265 -8 -2063 84 -2156 113 -112 278 -112 391 1 93 92 85 -114 85 2154 0 2266 8 2064 -84 2157 -80 79 -178 102 -290 68z"}))))}var ht,Ot=s.forwardRef(mt),vt=(r.p,["title","titleId"]);function gt(){return(gt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function xt(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function yt(e,t){var r=e.title,n=e.titleId,a=xt(e,vt);return s.createElement("svg",gt({fill:"current",baseProfile:"tiny",xmlns:"http://www.w3.org/2000/svg",width:50,height:50,viewBox:"0 0 50 50",overflow:"inherit",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,ht||(ht=s.createElement("path",{d:"M25 49c-13.234 0-24-10.767-24-24 0-13.234 10.766-24 24-24 13.233 0 24 10.766 24 24 0 13.233-10.767 24-24 24zm0-44c-11.028 0-20 8.972-20 20s8.972 20 20 20 20-8.972 20-20-8.972-20-20-20zm.045 3.25s-7.045 12.071-7.045 15.75v2c0 3.678 7.066 16 7.066 16s6.934-12.066 6.934-15.744v-2.262c0-3.679-6.955-15.744-6.955-15.744zm-.045 20.75c-2.209 0-4-1.791-4-4s1.791-4 4-4 4 1.791 4 4-1.791 4-4 4z"})))}var wt=s.forwardRef(yt);r.p;h.a.accessToken="pk.eyJ1IjoiaWx5YWl6ciIsImEiOiJja29nNG5rNTkwbGdxMm5sYTFqbXpqbnlpIn0.S4LdF8fBwDtEQ6-dQBrWVw";var kt=34.354,Nt=53.235,St={standart:"mapbox://styles/ilyaizr/ckq2l808k0ifn17o0x0yl9qi4",dark:"mapbox://styles/ilyaizr/cktd77j8u12ch18swzrqikqor","b&w":"mapbox://styles/ilyaizr/ckpk75aca0hbg17ouqvzsda51",blueprint:"mapbox://styles/ilyaizr/cksp4jldx0b1z17mog8wzg0jm"},Et=function(e){var t=e.feature,r=e.setFeature,n=e.resetRater,i=e.geoData,o=e.setGeoData,l=e.featureTrigger,u=Object(f.c)((function(e){return e.app})),p=Object(d.g)(),m=Object(f.b)(),O=Object(s.useRef)(null),v=Object(s.useRef)(null),g=Object(s.useRef)(null),y=Object(s.useRef)(null),k=Object(s.useState)(!1),S=Object(j.a)(k,2),C=S[0],I=S[1],M=Object(s.useState)(!1),P=Object(j.a)(M,2),R=P[0],T=P[1],z=Object(s.useState)({x:null,y:null}),B=Object(j.a)(z,2)[1],F=Object(s.useState)(new Map),q=Object(j.a)(F,2),A=q[0],_=q[1],G=Object(s.useState)(new Set),K=Object(j.a)(G,2),D=K[0],U=K[1];function X(){return J.apply(this,arguments)}function J(){return(J=Object(c.a)(a.a.mark((function e(){var t,r,n,c,s,i,l,d,p,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=et(),n=r.lng,c=r.lat,s=tt(n||kt,c||Nt,16),i=s.x,l=s.y,B({x:i,y:l}),"watch"!==u.mode){e.next=12;break}return e.next=6,w(u.friendModeId);case 6:if("OK"===(d=e.sent).status){e.next=9;break}return e.abrupt("return",je(m,{title:$e.networkError,message:d.msg+"#mp1"||!1}));case 9:t=ve(d.data),e.next=25;break;case 12:if("tags"!==u.mode){e.next=21;break}return e.next=15,N(u.tagModeTag,i-5,i+5,l-5,l+5);case 15:if("OK"===(p=e.sent).status){e.next=18;break}return e.abrupt("return",je(m,{title:$e.networkError,message:p.msg+"#mp2"||!1}));case 18:t=ve(p.data),e.next=25;break;case 21:return e.next=23,x(i-5,i+5,l-5,l+5);case 23:return b=e.sent,e.abrupt("return",ge(b,m,$e,o,A,_));case 25:return o(t),e.abrupt("return",t);case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("watch"!==u.mode){e.next=2;break}return e.abrupt("return");case 2:if("tags"!==u.mode||!D.size){e.next=7;break}return e.next=5,E(u.tagModeTag,Object(b.a)(D));case 5:return t=e.sent,e.abrupt("return",ge(t,m,$e,o,A,_));case 7:if(!D.size){e.next=12;break}return e.next=10,L(Object(b.a)(D));case 10:ge(e.sent,m,$e,o,A,_);case 12:case"end":return e.stop()}}),e)})))()}),[D]),Object(s.useEffect)((function(){r(null),Object(c.a)(a.a.mark((function e(){var t,c,s,i,o,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:s=e.sent,i=et(),o=i.lng,l=i.lat,v.current=new h.a.Map({container:O.current,style:St[u.theme],center:[o||34.354,l||53.235],zoom:16}),Oe(m,v.current),"draw"!==u.mode&&v.current.addControl(new window.MapboxGeocoder({accessToken:"pk.eyJ1IjoiaWx5YWl6ciIsImEiOiJja29nNG5rNTkwbGdxMm5sYTFqbXpqbnlpIn0.S4LdF8fBwDtEQ6-dQBrWVw",mapboxgl:h.a,placeholder:$e.searchPHolder})),"draw"===u.mode&&(d=ct(v.current,r,g.current,y.current,I,n)),W(v.current,s,u.theme),xe(v.current,r,n,d||null),st(v.current,B,5,U,_,T),(null===(t=window.google)||void 0===t||null===(c=t.maps)||void 0===c?void 0:c.Geocoder)&&(window.geocoderRef=new window.google.maps.Geocoder);case 12:case"end":return e.stop()}}),e)})))();var e=setInterval((function(){var e,t,r=null===(e=v.current)||void 0===e||null===(t=e.getCenter)||void 0===t?void 0:t.call(e);r&&function(e){var t=e.lng,r=e.lat;window.localStorage.setItem("lastLocation",JSON.stringify({lng:t,lat:r}))}(r)}),1e4);return function(){return clearInterval(e)}}),[u.theme,u.mapKey]),Object(s.useEffect)((function(){v.current&&Ct(v.current,i,"ratedFeaturesSource")}),[l,i]),Object(s.useEffect)((function(){v.current&&Ct(v.current,[t||{}],"selectedFeatureSrc")}),[t]),Object(s.useEffect)((function(){"/"!==p.pathname?de(m):(ue(m),setTimeout((function(){var e;null===(e=v.current)||void 0===e||e.resize()}),0))}),[p.pathname]),Object(s.useEffect)((function(){v.current&&Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:case"end":return e.stop()}}),e)})))()}),[u.mode,u.friendModeId,u.tagModeTag]),Object(H.jsxs)("div",{children:[Object(H.jsx)("div",{ref:O,className:u.mapHidden?"map-container hidden":"map-container"}),"draw"===u.mode&&Object(H.jsx)("button",{id:"createBtn",ref:g,className:"mp-bg-light mp-border-accent controlButton",children:Object(H.jsx)(pt,{fill:"var(--accent)",className:"nav-icon"})}),"draw"===u.mode&&Object(H.jsx)("button",{id:"deleteBtn",ref:y,className:"mp-bg-light mp-border-accent controlButton",children:Object(H.jsx)(Ot,{fill:"var(--accent)",className:"nav-icon"})}),R&&"draw"!==u.mode&&Object(H.jsx)(wt,{onClick:function(){v.current.rotateTo(180,{duration:2e3,animate:!0}),T(!1)},fill:"var(--secondary)",className:"compass-icon mp-bg-light mp-border-secondary cursor-pointer"}),C&&"draw"===u.mode&&Object(H.jsxs)("div",{className:"controlPrompt mp-border-secondary mp-bg-light",children:[Object(H.jsx)("h6",{children:$e.drawMode}),Object(H.jsx)("p",{children:$e.drawPrompt})]})]})};function Ct(e,t,r){var n;null===(n=e.getSource(r))||void 0===n||n.setData({type:"FeatureCollection",features:t})}function Lt(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=Object(j.a)(window.turf.centroid(t.geometry).geometry.coordinates,2),c=a[0],s=a[1];return e.flyTo({center:[c-.0015,s+5e-4],zoom:r,speed:n}),[c,s]}function It(e){return Mt.apply(this,arguments)}function Mt(){return(Mt=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("GET","tags","search",null,!1,"input="+t),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pt(e){return Rt.apply(this,arguments)}function Rt(){return(Rt=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("GET","tags","getTag",null,!1,"tag="+t),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tt(){return zt.apply(this,arguments)}function zt(){return(zt=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g("GET","tags","featuredTags",null,!1),e.next=3,t();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bt(e){return Ft.apply(this,arguments)}function Ft(){return(Ft=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("GET","tags","tagSuggestions",null,!1,"input="+t),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qt(e){return At.apply(this,arguments)}function At(){return(At=Object(c.a)(a.a.mark((function e(t){var r,n,c,s,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.user,n=t.comment,c=t.placeId,s=n.split(" ").filter((function(e){return null===e||void 0===e?void 0:e.startsWith("#")})),i=[],s.forEach((function(e){for(var t="",r=1;r<e.length;r++){var n=e[r];if(B.includes(n))break;t+=n}t&&i.push(t)})),i.length){e.next=6;break}return e.abrupt("return",{status:"OK"});case 6:return i=i.filter((function(e,t,r){return r.indexOf(e)===t})),o=g("POST","tags","postTags",{user:r,placeId:c,tags:i},!1),e.next=10,o();case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _t=function(e){var t=e.comment,r=e.setComment,n=Object(f.b)(),i=Object(s.useRef)(null),o=Object(s.useState)(null),l=Object(j.a)(o,2),u=l[0],d=l[1],p=Object(s.useState)([]),b=Object(j.a)(p,2),m=b[0],h=b[1];function O(e){var n=e.target.attributes.value.value,a=t.split("#");a[a.length-1]=n,r(a.join("#")),d(null),i.current.focus()}return Object(s.useEffect)((function(){Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"===typeof u){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Bt(u);case 4:if("OK"===(t=e.sent).status){e.next=7;break}return e.abrupt("return",je(n,{message:$e.requestError+" #com1"}));case 7:h(t.data);case 8:case"end":return e.stop()}}),e)})))()}),[u]),Object(H.jsxs)("div",{children:["string"===typeof u&&Object(H.jsx)("div",{className:"suggContainer mp-border-dark",children:m.map((function(e){return Object(H.jsxs)("span",{className:"sugg mp-accent mp-dark-hover mp-border-secondary cursor-pointer",value:e.tag,onClick:O,children:[Object(H.jsx)("span",{className:"mp-secondary",children:"#"}),e.tag]},e.tag)}))}),Object(H.jsx)("textarea",{name:"comment",cols:"25",rows:"2",value:t,onInput:function(e){r(e.target.value);var t=e.nativeEvent.data;"#"===t?d(""):!t||B.includes(t)?d(null):"string"===typeof u&&d(u+t)},className:"raterComment mp-border-dark",placeholder:$e.commentPlacehol,ref:i})]})},Gt=function(e){var t=e.feature,r=e.onSubmit,n=Object(f.c)((function(e){return e.app})),a=n.theme,c=n.isLogged,i=q[a],o=Object(f.b)();function l(){var e;if(!(null===t||void 0===t||null===(e=t.properties)||void 0===e?void 0:e.rating))return q[a][0];for(var r=0;r<q[a].length;r++)if(t.properties.rating-1<r)return q[a][r]}var u=Object(s.useState)(0),d=Object(j.a)(u,2),p=d[0],m=d[1],h=Object(s.useState)(0),O=Object(j.a)(h,2),v=O[0],g=O[1],x=Object(s.useState)(""),y=Object(j.a)(x,2),w=y[0],k=y[1];function N(){g(p)}function S(){m(0),r(v,w)}function E(e){m(Number(e.target.name))}function C(){m(v)}function L(){return String(Number(t.properties.rating).toPrecision(3)).split(".")}return Object(s.useEffect)((function(){m(0),g(0),k("")}),[t]),Object(H.jsxs)("div",{className:"rater",children:[Object(H.jsxs)("div",{className:"starsAndRating ".concat(void 0===t.properties.rating&&"noRating"),children:[Object(H.jsxs)("div",{className:"stars",children:[Object(H.jsxs)("h5",{className:"starRating",children:[$e.yourRating," :"]})," ",Object(H.jsx)("span",{className:"hoverValue mp-dark",children:at(p)}),Object(H.jsx)("br",{}),Object(b.a)(Array(5)).map((function(e,t){return t+=1,Object(H.jsx)("button",{type:"button",name:t,className:"starButton",onClick:N,onMouseEnter:E,onMouseLeave:C,style:t<=(p||v)?{color:i[p]}:{color:i[0]},children:Object(H.jsx)("span",{className:"star",children:"\u2605"})},t)}))]}),void 0!==t.properties.rating&&Object(H.jsx)("div",{className:"rating",children:Object(H.jsxs)("div",{className:"ratingAmount mp-border-primary relative",style:{borderColor:l()},title:$e.rating,children:[at(L()[0]),".",Object(H.jsx)("span",{children:at(L()[1])}),Object(H.jsxs)("sub",{className:"mp-dark mp-bg-light",style:{color:l()},title:$e.marks,children:[" ( ",t.properties.amount," ) "]})]})})]}),Object(H.jsx)(_t,{comment:w,setComment:k}),Object(H.jsxs)("div",{className:"raterBtnContainer",children:[Object(H.jsx)("button",{type:"button",onClick:function(){if(0===Number(v))return pe(o,{message:$e.rateZeroModal,acceptAction:S,acceptLabel:$e.yes,cancelLabel:$e.goBack});S()},children:$e.send}),!c&&Object(H.jsx)("div",{className:"subtitle",children:$e.asAnonius})]})]})},Kt=function(e){var t=e.feature,r=e.name,n=e.setName;if(Object(s.useEffect)((function(){var e;(null===t||void 0===t?void 0:t.name)?n(t.name):(null===t||void 0===t||null===(e=t.properties)||void 0===e?void 0:e.name)&&n(t.properties.name),console.log("%c\u29ed","color: #d0bfff",t)}),[t,n]),!(null===t||void 0===t?void 0:t.source))return console.log("wtf feature",t),null;if("ratedFeaturesSource"===t.source)return Object(H.jsx)("div",{className:"featurer",children:t.properties.name?Object(H.jsx)("div",{className:"featureNameWrap",children:Object(H.jsx)("p",{className:"featureName mp-bg-light mp-border-primary mp-dark",children:t.properties.name})}):Object(H.jsx)(H.Fragment,{})});return"createdPoly"===t.source?Object(H.jsxs)("div",{className:"featurer",children:[Object(H.jsx)("p",{className:"featurerGreetings",children:$e.newFeature}),t.properties.name?Object(H.jsx)("div",{className:"featureNameWrap",children:Object(H.jsx)("p",{className:"featureName mp-bg-light mp-border-primary mp-dark",children:t.properties.name})}):Object(H.jsx)("div",{className:"featureNameWrap",children:Object(H.jsx)("input",{type:"text",value:r,onInput:function(e){n(e.target.value),t.properties.name=e.target.value},placeholder:$e.newFeaturePHolder,title:$e.newFeaturePHolder,className:"featureName mp-bg-light mp-border-primary mp-dark"})})]}):Object(H.jsxs)("div",{className:"featurer",children:[Object(H.jsx)("p",{className:"featurerGreetings",children:$e.firstTimeRate}),t.properties.name?Object(H.jsx)("div",{className:"featureNameWrap",children:Object(H.jsx)("p",{className:"featureName mp-bg-light mp-border-primary mp-dark",children:t.properties.name})}):Object(H.jsx)(H.Fragment,{})]})};function Wt(e){var t;t="Polygon"===e.type?[e.coordinates]:e.coordinates;var r=-90,n=-180,a=90,c=180,s=[];t.forEach((function(e){s.push(function(e){var t=[];return e.forEach((function(e,s){t.push("("),e.forEach((function(e,i){var o=Object(j.a)(e,2),l=o[0],u=o[1];l<c&&(c=l),l>n&&(n=l),u>r&&(r=u),u<a&&(a=u),t[s]+=(i?", ":"")+String(l)+" "+String(u)})),t[s]+=")"})),"("+t.join(",")+")"}(e))}));var i="MULTIPOLYGON("+s.join(", ")+")";return[[n,r],[c,a],i]}r(28);var Ht,Dt=["title","titleId"];function Ut(){return(Ut=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Xt(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Jt(e,t){var r=e.title,n=e.titleId,a=Xt(e,Dt);return s.createElement("svg",Ut({fill:"#current",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 50 50",enableBackground:"new 0 0 50 50",xmlSpace:"preserve",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,Ht||(Ht=s.createElement("path",{d:"M9.016,40.837c0.195,0.195,0.451,0.292,0.707,0.292c0.256,0,0.512-0.098,0.708-0.293l14.292-14.309 l14.292,14.309c0.195,0.196,0.451,0.293,0.708,0.293c0.256,0,0.512-0.098,0.707-0.292c0.391-0.39,0.391-1.023,0.001-1.414 L26.153,25.129L40.43,10.836c0.39-0.391,0.39-1.024-0.001-1.414c-0.392-0.391-1.024-0.391-1.414,0.001L24.722,23.732L10.43,9.423 c-0.391-0.391-1.024-0.391-1.414-0.001c-0.391,0.39-0.391,1.023-0.001,1.414l14.276,14.293L9.015,39.423 C8.625,39.813,8.625,40.447,9.016,40.837z"})))}var Vt,Qt,Yt=s.forwardRef(Jt),Zt=(r.p,function(){var e=Object(f.c)((function(e){return e.app.theme})),t=q[e],r=Object(f.b)();return Object(H.jsxs)("div",{className:"mapLegend mp-bg-light mp-border-secondary mp-shadow-light",children:[Object(H.jsxs)("div",{className:"ratingLegend",children:[Object(H.jsxs)("div",{className:"ratingDescription",children:[Object(H.jsx)("span",{children:$e.worstRating}),Object(H.jsx)("span",{children:$e.bestRating})]}),Object(H.jsx)("div",{className:"ratingUnitsWrap",children:t.map((function(e,t){return Object(H.jsx)("div",{className:"ratingUnit",children:Object(H.jsx)("span",{className:"ratingColor",style:{backgroundColor:e}})},e+t)}))}),Object(H.jsx)("div",{className:"ratingGradientWrap",children:Object(H.jsx)("div",{className:"ratingGradient",style:{background:"linear-gradient(90deg, ".concat(t[0],", ").concat(t[3],", ").concat(t[5],")")}})})]}),Object(H.jsx)("div",{className:"close-legend-wrap mp-border-secondary mp-bg-light",onClick:function(){r({type:V})},children:Object(H.jsx)(Yt,{fill:"var(--dark)",className:"close-legend"})})]})});function $t(e){return er.apply(this,arguments)}function er(){return(er=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("GET","reviews","reviews",null,!1,"targetId=".concat(t)),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tr(e){return rr.apply(this,arguments)}function rr(){return(rr=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("POST","reviews","postReview",Object(p.a)({},t),!1),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nr(e){return ar.apply(this,arguments)}function ar(){return(ar=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("POST","reviews","postFeedback",{comment:t},!1),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cr(e,t){return sr.apply(this,arguments)}function sr(){return(sr=Object(c.a)(a.a.mark((function e(t,r){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g("DELETE","reviews","reviews",{timestamp:t,place:r},!0),e.next=3,n();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ir=["title","titleId"];function or(){return(or=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function lr(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ur(e,t){var r=e.title,n=e.titleId,a=lr(e,ir);return s.createElement("svg",or({fill:"current","data-name":"Layer 1",id:"Layer_1",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},a),Vt||(Vt=s.createElement("defs",null)),r?s.createElement("title",{id:n},r):null,Qt||(Qt=s.createElement("polyline",{className:"Graphic-Style","data-name":"<Path>",id:"_Path_",points:"3.41 16.34 12.1 7.66 20.59 16.14"})))}var dr,pr=s.forwardRef(ur),br=(r.p,["title","titleId"]);function jr(){return(jr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function fr(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function mr(e,t){var r=e.title,n=e.titleId,a=fr(e,br);return s.createElement("svg",jr({enableBackground:"new 0 0 128 128",height:"128px",id:"Layer_1",viewBox:"0 0 128 128",width:"128px",xmlSpace:"preserve",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,dr||(dr=s.createElement("path",{d:"M81.646,64l22.248-22.249c3.48-3.48,3.474-9.131-0.019-12.623l-5.006-5.005  c-3.489-3.49-9.142-3.499-12.622-0.019L64,46.354L41.753,24.106c-3.484-3.483-9.133-3.472-12.624,0.018l-5.005,5.005  c-3.491,3.492-3.501,9.14-0.018,12.623L46.354,64L24.108,86.246c-3.483,3.484-3.472,9.133,0.018,12.623l5.005,5.006  c3.492,3.492,9.14,3.502,12.623,0.018L64,81.647l22.247,22.246c3.48,3.481,9.131,3.475,12.622-0.019l5.006-5.006  c3.489-3.489,3.498-9.142,0.019-12.622L81.646,64z",fill:"current"})))}var hr=s.forwardRef(mr),Or=(r.p,function(e){var t=e.feature,r=e.resetRater,n=e.updateLayers,i=e.setGeoData,o=Object(f.b)(),l=Object(f.c)((function(e){return e.app})).reviewsShown,d=Object(f.c)((function(e){return e.user.id})),m=Object(s.useState)([]),h=Object(j.a)(m,2),O=h[0],v=h[1];if(Object(s.useEffect)((function(){return Object(c.a)(a.a.mark((function e(){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("ratedFeaturesSource"===(null===t||void 0===t?void 0:t.source)){e.next=2;break}return e.abrupt("return",v([]));case 2:return e.next=4,$t(t.id);case 4:if("OK"===(r=e.sent).status){e.next=7;break}return e.abrupt("return",je(o,{message:$e.requestError+" #revEr2"}));case 7:v(r.data);case 8:case"end":return e.stop()}}),e)})))(),function(){v([])}}),[null===t||void 0===t?void 0:t.source,null===t||void 0===t?void 0:t.id]),"ratedFeaturesSource"!==(null===t||void 0===t?void 0:t.source))return null;function g(){l?o({type:J}):function(e){e({type:X})}(o)}function x(e){var s=e.target.attributes.timestamp.value,l={rating:t.properties.rating,amount:t.properties.amount,grade:e.target.attributes.grade.value,id:t.id};pe(o,{message:$e.removeComment+"?",acceptAction:function(){return Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cr(s,l);case 2:if("OK"===e.sent.status){e.next=5;break}return e.abrupt("return",je(o,{message:$e.requestError+" revEr1"}));case 5:i((function(e){for(var r=0;r<e.length;r++)if(e[r].id===t.id){var n=t.properties,a=n.amount,c=n.rating;e[r].properties=Object(p.a)(Object(p.a)({},e[r].properties),{},{rating:at(+((a*c-l.grade)/(a-1)).toFixed(5)),amount:a-1});break}return e})),n(),r();case 8:case"end":return e.stop()}}),e)})))()}})}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e||!e.includes("#"))return e;for(var t=[],r="",n="",a=0;a<e.length;a++){var c=e[a];n&&"#"===c?(t.push(Object(H.jsx)("span",{children:n})),n="",r="#"):n&&a===e.length-1?t.push(Object(H.jsx)("span",{children:n+c})):"#"===c?r="#":r?B.includes(c)?(t.push(Object(H.jsx)(u.b,{to:"/tags/item/"+r.substr(1)+c,children:Object(H.jsx)("span",{className:"commentTag cursor-pointer mp-counter",children:r+c})})),r="",n+=c):a===e.length-1?t.push(Object(H.jsx)(u.b,{to:"/tags/item/"+r.substr(1)+c,children:Object(H.jsx)("span",{className:"commentTag cursor-pointer mp-counter",children:r+c})})):r+=c:n+=c}return Object(H.jsx)("div",{children:t})}return Object(H.jsxs)("div",{className:"reviewsContainer ".concat(l?"expanded":"shrinked"),children:[O.length?O.map((function(e){var t,r;return e.name||(e.name=$e.anonimus),Object(H.jsxs)("div",{className:"reviewWrap mp-border-secondary mp-shadow-light",children:[Object(H.jsx)(u.b,{to:"/friends/item/"+e.author,children:Object(H.jsx)("div",{className:"authorLogo mp-bg-primary",children:Object(H.jsx)("span",{className:"mp-dark",title:e.login,children:null===(t=String(e.name))||void 0===t||null===(r=t[0])||void 0===r?void 0:r.toUpperCase()})})}),Object(H.jsxs)("div",{className:"reviewBody",children:[Object(H.jsxs)("div",{className:"authorDateWrap",children:[Object(H.jsx)("span",{className:"author mp-primary",children:e.name}),Object(H.jsxs)("span",{className:"reviewDate mp-dark",children:[new Date(e.timestamp).toLocaleDateString(),Boolean("anonimus"!==e.author&&e.author===d)&&Object(H.jsx)(hr,{fill:"var(--dark)",className:"delete-comment-icon cursor-pointer",onClick:x,timestamp:e.timestamp,grade:e.grade})]})]}),Object(H.jsxs)("div",{className:"reviewRating",children:[e.grade,"/5",Object(H.jsx)("span",{className:"reviewStars stars",children:Object(b.a)(Array(5)).map((function(t,r){return r+=1,Object(H.jsx)("span",{className:r<=e.grade?"mp-accent starButton":"mp-secondary starButton",children:"\u2605"},r+e.timestamp)}))})]}),Boolean(e.comment)&&Object(H.jsx)("div",{className:"reviewComment ",children:y(e.comment)})]})]},e.author+e.timestamp+Math.random())})):Object(H.jsx)("div",{children:$e.noreviews},"whatever"),Object(H.jsx)("div",{className:"skipperContainer",children:Object(H.jsx)("div",{className:"skipper mp-bg-light mp-border-secondary",children:l?Object(H.jsx)(pr,{fill:"var(--secondary)",className:"nav-icon",onClick:g}):Object(H.jsx)("span",{className:"mp-secondary",onClick:g,children:"\u21a7"})})})]})}),vr=function(){var e=Object(f.c)((function(e){return e.user})),t=Object(f.c)((function(e){return e.app})),r=Object(f.b)(),n=Object(s.useState)(null),i=Object(j.a)(n,2),o=i[0],l=i[1],u=Object(s.useState)(""),d=Object(j.a)(u,2),m=d[0],O=d[1],v=Object(s.useState)(null),g=Object(j.a)(v,2),x=g[0],y=g[1],w=Object(s.useState)(0),k=Object(j.a)(w,2),N=k[0],S=k[1],E=Object(s.useState)(0),C=Object(j.a)(E,2),L=C[0],I=C[1];function M(){S(N+1)}function P(){O(""),l(null)}function R(){return(R=Object(c.a)(a.a.mark((function t(n,c){var s,i,l,u,d,f,O,v,g,w,k,N,S,E,C,R,T,z,B,F,q,A;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(R=function(t){console.log("%c\u29ed","color: #e5de73",t),t.newLevel&&(je(r,{status:"complete",message:$e.nowYourLevel+" "+t.newLevel}),Ve(r,t.newLevel)),Ze(r,e.commentsn+1)},s=Wt(o.geometry),i=Object(j.a)(s,3),l=i[0],u=i[1],d=i[2],f=new h.a.LngLatBounds(l,u),O=f.getCenter(),v=O.lng,g=O.lat,w={comment:c,grade:n,targetId:o.id},k={lng:v,lat:g,id:o.id,name:o.properties.name||"",polyString:d},N=tt(v,g,16),S=N.x,E=N.y,k.x=S,k.y=E,he(r,null),C=Object(b.a)(x),"ratedFeaturesSource"!==o.source){t.next=31;break}return t.next=14,tr({userId:e.id,review:w,place:Object(p.a)(Object(p.a)({},o.properties),{},{id:o.id,polyString:d}),userLevel:e.level,commentsNumber:e.commentsn});case 14:if("OK"===(T=t.sent).status){t.next=17;break}return t.abrupt("return",je(r,{message:$e.requestError+" #ppr1"}));case 17:R(T),z=0;case 19:if(!(z<C.length)){t.next=29;break}if(C[z].id!==o.id){t.next=26;break}return B=o.properties,F=B.amount,q=B.rating,C[z].properties?C[z].properties=Object(p.a)({},o.properties):C[z].properties={},C[z].properties.rating=at(+((F*q+w.grade)/(F+1)).toFixed(5)),C[z].properties.amount=F+1,t.abrupt("break",29);case 26:z++,t.next=19;break;case 29:t.next=38;break;case 31:return t.next=33,tr({userId:e.id,review:w,place:k,userLevel:e.level,commentsNumber:e.commentsn});case 33:if("OK"===(A=t.sent).status){t.next=36;break}return t.abrupt("return",je(r,{message:$e.requestError+" #ppr2"}));case 36:R(A),C.push({type:"Feature",properties:{rating:n,name:m,amount:1},id:o.id,geometry:o.geometry});case 38:return t.next=40,qt({user:e.id,comment:c,placeId:o.id});case 40:if("OK"===t.sent.status){t.next=43;break}return t.abrupt("return",je(r,{message:$e.requestError+" #ptg_Main_3"}));case 43:y(C),M(),"createdPoly"===o.source&&I(L+1),P();case 47:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(s.useEffect)((function(){ue(r)}),[]),Object(H.jsxs)("div",{className:t.mapHidden?"hidden":"mainWrapper",children:[Object(H.jsx)(Et,{feature:o,setFeature:l,resetRater:P,geoData:x,setGeoData:y,featureTrigger:N},L),t.legendShown&&Object(H.jsx)(Zt,{}),o&&Object(H.jsxs)("div",{className:"featureContainer mp-bg-light mp-border-secondary",children:[Object(H.jsx)(Kt,{feature:o,name:m,setName:O}),Object(H.jsx)(Gt,{feature:o,onSubmit:function(e,t){return R.apply(this,arguments)}}),Object(H.jsx)(Or,{feature:o,updateLayers:M,setGeoData:y,resetRater:P}),Object(H.jsx)("div",{className:"closeFeature mp-bg-light mp-dark mp-border-secondary",onClick:P,title:$e.close,children:Object(H.jsx)(Yt,{fill:"var(--dark)",className:"close-legend"})})]}),Object(H.jsx)("div",{className:"bottom"})]})};function gr(e){return xr.apply(this,arguments)}function xr(){return(xr=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("POST","auth","login",Object(p.a)({},t),!0),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var yr=g("GET","auth","refresh",null,!0),wr=g("GET","auth","logout",null,!0);function kr(e,t){return Nr.apply(this,arguments)}function Nr(){return(Nr=Object(c.a)(a.a.mark((function e(t,r){var n,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+r},body:JSON.stringify(Object(p.a)({},t)),credentials:"include"},e.prev=1,e.next=4,fetch(v+"auth/glogin",n);case 4:return c=e.sent,e.next=7,c.json();case 7:return s=e.sent,e.abrupt("return",s);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}var Sr=function(e){var t=e.message,r=void 0===t?"":t,n=e.setMessage,a=e.color,c=void 0===a?"accent":a,s=e.title,i=void 0===s?"":s;if(!r)return null;var o="responser mp-".concat(c," mp-border-").concat(c);return Object(H.jsxs)("div",{className:o,children:[Object(H.jsxs)("div",{className:"header",children:[Object(H.jsx)("h6",{children:i}),Object(H.jsx)("div",{className:"close-cross cursor-pointer mp-".concat(c),onClick:function(){n("")},children:"\u2716"})]}),Object(H.jsx)("p",{children:r})]})},Er=function(){var e=Object(f.b)(),t=Object(d.f)(),r=Object(f.c)((function(e){return e.user})),n=Object(f.c)((function(e){return e.app})),i=Object(d.g)().pathname,o=Object(s.useState)(""),l=Object(j.a)(o,2),p=l[0],b=l[1],m=Object(s.useState)(""),h=Object(j.a)(m,2),O=h[0],v=h[1],g=Object(s.useState)(""),x=Object(j.a)(g,2),y=x[0],w=x[1];function k(){return(k=Object(c.a)(a.a.mark((function r(){var n;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return w($e.loading+"..."),r.next=3,gr({login:p,pword:O});case 3:if("WRONG"!==(n=r.sent).status){r.next=6;break}return r.abrupt("return",w($e.wrongAuth));case 6:if("OK"!==n.status){r.next=14;break}return be(e),je(e,{message:$e.greetings+", "+n.data.name,status:"complete",title:null}),w(""),r.next=12,rt(e);case 12:return t.push("/"),r.abrupt("return",Xe(e,n.data));case 14:w($e.errorReg+", "+$e.errCode+": "+(n.msg||n));case 15:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function N(){return(N=Object(c.a)(a.a.mark((function t(){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,wr();case 2:if("OK"!==(n=t.sent).status){t.next=9;break}return je(e,{message:$e.farewell+", "+r.name,status:"complete",title:null}),b(""),v(""),w(""),t.abrupt("return",Je(e));case 9:w($e.errorReg+", "+$e.errCode+": "+(n.msg||n));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(e){return E.apply(this,arguments)}function E(){return(E=Object(c.a)(a.a.mark((function r(n){var c,s,i;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=n.getBasicProfile(),s={name:c.getName(),avatar:c.getImageUrl(),gmail:c.getEmail()},r.next=4,kr(s,n.getAuthResponse().id_token);case 4:if("FIRSTTIME"!==(i=r.sent).status){r.next=14;break}return T.token=n.getAuthResponse().id_token,T.name=i.data.name,T.login=i.data.login,i.data.login||(T.occupiedLogin=c.getEmail().split("@")[0]),T.avatar=i.data.avatar,T.id=c.getId(),be(e),r.abrupt("return",t.push("/googleConfirm"));case 14:if("OK"!==i.status){r.next=22;break}return be(e),je(e,{message:$e.greetings+", "+i.data.name,status:"complete",title:null}),w(""),r.next=20,rt(e);case 20:return t.push("/"),r.abrupt("return",Xe(e,i.data));case 22:w($e.errorReg+", "+$e.errCode+": "+(i.msg||i));case 23:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function C(e){console.log("%c\u29ed failed","color: #00a3cc",e),w($e.errorReg+", "+$e.errCode+": "+JSON.stringify(e))}return Object(s.useEffect)((function(){var t=window.gapi;if(!t)return je(e,{message:$e.networkError});t.load("auth2",(function(){t.auth2.init().then((function(e){e.signOut().then((function(){t.signin2.render("google-signin-button",{width:200,height:32,longtitle:!0,onsuccess:S,onfailure:C,theme:"dark"===n.theme||"blueprint"===n.theme?"dark":"white"})}))}))}))}),[]),Object(H.jsx)("div",{children:n.isLogged?Object(H.jsxs)("div",{children:[Object(H.jsxs)("h4",{children:[$e.greetings,", ",r.name]}),Object(H.jsx)("button",{className:"primary",onClick:function(){return N.apply(this,arguments)},children:$e.logout})]}):Object(H.jsxs)("div",{children:[Object(H.jsxs)("div",{className:"/auth"!==i?"login-form login-form-bordered mp-border-secondary":"login-form",children:[Object(H.jsxs)("label",{htmlFor:"name",children:[$e.yourLogin,":"]}),Object(H.jsx)("input",{type:"text",name:"login",value:p,onInput:function(e){b(e.target.value)},autoFocus:!0}),Object(H.jsx)("br",{}),Object(H.jsxs)("label",{htmlFor:"pword",children:[$e.yourPword,":"]}),Object(H.jsx)("input",{type:"password",name:"pword",value:O,onInput:function(e){v(e.target.value)}}),Object(H.jsx)(Sr,{message:y,setMessage:w}),Object(H.jsx)("button",{className:"primary mp-border-accent loginBtn",onClick:function(){return k.apply(this,arguments)},children:$e.confirm}),Object(H.jsx)("div",{id:"google-signin-button",className:"google-signin-button g-signin2 google-oauthBtn","data-onsuccess":"onSignIn"})]}),"/auth"!==i&&Object(H.jsx)("div",{className:"align-center",children:Object(H.jsx)(u.b,{to:"/auth?reg=true",onClick:function(){be(e)},children:Object(H.jsx)("button",{className:"button",children:$e.register})})})]})})},Cr=r(15);function Lr(e){return Ir.apply(this,arguments)}function Ir(){return(Ir=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("POST","users","register",Object(p.a)({},t),!0),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mr(e){return Pr.apply(this,arguments)}function Pr(){return(Pr=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("POST","users","gregister",Object(p.a)({},t),!0),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rr(e){return Tr.apply(this,arguments)}function Tr(){return(Tr=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("POST","users","update",Object(p.a)({},t),!0),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zr(e){return Br.apply(this,arguments)}function Br(){return(Br=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("POST","users","updatePword",Object(p.a)({},t),!0),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fr(e){return qr.apply(this,arguments)}function qr(){return(qr=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("GET","settings","setLang",null,!0,"lang="+t),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ar,_r={login:"",pword:"",name:"",question:$e.secretExample,answer:""},Gr=function(){var e=Object(f.b)(),t=Object(d.f)(),r=Object(s.useState)(_r),n=Object(j.a)(r,2),i=n[0],o=n[1],l=Object(s.useState)(""),u=Object(j.a)(l,2),b=u[0],m=u[1],h=Object(s.useRef)(null),O=Object(s.useState)(!1),v=Object(j.a)(O,2),g=v[0],x=v[1];function y(e){o(Object(p.a)(Object(p.a)({},i),{},Object(Cr.a)({},e.target.name,e.target.value)))}function w(){return(w=Object(c.a)(a.a.mark((function r(){var n,c,s;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i.login&&i.pword){r.next=2;break}return r.abrupt("return",m($e.fillRequiredFields));case 2:if(!i.question||i.answer){r.next=6;break}return i.question===$e.secretExample&&x(!0),h.current.focus(),r.abrupt("return",m($e.secretValidation));case 6:if(!((null===(n=i.question)||void 0===n?void 0:n.length)>300)){r.next=8;break}return r.abrupt("return",m(($e.field+" "+$e.secretQuestion+" "+$e.tooLong).toLocaleLowerCase().capitalize()));case 8:if(!((null===(c=i.answer)||void 0===c?void 0:c.length)>255)){r.next=10;break}return r.abrupt("return",m(($e.field+" "+$e.secterAnswer+" "+$e.tooLong).toLocaleLowerCase().capitalize()));case 10:if(!(i.login.length>50)){r.next=12;break}return r.abrupt("return",m(($e.field+" "+$e.login+" "+$e.tooLong).toLocaleLowerCase().capitalize()));case 12:if(!(i.pword.length>50)){r.next=14;break}return r.abrupt("return",m(($e.field+" "+$e.password+" "+$e.tooLong).toLocaleLowerCase().capitalize()));case 14:if(!(i.name.length>140)){r.next=16;break}return r.abrupt("return",m(($e.field+" "+$e.userName+" "+$e.tooLong).toLocaleLowerCase().capitalize()));case 16:return r.next=18,Lr(i);case 18:if(s=r.sent,console.log("%c\u29ed","color: #86bf60",i,s),"OK"!==s.status){r.next=27;break}m($e.successfullReg),Xe(e,s.data),o(_r),t.push("/"),r.next=36;break;case 27:if("EXISTING"!==s.status){r.next=31;break}return r.abrupt("return",m($e.loginOccupied+" - "+i.login));case 31:if("BANEDPWORD"!==s.status){r.next=35;break}return r.abrupt("return",m($e.bannedPwod+" - "+i.pword));case 35:m($e.errorReg+", "+$e.errCode+": "+(s.msg||s));case 36:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return Object(H.jsx)("div",{children:Object(H.jsxs)("div",{className:"register-form",children:[Object(H.jsx)("h4",{children:$e.register}),Object(H.jsxs)("label",{htmlFor:"login",children:[$e.login,":"]}),Object(H.jsx)("input",{type:"text",name:"login",value:i.login,onInput:y,autoFocus:!0,required:!0}),Object(H.jsx)("br",{}),Object(H.jsxs)("label",{htmlFor:"name",children:[$e.userName,":"]}),Object(H.jsx)("input",{type:"text",name:"name",value:i.name,onInput:y,required:!0}),Object(H.jsx)("br",{}),Object(H.jsxs)("label",{htmlFor:"pword",children:[$e.password,":"]}),Object(H.jsx)("input",{type:"password",name:"pword",value:i.pword,onInput:y,required:!0}),Object(H.jsx)("br",{}),Object(H.jsx)("br",{}),Object(H.jsxs)("label",{htmlFor:"question",children:[$e.secretQuestion,":"]}),Object(H.jsx)("br",{}),Object(H.jsx)("textarea",{type:"text",name:"question",value:i.question,onInput:y,autoComplete:"false"}),Object(H.jsx)("p",{className:"little-hint",children:$e.secretHint}),Object(H.jsxs)("label",{htmlFor:"answer",children:[$e.secterAnswer,":"]}),Object(H.jsx)("input",{type:"text",name:"answer",value:i.answer,onInput:y,required:Boolean(i.question),ref:h,autoComplete:"false"}),Object(H.jsx)("div",{className:"register-responser",children:Object(H.jsx)(Sr,{message:b,setMessage:m})}),g&&Object(H.jsx)("button",{className:"btn-replica mp-border-counter mp-primary-hover",onClick:function(){x(!1),m($e.secretReplica2),h.current.focus()},children:$e.secretReplica}),Object(H.jsx)("button",{className:"mp-border-accent",type:"button",onClick:function(){return w.apply(this,arguments)},children:$e.submit})]})})},Kr=(r(41),function(){var e=Object(f.b)(),t=new URLSearchParams(Object(d.g)().search).get("reg"),r=Object(s.useState)(!0),n=Object(j.a)(r,2),a=n[0],c=n[1];return Object(s.useEffect)((function(){de(e),t&&c(!1)}),[]),Object(H.jsxs)("div",{className:"auth-container relative",children:[Object(H.jsxs)("div",{className:"absolute center auth-subcontainer",children:[a?Object(H.jsx)("h3",{className:"align-center",children:$e.login}):null,Object(H.jsx)("div",{className:"auth-action-wrap mp-border-secondary",children:a?Object(H.jsx)(Er,{}):Object(H.jsx)(Gr,{})}),Object(H.jsx)("div",{className:"align-center",children:a?Object(H.jsx)("button",{className:"small",onClick:function(){return c(!1)},children:$e.register}):Object(H.jsx)("button",{className:"small",onClick:function(){return c(!0)},children:$e.login})})]}),Object(H.jsx)("div",{className:"bottom"})]})}),Wr=(r(42),["title","titleId"]);function Hr(){return(Hr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Dr(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Ur(e,t){var r=e.title,n=e.titleId,a=Dr(e,Wr);return s.createElement("svg",Hr({width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},a),void 0===r?s.createElement("title",{id:n},"edit"):r?s.createElement("title",{id:n},r):null,Ar||(Ar=s.createElement("path",{d:"M14.793 11.793a1 1 0 0 1 1.414 1.414l-7.5 7.5A1 1 0 0 1 8 21H4a1 1 0 0 1-1-1v-4a1 1 0 0 1 .293-.707l13-13a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1 0 1.414l-3 3a1 1 0 0 1-1.414 0l-2-2a1 1 0 1 1 1.414-1.414L18 8.586 19.586 7 17 4.414l-12 12V19h2.586l7.207-7.207z",fill:"current",fillRule:"nonzero"})))}var Xr,Jr=s.forwardRef(Ur),Vr=(r.p,["title","titleId"]);function Qr(){return(Qr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Yr(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Zr(e,t){var r=e.title,n=e.titleId,a=Yr(e,Vr);return s.createElement("svg",Qr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,Xr||(Xr=s.createElement("path",{d:"M532.528 661.408c-12.512 12.496-12.513 32.752-.001 45.248 6.256 6.256 14.432 9.376 22.624 9.376s16.368-3.12 22.624-9.376l189.008-194L577.775 318.64c-12.496-12.496-32.752-12.496-45.248 0-12.512 12.496-12.512 32.752 0 45.248l115.744 115.76H31.839c-17.68 0-32 14.336-32 32s14.32 32 32 32h618.448zM960.159 0h-576c-35.36 0-64.017 28.656-64.017 64v288h64.432V103.024c0-21.376 17.344-38.72 38.72-38.72h496.704c21.408 0 38.72 17.344 38.72 38.72l1.007 818.288c0 21.376-17.311 38.72-38.72 38.72H423.31c-21.376 0-38.72-17.344-38.72-38.72V670.944l-64.432.08V960c0 35.344 28.656 64 64.017 64h576c35.344 0 64-28.656 64-64V64c-.016-35.344-28.672-64-64.016-64z"})))}var $r,en=s.forwardRef(Zr),tn=(r.p,["title","titleId"]);function rn(){return(rn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function nn(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function an(e,t){var r=e.title,n=e.titleId,a=nn(e,tn);return s.createElement("svg",rn({fill:"current",enableBackground:"new 0 0 30 30",height:"30px",id:"square_icons",viewBox:"0 0 30 30",width:"30px",xmlSpace:"preserve",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,$r||($r=s.createElement("path",{clipRule:"evenodd",d:"M15,0.1C6.8,0.1,0.1,6.8,0.1,15c0,8.2,6.7,14.9,14.9,14.9  S29.9,23.2,29.9,15C29.9,6.8,23.2,0.1,15,0.1z M15,26.9C8.4,26.9,3.1,21.6,3.1,15C3.1,8.4,8.4,3.1,15,3.1c6.6,0,11.9,5.3,11.9,11.9  C26.9,21.6,21.6,26.9,15,26.9z M16,6.1c0,9.5,0,8.6,0,17.9c3.2,0,8-4,8-8.9C23.9,10.1,19.9,6.1,16,6.1z",fillRule:"evenodd"})))}var cn,sn,on=s.forwardRef(an),ln=(r.p,["title","titleId"]);function un(){return(un=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function dn(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function pn(e,t){var r=e.title,n=e.titleId,a=dn(e,ln);return s.createElement("svg",un({xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 48 48",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,cn||(cn=s.createElement("path",{d:"M0 0h48v48H0z",fill:"none"})),sn||(sn=s.createElement("path",{d:"M25.74 30.15l-5.08-5.02.06-.06c3.48-3.88 5.96-8.34 7.42-13.06H34V8H20V4h-4v4H2v3.98h22.34C22.99 15.84 20.88 19.5 18 22.7c-1.86-2.07-3.4-4.32-4.62-6.7h-4c1.46 3.26 3.46 6.34 5.96 9.12L5.17 35.17 8 38l10-10 6.22 6.22 1.52-4.07zM37 20h-4l-9 24h4l2.25-6h9.5L42 44h4l-9-24zm-5.25 14L35 25.33 38.25 34h-6.5z"})))}var bn,jn=s.forwardRef(pn),fn=(r.p,["title","titleId"]);function mn(){return(mn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function hn(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function On(e,t){var r=e.title,n=e.titleId,a=hn(e,fn);return s.createElement("svg",mn({width:"1em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-people",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,bn||(bn=s.createElement("path",{fillRule:"evenodd",d:"M15 14s1 0 1-1-1-4-5-4-5 3-5 4 1 1 1 1h8zm-7.978-1h7.956a.274.274 0 0 0 .014-.002l.008-.002c-.002-.264-.167-1.03-.76-1.72C13.688 10.629 12.718 10 11 10c-1.717 0-2.687.63-3.24 1.276-.593.69-.759 1.457-.76 1.72a1.05 1.05 0 0 0 .022.004zM11 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm3-2a3 3 0 1 1-6 0 3 3 0 0 1 6 0zM6.936 9.28a5.88 5.88 0 0 0-1.23-.247A7.35 7.35 0 0 0 5 9c-4 0-5 3-5 4 0 .667.333 1 1 1h4.216A2.238 2.238 0 0 1 5 13c0-1.01.377-2.042 1.09-2.904.243-.294.526-.569.846-.816zM4.92 10c-1.668.02-2.615.64-3.16 1.276C1.163 11.97 1 12.739 1 13h3c0-1.045.323-2.086.92-3zM1.5 5.5a3 3 0 1 1 6 0 3 3 0 0 1-6 0zm3-2a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"})))}var vn,gn=s.forwardRef(On),xn=(r.p,["title","titleId"]);function yn(){return(yn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function wn(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function kn(e,t){var r=e.title,n=e.titleId,a=wn(e,xn);return s.createElement("svg",yn({id:"Layer_1",style:{enableBackground:"new 0 0 30 30"},viewBox:"0 0 30 30",xmlSpace:"preserve",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,vn||(vn=s.createElement("path",{d:"M23,3h-6c-0.512,0-1.024,0.195-1.414,0.586l-12,12c-0.781,0.781-0.781,2.047,0,2.828l8,8c0.781,0.781,2.047,0.781,2.828,0  c0.391-0.391,11.609-11.609,12-12C26.805,14.024,27,13.512,27,13V7C27,4.791,25.209,3,23,3z M23,9c-1.105,0-2-0.895-2-2  c0-1.105,0.895-2,2-2s2,0.895,2,2C25,8.105,24.105,9,23,9z"})))}var Nn,Sn=s.forwardRef(kn),En=(r.p,["title","titleId"]);function Cn(){return(Cn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ln(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function In(e,t){var r=e.title,n=e.titleId,a=Ln(e,En);return s.createElement("svg",Cn({id:"trip-route-travel-dot-connection-relationship",style:{enableBackground:"new 0 0 15 13"},viewBox:"0 0 15 13",xmlSpace:"preserve",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,Nn||(Nn=s.createElement("path",{d:"M13.5,10c-0.651,0-1.201,0.419-1.408,1H3c-1.103,0-2-0.897-2-2s0.897-2,2-2h9c1.654,0,3-1.346,3-3s-1.346-3-3-3H2.908  C2.701,0.419,2.151,0,1.5,0C0.673,0,0,0.673,0,1.5S0.673,3,1.5,3c0.651,0,1.201-0.419,1.408-1H12c1.103,0,2,0.897,2,2s-0.897,2-2,2  H3C1.346,6,0,7.346,0,9s1.346,3,3,3h9.092c0.207,0.581,0.757,1,1.408,1c0.827,0,1.5-0.673,1.5-1.5S14.327,10,13.5,10z M1.5,2  C1.224,2,1,1.776,1,1.5S1.224,1,1.5,1S2,1.224,2,1.5S1.776,2,1.5,2z M13.5,12c-0.276,0-0.5-0.224-0.5-0.5s0.224-0.5,0.5-0.5  s0.5,0.224,0.5,0.5S13.776,12,13.5,12z"})))}var Mn,Pn=s.forwardRef(In),Rn=(r.p,["title","titleId"]);function Tn(){return(Tn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function zn(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Bn(e,t){var r=e.title,n=e.titleId,a=zn(e,Rn);return s.createElement("svg",Tn({width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},a),void 0===r?s.createElement("title",{id:n},"info"):r?s.createElement("title",{id:n},r):null,Mn||(Mn=s.createElement("path",{d:"M12 12a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0-2a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm8 2a8 8 0 1 0-16 0c0 3.092 1.708 5.77 4.438 7.101a1 1 0 0 1-.876 1.798C4.15 19.236 2 15.864 2 12 2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10a1 1 0 0 1-1-1v-7.001a1 1 0 1 1 2 0v5.94A8.001 8.001 0 0 0 20 12z",fill:"current",fillRule:"nonzero"})))}var Fn,qn=s.forwardRef(Bn),An=(r.p,function(e){var t,r=e.setNavState,n=e.hideSelf,a=Object(f.c)((function(e){return e.user})),c=Object(f.c)((function(e){return e.app}));function s(){n()}return Object(H.jsxs)("div",{className:"left-menu-container",children:[Object(H.jsxs)("div",{className:"menu-user",children:[Object(H.jsx)("div",{className:"menu-avatar mp-bg-counter",children:Object(H.jsx)("div",{className:"letter mp-light",children:(null===(t=a.name)||void 0===t?void 0:t[0])||"?"})}),Object(H.jsxs)("div",{className:"menu-user-subcontainer",children:[Object(H.jsx)("div",{className:"menu-username",children:a.name||"no name"}),Object(H.jsxs)("div",{className:"menu-userlevel",children:[$e.level,": ",Object(H.jsx)("span",{className:"mp-accent",children:a.level})]})]})]}),Object(H.jsxs)("div",{className:"menu-items-container",children:[Object(H.jsx)("div",{children:c.isLogged?Object(H.jsxs)(u.b,{to:"/editProfile",onClick:s,className:"left-menu-item mp-accent-hover pick-theme-item",children:[Object(H.jsx)(Jr,{fill:"var(--dark)",className:"navIcon"}),Object(H.jsx)("span",{className:"menu-text",children:$e.profile})]}):Object(H.jsxs)(u.b,{to:"/auth",onClick:s,className:"left-menu-item mp-accent-hover pick-theme-item",children:[Object(H.jsx)(en,{fill:"var(--dark)",className:"navIcon"}),Object(H.jsx)("span",{className:"menu-text",children:$e.login})]})}),Object(H.jsxs)("div",{onClick:function(){r(Yn.theme)},className:"left-menu-item mp-accent-hover pick-theme-item",children:[Object(H.jsx)(on,{fill:"var(--dark)",className:"navIcon"}),Object(H.jsx)("span",{className:"menu-text",children:$e.theme}),Object(H.jsxs)("label",{className:"little-hint",children:["(",$e[c.theme],")"]})]}),Object(H.jsxs)("div",{onClick:function(){r(Yn.language)},className:"left-menu-item mp-accent-hover pick-theme-item",children:[Object(H.jsx)(jn,{fill:"var(--dark)",className:"navIcon"}),Object(H.jsx)("span",{className:"menu-text",children:$e.language})]}),Object(H.jsxs)(u.b,{to:"/friends",onClick:s,className:"left-menu-item mp-accent-hover pick-theme-item",children:[Object(H.jsx)(gn,{fill:"var(--dark)",className:"navIcon"}),Object(H.jsx)("span",{className:"menu-text",children:$e.friends}),Boolean(a.requests.length)&&Object(H.jsx)("span",{className:"mp-accent",children:" ("+a.requests.length+")"})]}),Object(H.jsxs)(u.b,{to:"/tags",className:"left-menu-item mp-accent-hover pick-theme-item",onClick:s,children:[Object(H.jsx)(Sn,{fill:"var(--dark)",className:"navIcon"}),Object(H.jsx)("span",{className:"menu-text",children:$e.tags})]}),Object(H.jsxs)("div",{className:"readonly",children:[Object(H.jsx)(Pn,{fill:"var(--dark)",className:"navIcon"}),Object(H.jsx)("span",{className:"menu-text",children:$e.routes})]}),Object(H.jsxs)(u.b,{to:"/about",className:"left-menu-item mp-accent-hover pick-theme-item",onClick:s,children:[Object(H.jsx)(qn,{fill:"var(--dark)",className:"navIcon"}),Object(H.jsx)("span",{className:"menu-text",children:$e.aboutUs})]})]})]})}),_n=["title","titleId"];function Gn(){return(Gn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Kn(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Wn(e,t){var r=e.title,n=e.titleId,a=Kn(e,_n);return s.createElement("svg",Gn({fill:"current",baseProfile:"tiny",height:"24px",id:"Layer_1",viewBox:"0 0 24 24",width:"24px",xmlSpace:"preserve",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,Fn||(Fn=s.createElement("g",null,s.createElement("path",{d:"M19.164,19.547c-1.641-2.5-3.669-3.285-6.164-3.484v1.437c0,0.534-0.208,1.036-0.586,1.414   c-0.756,0.756-2.077,0.751-2.823,0.005l-6.293-6.207C3.107,12.523,3,12.268,3,11.999s0.107-0.524,0.298-0.712l6.288-6.203   c0.754-0.755,2.073-0.756,2.829,0.001C12.792,5.463,13,5.965,13,6.499v1.704c4.619,0.933,8,4.997,8,9.796v1   c0,0.442-0.29,0.832-0.714,0.958c-0.095,0.027-0.19,0.042-0.286,0.042C19.669,19.999,19.354,19.834,19.164,19.547z M12.023,14.011   c2.207,0.056,4.638,0.394,6.758,2.121c-0.768-3.216-3.477-5.702-6.893-6.08C11.384,9.996,11,10,11,10V6.503l-5.576,5.496l5.576,5.5   V14C11,14,11.738,14.01,12.023,14.011z"}))))}var Hn=s.forwardRef(Wn),Dn=(r.p,function(e){var t=e.setNavState,r=Object(f.b)(),n=Object(s.useState)(),i=Object(j.a)(n,2),o=i[0],l=i[1];function u(e){return d.apply(this,arguments)}function d(){return(d=Object(c.a)(a.a.mark((function e(t){var n,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.attributes.name.value,e.next=3,Fr(n);case 3:if("OK"!==(c=e.sent).status){e.next=6;break}return e.abrupt("return",window.location.reload());case 6:je(r,{message:JSON.stringify(c),title:$e.error,status:"error"});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){l(document.documentElement.lang),console.log("%c\u29ed","color: #7f7700",document.documentElement.lang)}),[]),Object(H.jsxs)("div",{className:"left-menu-container lang-nav",children:[Object(H.jsxs)("div",{className:"menu-user theme-menu",children:[Object(H.jsx)("div",{onClick:function(){t(Yn.default)},className:"\r back-icon-container cursor-pointer \r transition",children:Object(H.jsx)(Hn,{fill:"var(--accent)",className:"nav-icon"})}),Object(H.jsxs)("div",{className:"menu-user-subcontainer",children:[Object(H.jsx)("div",{className:"menu-username",children:$e.pickLanguage}),Object(H.jsxs)("div",{className:"menu-userlevel",children:[$e.language,": ",Object(H.jsx)("span",{className:"mp-accent",children:$e[o]})]})]})]}),Object(H.jsx)("div",{className:"pickTheme-container",children:Object.keys(z).map((function(e,t){return Object(H.jsx)("div",{className:"\n              pickTheme-item mp-border-secondary mp-counter-hover transition-small\n              ".concat(e===o?" current-theme mp-accent mp-border-accent events-none":"","\n              "),name:e,onClick:u,children:$e[e]},e+t)}))})]})});function Un(){var e=window.localStorage.getItem("mp/preferences");return e?JSON.parse(e):null}function Xn(){Un()||window.localStorage.setItem("mp/preferences","{}")}function Jn(e,t){var r=Un();r[e]=t,window.localStorage.setItem("mp/preferences",JSON.stringify(r))}var Vn,Qn=function(e){var t=e.setNavState,r=e.hideSelf,n=Object(f.c)((function(e){return e.app})),a=Object(f.b)(),c=Object(d.f)(),i=Object(s.useState)(R.indexOf(n.theme)),o=Object(j.a)(i,2),l=o[0],u=o[1];function p(e){var t,n,s=e.target.attributes.name.value;u(s),t=a,n=R[s],R.indexOf(n)<0&&(n=R[0]),t({type:ee,theme:n}),G(R[s]),Jn("theme",R[s]),r(),c.push("/")}return Object(H.jsxs)("div",{className:"left-menu-container",children:[Object(H.jsxs)("div",{className:"menu-user theme-menu",children:[Object(H.jsx)("div",{onClick:function(){t(Yn.default)},className:"\r back-icon-container cursor-pointer \r transition",children:Object(H.jsx)(Hn,{fill:"var(--accent)",className:"nav-icon"})}),Object(H.jsxs)("div",{className:"menu-user-subcontainer",children:[Object(H.jsx)("div",{className:"menu-username",children:$e.pickTheme}),Object(H.jsxs)("div",{className:"menu-userlevel",children:[$e.theme,": ",Object(H.jsx)("span",{className:"mp-accent",children:$e[R[l]]})]})]})]}),Object(H.jsx)("div",{className:"pickTheme-container",children:R.map((function(e,t){return Object(H.jsx)("div",{className:"\n              pickTheme-item ".concat(e,"-theme mp-border-secondary mp-counter-hover transition-small\n              ").concat(+t===+l?" current-theme mp-accent mp-border-accent events-none":"","\n              "),name:t,onClick:p,children:$e[e]},e+String(l))}))})]})},Yn={default:"default",theme:"theme",language:"language"},Zn=function(e){var t=e.leftMenu,r=e.setLeftMenu,n=Object(s.useRef)(null),a=Object(s.useState)(Yn.default),c=Object(j.a)(a,2),i=c[0],o=c[1],l=Object(s.useState)(void 0),u=Object(j.a)(l,2),d=u[0],p=u[1],b=Object(s.useState)(void 0),f=Object(j.a)(b,2),m=f[0],h=f[1];function O(){r(!1)}Object(s.useEffect)((function(){var e=n.current;function t(e){var t=e.changedTouches[0].clientX-this.clientWidth;void 0===d&&p((function(e){return void 0===e?Math.abs(t):e}))}e.addEventListener("touchstart",t,!1),e.addEventListener("touchmove",t,!1),e.addEventListener("touchend",(function(e){var t=e.changedTouches[0].clientX-this.clientWidth;void 0===m&&h(Math.abs(t))}),!1)}),[]),Object(s.useEffect)((function(){m>d&&m-d>15?(p(void 0),h(void 0),O()):void 0!==m&&(p(void 0),h(void 0))}),[m,d]);var v="mp-bg-light mp-border-secondary";return Object(H.jsxs)("div",{id:"left-menu",className:t?"active "+v:v,ref:n,onClick:function(e){e.stopPropagation(),i!==Yn.default&&o(Yn.default),i===Yn.default&&O()},children:[Object(H.jsxs)("div",{onClick:function(e){e.stopPropagation()},children:[i===Yn.default&&Object(H.jsx)(An,{hideSelf:O,setNavState:o}),i===Yn.theme&&Object(H.jsx)(Qn,{hideSelf:O,setNavState:o}),i===Yn.language&&Object(H.jsx)(Dn,{setNavState:o})]}),Object(H.jsx)("div",{id:"closeLeftAtBottom",onClick:O,className:"cursor-pointer",title:$e.close,children:Object(H.jsx)(hr,{fill:"var(--dark)",className:"nav-icon"})})]})},$n=(r(43),["title","titleId"]);function ea(){return(ea=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ta(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ra(e,t){var r=e.title,n=e.titleId,a=ta(e,$n);return s.createElement("svg",ea({fill:"current",enableBackground:"new 0 0 26 26",viewBox:"0 0 26 26",xmlSpace:"preserve",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,Vn||(Vn=s.createElement("g",null,s.createElement("path",{d:"M24.25,12.25H1.75C1.3359375,12.25,1,12.5859375,1,13s0.3359375,0.75,0.75,0.75h22.5   c0.4140625,0,0.75-0.3359375,0.75-0.75S24.6640625,12.25,24.25,12.25z"}),s.createElement("path",{d:"M1.75,7.75h22.5C24.6640625,7.75,25,7.4140625,25,7s-0.3359375-0.75-0.75-0.75H1.75   C1.3359375,6.25,1,6.5859375,1,7S1.3359375,7.75,1.75,7.75z"}),s.createElement("path",{d:"M24.25,18.25H1.75C1.3359375,18.25,1,18.5859375,1,19s0.3359375,0.75,0.75,0.75h22.5   c0.4140625,0,0.75-0.3359375,0.75-0.75S24.6640625,18.25,24.25,18.25z"}))))}var na,aa=s.forwardRef(ra),ca=(r.p,["title","titleId"]);function sa(){return(sa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ia(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function oa(e,t){var r=e.title,n=e.titleId,a=ia(e,ca);return s.createElement("svg",sa({fill:"current",enableBackground:"new 0 0 800 800",id:"Layer_1",viewBox:"0 0 800 800",xmlSpace:"preserve",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,na||(na=s.createElement("g",null,s.createElement("path",{d:"M417.1,176c9.6-2.1-1.1-22.4-9.6-24.5c-6.4-1.1-18.1,9.6-17.1,16C391.5,173.9,407.5,179.2,417.1,176z"}),s.createElement("path",{d:"M398.9,53.3C208,53.3,52.3,209.1,52.3,400S208,746.7,398.9,746.7S745.6,590.9,745.6,400S589.9,53.3,398.9,53.3z M681.6,400   c0,115.2-69.3,214.4-167.5,258.1c-12.8,2.1-30.9,3.2-68.3,3.2c-42.7-1.1-53.3,13.9-64,21.3c-10.7-1.1-22.4-2.1-33.1-4.3   c-2.1-1.1-4.3-2.1-6.4-3.2c-23.5-14.9-39.5-14.9-48-12.8c-103.5-41.6-177.1-144-177.1-262.4c0-41.6,8.5-80,24.5-115.2   c17.1,62.9-24.5,66.1-24.5,115.2c0,32,21.3,85.3,53.3,134.4c36.3,54.4,83.2,101.3,100.3,97.1c30.9-9.6-70.4-24.5-7.5-139.7   c62.9-116.3-82.1-39.5-103.5-198.4c-7.5-57.6,32-40.5,60.8-83.2c21.3-33.1,64-40.5,58.7-64c17.1-8.5,35.2-14.9,54.4-19.2   c-20.3,18.1-38.4,33.1,3.2,24.5c45.9-9.6,69.3-18.1,72.5-32c25.6,1.1,49.1,4.3,72.5,11.7c-17.1-2.1-49.1-2.1-50.1,20.3   c-2.1,30.9-6.4,42.7-21.3,45.9s-18.1,7.5-18.1,13.9c1.1,19.2,19.2,23.5,49.1,0c29.9-23.5,38.4,7.5,61.9,12.8   c23.5,5.3,20.3-23.5,39.5-16c19.2,7.5,42.7,49.1-17.1,44.8c-59.7-3.2-89.6-20.3-133.3,2.1c-61.9,30.9-51.2,122.7,13.9,121.6   c53.3,0,68.3,2.1,85.3,58.7S480,512,509.9,555.7c29.9,45.9,100.3-82.1,98.1-124.8s55.5-62.9,23.5-113.1   c-32-49.1,6.4-49.1,34.1-20.3C675.2,329.6,681.6,363.7,681.6,400z"}),s.createElement("path",{d:"M602.7,523.7c14.9,5.3,53.3-74.7,36.3-67.2C620.8,464,590.9,519.5,602.7,523.7z"}))))}var la,ua,da=s.forwardRef(oa),pa=(r.p,["title","titleId"]);function ba(){return(ba=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ja(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function fa(e,t){var r=e.title,n=e.titleId,a=ja(e,pa);return s.createElement("svg",ba({width:"1em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-chevron-double-right",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,la||(la=s.createElement("path",{fillRule:"evenodd",d:"M3.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L9.293 8 3.646 2.354a.5.5 0 0 1 0-.708z"})),ua||(ua=s.createElement("path",{fillRule:"evenodd",d:"M7.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L13.293 8 7.646 2.354a.5.5 0 0 1 0-.708z"})))}var ma=s.forwardRef(fa),ha=(r.p,function(){var e=Object(f.c)((function(e){return e.app})),t=Object(f.c)((function(e){return e.user})),r=t.friends,n=t.id,a=Object(d.f)(),c=Object(s.useState)(!1),i=Object(j.a)(c,2),o=i[0],l=i[1],p=Object(s.useState)($e.defaultMode),b=Object(j.a)(p,2),m=b[0],h=b[1];function O(){l(!0)}Object(s.useEffect)((function(){!function(){var t=Oa(e,r,n);h(t)}()}),[e.mode,e.friendModeId,e.tagModeTag]);var v=Object(s.useRef)(null),g=Object(s.useState)(void 0),x=Object(j.a)(g,2),y=x[0],w=x[1],k=Object(s.useState)(void 0),N=Object(j.a)(k,2),S=N[0],E=N[1],C=Object(s.useState)(!0),L=Object(j.a)(C,2),I=L[0],M=L[1];return Object(s.useEffect)((function(){var e=v.current;function t(e){var t=e.changedTouches[0].clientX-this.clientWidth;void 0===y&&w((function(e){return void 0===e?Math.abs(t):e}))}e.addEventListener("touchstart",t,!1),e.addEventListener("touchmove",t,!1),e.addEventListener("touchend",(function(e){var t=e.changedTouches[0].clientX-this.clientWidth;void 0===S&&E(Math.abs(t))}),!1)}),[]),Object(s.useEffect)((function(){y<S&&S-y>8?(w(void 0),E(void 0),O(),M(!1)):void 0!==S&&(w(void 0),E(void 0))}),[S,y]),Object(H.jsxs)("div",{className:"mainNavigation mp-bg-light mp-border-secondary mp-shadow-primary",children:[Object(H.jsx)(Zn,{leftMenu:o,setLeftMenu:l}),Object(H.jsxs)("div",{className:"flex-wrap nav-menu-back-wrap",children:[e.mapHidden&&Object(H.jsx)("div",{id:"backToMain",className:"nav-icon",onClick:function(){l(!1),a.push("/")},title:$e.toMain,children:Object(H.jsx)(da,{fill:"var(--accent)"})}),Object(H.jsx)("div",{id:"openLeftMenu",className:"nav-icon",onClick:O,title:$e.menu,children:Object(H.jsx)(aa,{fill:"var(--primary)"})}),Object(H.jsxs)(u.b,{to:"/mapMode",className:"currModeLabels",children:[Object(H.jsxs)("span",{className:"mp-dark",children:[$e.mode+": "," "]}),Object(H.jsx)("span",{className:"mp-counter",children:m})]}),Object(H.jsxs)("div",{className:"naviFreeSpace mp-secondary relative",ref:v,onClick:function(){w(void 0),E(void 0),O(),M(!1)},children:["\u200b",I&&Object(H.jsx)(ma,{id:"arrows-icon",className:"mobile",fill:"var(--secondary)"})]})]})]})});function Oa(e,t,r){var n=e.mode,a=e.tagModeTag,c=e.friendModeId;return"watch"===n&&c===r?$e.myMarks:"watch"===n?$e.marksOf+" "+function(e,t){var r=e.find((function(e){return e.id===t.friendModeId}));return r?r.name+" ("+r.login+")":$e.error+" #frMode#0"}(t,e):"draw"===n?$e.drawing:"drawRoute"===n?$e.drawRouteMode:"tags"===n?$e.tag+" #"+a:$e.defaultMode}var va,ga=function(){var e=Object(f.c)((function(e){return e.app.modal})),t=Object(f.b)(),r=void 0!==e.acceptLabel?e.acceptLabel:$e.acceptDefault,n=void 0!==e.cancelLabel?e.cancelLabel:$e.cancelDefault;function s(){return i.apply(this,arguments)}function i(){return(i=Object(c.a)(a.a.mark((function r(){var n;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,null===(n=e.cancelAction)||void 0===n?void 0:n.call(e);case 2:be(t);case 3:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function o(){return(o=Object(c.a)(a.a.mark((function r(){var n;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,null===(n=e.acceptAction)||void 0===n?void 0:n.call(e);case 2:be(t);case 3:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function l(){return(l=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),e.next=3,s();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return e?Object(H.jsx)("div",{className:"modal-dialog-wrap",onClick:function(e){return l.apply(this,arguments)},children:Object(H.jsx)("div",{className:"modal-dialog mp-border-dark mp-bg-light",onClick:function(e){e.stopPropagation()},children:Object(H.jsxs)("div",{className:"modal-dialog-content mp-dark",children:[Object(H.jsx)("div",{className:"modal-content",children:e.message}),Boolean(e.children)&&e.children,Object(H.jsxs)("div",{className:"modal-buttons",children:[Boolean(n)&&Object(H.jsx)("button",{className:"modal-cancel",onClick:s,children:n}),Boolean(r)&&Object(H.jsx)("button",{className:"modal-accept",onClick:function(){return o.apply(this,arguments)},children:r})]})]})})}):null},xa={login:"",pword:"",name:"",question:"",answer:""},ya=function(){var e=Object(f.b)(),t=Object(f.c)((function(e){return e.user})),r=Object(d.f)(),n=Object(s.useState)(xa),i=Object(j.a)(n,2),o=i[0],l=i[1],u=Object(s.useState)(!1),b=Object(j.a)(u,2),m=b[0],h=b[1],O=Object(s.useState)(""),v=Object(j.a)(O,2),g=v[0],x=v[1];function y(e){l(Object(p.a)(Object(p.a)({},o),{},Object(Cr.a)({},e.target.name,e.target.value)))}function w(){return(w=Object(c.a)(a.a.mark((function t(r){var n,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),o.login&&o.name){t.next=3;break}return t.abrupt("return",x($e.fillRequiredFields));case 3:if(!(o.login.length>50)){t.next=5;break}return t.abrupt("return",x(($e.field+" "+$e.login+" "+$e.tooLong).toLocaleLowerCase().capitalize()));case 5:if(!(o.pword.length>50)){t.next=7;break}return t.abrupt("return",x(($e.field+" "+$e.password+" "+$e.tooLong).toLocaleLowerCase().capitalize()));case 7:if(!(o.name.length>140)){t.next=9;break}return t.abrupt("return",x(($e.field+" "+$e.userName+" "+$e.tooLong).toLocaleLowerCase().capitalize()));case 9:if(!m){t.next=22;break}return t.next=12,zr(o);case 12:if("OK"!==(n=t.sent).status){t.next=19;break}return x($e.successfulUpdate),h(!1),t.abrupt("return",Xe(e,n.data));case 19:if("BANEDPWORD"!==n.status){t.next=21;break}return t.abrupt("return",x($e.bannedPwod+" - "+o.pword));case 21:return t.abrupt("return",x($e.errCode+": "+(n.msg||n)));case 22:return t.next=24,Rr(o);case 24:if(c=t.sent,console.log("%c\u29ed","color: #514080",c),"OK"!==c.status){t.next=31;break}return x($e.successfulUpdate),t.abrupt("return",Xe(e,c.data));case 31:if("EXISTING"!==c.status){t.next=35;break}return t.abrupt("return",x($e.loginOccupied+" - "+o.login));case 35:if("PWORDCHANGE"!==c.status){t.next=41;break}return h(!0),l(Object(p.a)(Object(p.a)({},o),{},{question:c.data.question})),t.abrupt("return",x($e.secretChallenge));case 41:x($e.errCode+": "+(c.msg||c));case 42:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(){return(k=Object(c.a)(a.a.mark((function n(){var c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,wr();case 2:if("OK"!==(c=n.sent).status){n.next=9;break}return l(xa),x(""),je(e,{message:$e.farewell+", "+t.name,status:"complete",title:""}),Je(e),n.abrupt("return",r.push("/"));case 9:x($e.errCode+": "+(c.msg||c));case 10:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(s.useEffect)((function(){return t.id&&l((function(e){return Object(p.a)(Object(p.a)({},e),{},{name:t.name,login:t.login,avatar:t.avatar})})),function(){l(xa)}}),[t]),Object(s.useEffect)((function(){de(e)}),[]),Object(H.jsx)("div",{className:"edit-profile-area relative ",children:Object(H.jsxs)("div",{className:"edit-profile-wrapper absolute center mp-border-secondary",children:[Object(H.jsxs)("form",{className:"edit-profile ",children:[Object(H.jsx)("h4",{children:$e.editProfile}),Object(H.jsxs)("label",{htmlFor:"login",children:[$e.login,":"]}),Object(H.jsx)("input",{type:"text",name:"login",value:o.login,onInput:y,autoFocus:!0,required:!0}),Object(H.jsx)("br",{}),Object(H.jsxs)("label",{htmlFor:"name",children:[$e.userName,":"]}),Object(H.jsx)("input",{type:"text",name:"name",value:o.name,onInput:y,autoFocus:!0,required:!0}),Object(H.jsx)("br",{}),Object(H.jsxs)("label",{htmlFor:"pword",children:[$e.newPassword,":"]}),Object(H.jsx)("input",{type:"password",name:"pword",value:o.pword,onInput:y}),Object(H.jsx)("br",{}),Object(H.jsx)("br",{}),m&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)("label",{htmlFor:"question",children:[$e.secretQuestion,":"]}),Object(H.jsx)("br",{}),Object(H.jsx)("textarea",{type:"text",name:"question",value:o.question,onInput:y,autoComplete:"false",readOnly:!0}),Object(H.jsx)("br",{}),Object(H.jsxs)("label",{htmlFor:"answer",children:[$e.secterAnswer,":"]}),Object(H.jsx)("input",{type:"text",name:"answer",value:o.answer,onInput:y,required:Boolean(o.question),autoComplete:"false"}),Object(H.jsx)("br",{})]}),Object(H.jsx)(Sr,{message:g,setMessage:x})]}),Object(H.jsx)("hr",{className:"mp-border-secondary"}),Object(H.jsxs)("div",{className:"logout-container",children:[Object(H.jsx)("button",{className:"mp-border-secondary profile-logout",onClick:function(){return k.apply(this,arguments)},children:$e.logout}),Object(H.jsx)("button",{className:"mp-border-accent",onClick:function(e){return w.apply(this,arguments)},children:$e.submit})]})]})})},wa=function(){var e=Object(f.b)(),t=Object(d.f)(),r=Object(s.useState)(Object(p.a)({},T)),n=Object(j.a)(r,2),i=n[0],o=n[1],l=Object(s.useState)(""),u=Object(j.a)(l,2),b=u[0],m=u[1];function h(e){o(Object(p.a)(Object(p.a)({},i),{},Object(Cr.a)({},e.target.name,e.target.value)))}function O(){return(O=Object(c.a)(a.a.mark((function r(){var n,c;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(i.login.length>50)){r.next=2;break}return r.abrupt("return",m(($e.field+" "+$e.login+" "+$e.tooLong).toLocaleLowerCase().capitalize()));case 2:if(!(i.name.length>140)){r.next=4;break}return r.abrupt("return",m(($e.field+" "+$e.userName+" "+$e.tooLong).toLocaleLowerCase().capitalize()));case 4:return delete(n=Object(p.a)({},i)).occupiedLogin,r.next=8,Mr(n);case 8:if(c=r.sent,console.log("%c\u29ed","color: #0088cc",c),"OK"!==c.status){r.next=19;break}m($e.successfullReg),Xe(e,c.data),console.log("%c\u29ed","color: #00b300",T),Object.keys(T).forEach((function(e){T.key=null})),o(T),t.push("/"),r.next=28;break;case 19:if("EXISTING"!==c.status){r.next=23;break}return r.abrupt("return",m($e.loginOccupied+" - "+i.login));case 23:if("BANEDPWORD"!==c.status){r.next=27;break}return r.abrupt("return",m($e.bannedPwod+" - "+i.pword));case 27:m($e.errorReg+", "+$e.errCode+": "+(c.msg||c));case 28:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return Object(s.useEffect)((function(){o(T)}),[]),Object(H.jsx)("div",{className:"auth-container relative",children:Object(H.jsx)("div",{className:"absolute center auth-subcontainer",children:Object(H.jsxs)("div",{className:"google-regform mp-border-secondary",children:[Object(H.jsx)("h4",{children:$e.oauthTitle}),Object(H.jsxs)("label",{htmlFor:"login",children:[$e.login,":"]}),Object(H.jsx)("input",{type:"text",name:"login",value:i.login,onInput:h,required:!0}),T.occupiedLogin&&Object(H.jsx)("p",{className:"little-hint",children:$e.login+" "+T.occupiedLogin+" "+$e.occupied}),Object(H.jsx)("br",{}),Object(H.jsxs)("label",{htmlFor:"name",children:[$e.userName,":"]}),Object(H.jsx)("input",{type:"text",name:"name",value:i.name,onInput:h,required:!0}),Object(H.jsx)("br",{}),Object(H.jsx)(Sr,{message:b,setMessage:m}),Object(H.jsx)("button",{className:"mp-border-accent",type:"button",onClick:function(){return O.apply(this,arguments)},children:$e.confirm})]})})})},ka=function(){var e=Object(f.c)((function(e){return e.app.toast})),t=Object(f.b)(),r=Object(s.useState)(null),n=Object(j.a)(r,2),a=n[0],c=n[1],i=Object(s.useRef)(null);if(Object(s.useEffect)((function(){var e=setTimeout((function(){c("opaque")}),4e3);return(null===i||void 0===i?void 0:i.current)&&(i.current.onmouseover=function(e){return c(null)}),function(){clearTimeout(e)}}),[]),!e.message)return null;var o="accent",l="dark",u="light",d="accent",p=void 0!==e.title?e.title:$e.error;return"info"===e.status?(o="counter",l="dark",u="light",d="counter",p=""):"warning"===e.status?(o="counter",l="accent",u="light",d="accent",p=void 0!==e.title?e.title:$e.warning+"!"):"complete"===e.status&&(o="counter",l="dark",u="light",d="counter",p=void 0!==e.title?e.title:$e.complete+"!"),Object(H.jsxs)("div",{className:"mp-toast mp-".concat(o," mp-bg-").concat(u," mp-border-").concat(d," cursor-pointer ").concat(a),onClick:function(){e.clickAction&&e.clickAction(),t({type:re})},ref:i,children:[Object(H.jsx)("div",{className:"toast-header",children:p?Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("h6",{children:p}),Object(H.jsx)("div",{className:"close-cross mp-".concat(l),children:"\u2716"})]}):Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("p",{className:"mp-".concat(l),children:e.message}),Object(H.jsx)("div",{className:"close-cross mp-".concat(o),children:"\u2716"})]})}),Boolean(p)&&Object(H.jsx)("div",{className:"toast-contetnt mp-".concat(l),children:e.message}),Object(H.jsx)("div",{className:"toast-bottom"})]},e.key)},Na={login:"",pword:"",name:"",question:$e.secretExample,answer:""},Sa=function(){var e=Object(f.b)(),t=Object(d.f)(),r=Object(f.c)((function(e){return e.user})),n=Object(d.g)().search,i=Object(s.useState)(Na),o=Object(j.a)(i,2),l=o[0],u=o[1],b=Object(s.useState)(""),m=Object(j.a)(b,2),h=m[0],O=m[1],v=Object(s.useRef)(null),g=Object(s.useState)(!1),x=Object(j.a)(g,2),y=x[0],w=x[1];function k(e){u(Object(p.a)(Object(p.a)({},l),{},Object(Cr.a)({},e.target.name,e.target.value)))}function N(){return(N=Object(c.a)(a.a.mark((function r(){var n,c,s;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(l.login){r.next=2;break}return r.abrupt("return",O($e.fillRequiredFields));case 2:if(!l.question||l.answer){r.next=6;break}return l.question===$e.secretExample&&w(!0),v.current.focus(),r.abrupt("return",O($e.secretValidation));case 6:if(!((null===(n=l.question)||void 0===n?void 0:n.length)>300)){r.next=8;break}return r.abrupt("return",O(($e.field+" "+$e.secretQuestion+" "+$e.tooLong).toLocaleLowerCase().capitalize()));case 8:if(!((null===(c=l.answer)||void 0===c?void 0:c.length)>255)){r.next=10;break}return r.abrupt("return",O(($e.field+" "+$e.secterAnswer+" "+$e.tooLong).toLocaleLowerCase().capitalize()));case 10:if(!(l.login.length>50)){r.next=12;break}return r.abrupt("return",O(($e.field+" "+$e.login+" "+$e.tooLong).toLocaleLowerCase().capitalize()));case 12:if(!(l.name.length>140)){r.next=14;break}return r.abrupt("return",O(($e.field+" "+$e.userName+" "+$e.tooLong).toLocaleLowerCase().capitalize()));case 14:return r.next=16,Lr(l);case 16:if("OK"!==(s=r.sent).status){r.next=24;break}O($e.successfullReg),Xe(e,s.data),u(Na),t.push("/"),r.next=33;break;case 24:if("EXISTING"!==s.status){r.next=28;break}return r.abrupt("return",O($e.loginOccupied+" - "+l.login));case 28:if("BANEDPWORD"!==s.status){r.next=32;break}return r.abrupt("return",O($e.bannedPwod+" - "+l.pword));case 32:O($e.errorReg+", "+$e.errCode+": "+(s.msg||s));case 33:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return Object(s.useEffect)((function(){return Object(c.a)(a.a.mark((function t(){var c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.id){t.next=5;break}return t.next=3,wr();case 3:"OK"===t.sent.status?Je(e):O("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438");case 5:c=new URLSearchParams(n),u(Object(p.a)(Object(p.a)({},l),{},{login:c.get("login"),name:c.get("name"),level:c.get("level")}));case 7:case"end":return t.stop()}}),t)})))(),function(){u(Na)}}),[]),Object(H.jsx)("div",{className:"auth-container relative",children:Object(H.jsx)("div",{className:"absolute center auth-subcontainer",children:Object(H.jsx)("div",{className:"auth-action-wrap mp-border-secondary",children:Object(H.jsxs)("div",{className:"register-form",children:[Object(H.jsx)("h4",{children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435, \u0431\u0435\u0437 \u0441\u043c\u0441"}),Object(H.jsxs)("label",{htmlFor:"login",children:[$e.login,":"]}),Object(H.jsx)("input",{type:"text",name:"login",value:l.login,onInput:k,autoFocus:!0,required:!0}),Object(H.jsx)("br",{}),Object(H.jsxs)("label",{htmlFor:"name",children:[$e.userName,":"]}),Object(H.jsx)("input",{type:"text",name:"name",value:l.name,onInput:k,required:!0}),Object(H.jsx)("br",{}),Object(H.jsxs)("label",{htmlFor:"pword",children:[$e.password,":"]}),Object(H.jsx)("input",{type:"password",placeholder:"\u043f\u0430\u0440\u043e\u043b\u044c \u043d\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u0435\u043d",name:"pword",value:l.pword,onInput:k,required:!0}),Object(H.jsx)("br",{}),Object(H.jsx)("br",{}),Object(H.jsxs)("label",{htmlFor:"question",children:[$e.secretQuestion,":"]}),Object(H.jsx)("br",{}),Object(H.jsx)("textarea",{type:"text",name:"question",value:l.question,onInput:k,autoComplete:"false"}),Object(H.jsx)("p",{className:"little-hint",children:$e.secretHint}),Object(H.jsxs)("label",{htmlFor:"answer",children:[$e.secterAnswer,":"]}),Object(H.jsx)("input",{type:"text",name:"answer",value:l.answer,onInput:k,required:Boolean(l.question),ref:v,autoComplete:"false"}),Object(H.jsx)("div",{className:"register-responser",children:Object(H.jsx)(Sr,{message:h,setMessage:O})}),y&&Object(H.jsx)("button",{className:"btn-replica mp-border-counter mp-primary-hover",onClick:function(){w(!1),O($e.secretReplica2),v.current.focus()},children:$e.secretReplica}),Object(H.jsx)("button",{className:"mp-border-accent",type:"button",onClick:function(){return N.apply(this,arguments)},children:$e.submit})]})})})})},Ea=window.location.origin+"/friends/addByLink?id=",Ca=function(){var e=Object(d.f)(),t=Object(f.c)((function(e){return e.user})),r=t.id,n=t.friends,a=t.requests;function c(t){e.push("/friends/item/".concat(t))}return Object(H.jsxs)("div",{className:"friendsDefault",children:[Object(H.jsx)("h4",{children:$e.friendList}),Object(H.jsx)("div",{className:"friendList",children:Boolean(null===n||void 0===n?void 0:n.length)?n.map((function(e){var t,r;return Object(H.jsx)("div",{className:"friendContainer",children:Object(H.jsxs)("div",{className:"resultUser cursor-pointer mp-accent-hover transition-small",onClick:function(){return c(e.id)},children:[Object(H.jsx)("div",{className:"authorLogo mp-bg-primary",children:Object(H.jsx)("span",{className:"mp-dark",title:e.login,children:null===(t=String(e.name))||void 0===t||null===(r=t[0])||void 0===r?void 0:r.toUpperCase()})}),Object(H.jsxs)("div",{className:"resultUser-creds",children:[Object(H.jsx)("p",{className:"mp-primary",children:e.name}),Object(H.jsxs)("label",{className:"cursor-pointer",children:["(",e.login,")"]})]})]},e.id)},e.id1+e.id2)})):Object(H.jsx)("div",{className:"noFriendsCase",children:Object(H.jsx)("h5",{children:$e.sadlyNoFriends})})}),Object(H.jsx)("h4",{children:Boolean(null===a||void 0===a?void 0:a.length)&&$e.friendRequests}),Boolean(null===a||void 0===a?void 0:a.length)&&Object(H.jsx)("div",{className:"friendList",children:Boolean(null===a||void 0===a?void 0:a.length)&&a.map((function(e){var t,r;return Object(H.jsx)("div",{className:"friendContainer",children:Object(H.jsxs)("div",{className:"resultUser cursor-pointer mp-accent-hover transition-small",onClick:function(){return c(e.id)},children:[Object(H.jsx)("div",{className:"authorLogo mp-bg-primary",children:Object(H.jsx)("span",{className:"mp-dark",title:e.login,children:null===(t=String(e.name))||void 0===t||null===(r=t[0])||void 0===r?void 0:r.toUpperCase()})}),Object(H.jsxs)("div",{className:"resultUser-creds",children:[Object(H.jsx)("p",{className:"mp-primary",children:e.name}),Object(H.jsxs)("label",{className:"cursor-pointer",children:["(",e.login,")"]})]})]},e.id)},e.id1+e.id2)}))}),Object(H.jsxs)("div",{className:"addMeLink",children:[Object(H.jsx)("h4",{children:$e.addMeLink}),Object(H.jsx)("input",{type:"text",value:Ea+r,onFocus:function(e){e.target.select()},readOnly:!0})]}),Object(H.jsx)(u.b,{to:"/friends/addByLink",children:Object(H.jsx)("button",{className:"button",children:$e.addByLink})})]})},La=function(e){return e.loading?Object(H.jsx)("div",{children:"Loading anmation..."}):null},Ia=function(){var e=Object(d.h)().userId,t=Object(f.b)(),r=Object(f.c)((function(e){return e.user})),n=Object(s.useState)(null),i=Object(j.a)(n,2),o=i[0],l=i[1],b=Object(s.useState)(!0),m=Object(j.a)(b,2),h=m[0],O=m[1],v=Object(s.useState)(Object(H.jsx)("button",{className:"button",onClick:function(){return w.apply(this,arguments)},children:$e.addFriend})),g=Object(j.a)(v,2),x=g[0],y=g[1];if(Object(s.useEffect)((function(){Object(c.a)(a.a.mark((function n(){var c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.id!==e){n.next=4;break}return l(Object(p.a)({},r)),y(Object(H.jsx)(u.b,{to:"/editProfile",children:Object(H.jsx)("button",{className:"button",children:$e.profile})})),n.abrupt("return",O(!1));case 4:return n.next=6,Ce(e);case 6:"OK"!==(c=n.sent).status?je(t,{message:$e.requestError+" #profEr1"}):l(c.data),O(!1);case 9:case"end":return n.stop()}}),n)})))()}),[e]),Object(s.useEffect)((function(){(null===o||void 0===o?void 0:o.friendStatus)&&("friends"===o.friendStatus?y(Object(H.jsxs)("div",{children:[Object(H.jsx)(u.b,{to:"/friends",children:Object(H.jsx)("button",{className:"button",children:$e.inFriendlist})}),Object(H.jsx)("button",{className:"button mp-border-counter",onClick:k,children:$e.removeFriend})]})):"youRequested"===o.friendStatus?y(Object(H.jsx)("button",{className:"button mp-border-secondary mp-secondary",children:$e.youRequested})):"youAsked"===o.friendStatus&&y(Object(H.jsx)("button",{className:"button mp-border-accent",onClick:S,children:$e.confirmRequest})))}),[null===o||void 0===o?void 0:o.friendStatus]),h)return Object(H.jsx)("div",{className:"profileContainer",children:Object(H.jsx)(La,{loading:h})});function w(){return(w=Object(c.a)(a.a.mark((function r(){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Ie(e);case 2:if("OK"===r.sent.status){r.next=5;break}return r.abrupt("return",je(t,{message:$e.requestError+" #profEr2"}));case 5:return r.next=7,rt(t);case 7:y(Object(H.jsx)("button",{className:"button",children:$e.sent}));case 8:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function k(){return N.apply(this,arguments)}function N(){return(N=Object(c.a)(a.a.mark((function r(){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Pe(e);case 2:if("OK"===r.sent.status){r.next=5;break}return r.abrupt("return",je(t,{message:$e.requestError+" #profEr3"}));case 5:return r.next=7,rt(t);case 7:l(Object(p.a)(Object(p.a)({},o),{},{friendStatus:"youAsked"}));case 8:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function S(){return E.apply(this,arguments)}function E(){return(E=Object(c.a)(a.a.mark((function r(){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Te(e);case 2:if("OK"===r.sent.status){r.next=5;break}return r.abrupt("return",je(t,{message:$e.requestError+" #profEr4"}));case 5:return r.next=7,rt(t);case 7:l(Object(p.a)(Object(p.a)({},o),{},{friendStatus:"friends"}));case 8:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return o?Object(H.jsxs)("div",{className:"profileContainer",children:[Object(H.jsxs)("div",{className:"userProfile mp-border-dark",children:[Boolean(o.avatar)&&Object(H.jsx)("div",{className:"avatar",children:Object(H.jsx)("img",{src:o.avatar,alt:$e.avatar})}),Object(H.jsxs)("div",{className:"mp-primary credentials ",title:$e.userName,children:[o.name," ",Object(H.jsxs)("label",{className:"mp-dark",title:$e.login,children:["(",o.login,")"]})]}),Boolean(o.commentsn)&&Object(H.jsxs)("div",{className:"commentsn",children:[$e.commentsn,": ",o.commentsn]}),Object(H.jsxs)("div",{className:"level capitalize",children:[$e.level,": ",Object(H.jsx)("label",{className:"mp-dark",children:o.level})]})]}),Object(H.jsx)("div",{className:"friends-actionButton",children:x})]}):Object(H.jsx)("div",{className:"profileContainer",children:Object(H.jsx)("div",{className:"userProfile mp-border-dark",children:Object(H.jsx)("p",{children:$e.noResults})})})},Ma=function(e){var t=e.searchResults,r=new URLSearchParams(Object(d.g)().search).get("query"),n=Object(d.f)();if(!t)return null;if(!t.length)return Object(H.jsx)("div",{className:"resultsContainer",children:Object(H.jsx)("h5",{children:$e.noResults})});return Object(H.jsx)("div",{className:"resultsContainer",children:t.map((function(e){var t,a;return Object(H.jsxs)("div",{className:"resultUser cursor-pointer mp-accent-hover transition-small",onClick:function(){return t=e.id,void n.push("/friends/item/".concat(t,"?from=").concat(r));var t},children:[Object(H.jsx)("div",{className:"authorLogo mp-bg-primary",children:Object(H.jsx)("span",{className:"mp-dark",title:e.login,children:null===(t=String(e.name))||void 0===t||null===(a=t[0])||void 0===a?void 0:a.toUpperCase()})}),Object(H.jsxs)("div",{className:"resultUser-creds",children:[Object(H.jsx)("p",{className:"mp-primary",children:e.name}),Object(H.jsxs)("label",{className:"cursor-pointer",children:["(",e.login,")"]})]})]},e.id)}))})},Pa=["title","titleId"];function Ra(){return(Ra=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ta(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function za(e,t){var r=e.title,n=e.titleId,a=Ta(e,Pa);return s.createElement("svg",Ra({fill:"current",width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},a),void 0===r?s.createElement("title",{id:n},"search"):r?s.createElement("title",{id:n},r):null,va||(va=s.createElement("path",{d:"M16.464 15.05l4.243 4.243a1 1 0 0 1-1.414 1.414l-4.904-4.904a1 1 0 0 1 0-1.414 5.5 5.5 0 1 0-2.404 1.407 1 1 0 1 1 .54 1.926 7.5 7.5 0 1 1 3.94-2.672z",fillRule:"nonzero"})))}var Ba=s.forwardRef(za),Fa=(r.p,function(e){var t=e.setSearchResults,r=Object(f.b)(),n=Object(d.f)(),i=Object(s.useState)(""),o=Object(j.a)(i,2),l=o[0],u=o[1];function p(){return b.apply(this,arguments)}function b(){return(b=Object(c.a)(a.a.mark((function e(){var c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("friends"!==(c=n.location.pathname.split("/")[1])){e.next=7;break}return e.next=4,Se(l);case 4:s=e.sent,e.next=10;break;case 7:return e.next=9,It(l);case 9:s=e.sent;case 10:if("OK"===s.status){e.next=12;break}return e.abrupt("return",je(r,{message:$e.requestError+" #subErr1"}));case 12:t(s.data),n.push("/".concat(c,"/search?query=").concat(l));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(H.jsxs)("div",{className:"searchContainer transition",children:[Object(H.jsx)("div",{onClick:function(){n.goBack()},className:"backButton",children:Object(H.jsx)("button",{className:"button mp-primary",children:"<<"})}),Object(H.jsx)("input",{type:"text",name:"search",value:l,onInput:function(e){u(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&p()}}),Object(H.jsx)("div",{className:"searchButton relative",children:Object(H.jsxs)("button",{onClick:p,className:"button",children:["\u200b",Object(H.jsx)(Ba,{fill:"var(--accent)"})]})})]})}),qa=(r(29),function(){var e=new URLSearchParams(Object(d.g)().search).get("id"),t=Object(f.b)(),r=Object(s.useState)(null),n=Object(j.a)(r,2),i=n[0],o=n[1],l=Object(s.useState)(!0),p=Object(j.a)(l,2),b=p[0],m=p[1],h=Object(s.useState)(""),O=Object(j.a)(h,2),v=O[0],g=O[1];var x=Object(s.useState)(!1),y=Object(j.a)(x,2),w=y[0],k=y[1];function N(){return S.apply(this,arguments)}function S(){return(S=Object(c.a)(a.a.mark((function e(){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be(i);case 2:if(r=e.sent,console.log("%c\u29ed","color: #00e600",r),"OK"===r.status){e.next=6;break}return e.abrupt("return",je(t,{message:$e.requestError+" #adBLi1"}));case 6:je(t,{message:$e.yourFriendsNow,status:"complete"}),k(!0);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){e&&o(e)}),[]),Object(s.useEffect)((function(){Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return");case 2:return console.log("%c\u29ed id run","color: #733d00",i),e.next=5,N();case 5:m(!1);case 6:case"end":return e.stop()}}),e)})))()}),[i]),e&&b?Object(H.jsx)(La,{loading:b}):Object(H.jsxs)("div",{className:"addByLink",children:[Object(H.jsx)("h4",{children:$e.addByLink}),w?Object(H.jsx)("div",{children:Object(H.jsx)(u.b,{to:"/friends",children:Object(H.jsx)("button",{className:"button",children:$e.goBack})})}):Object(H.jsxs)("div",{className:"field",children:[Object(H.jsx)("label",{htmlFor:"link",children:$e.pasteAddLink}),Object(H.jsx)("input",{type:"text",value:v,onInput:function(e){var t=e.target.value;if(g(t),null===t||void 0===t?void 0:t.includes("id")){var r=new URLSearchParams(t.split("?")[1]);r.get("id")&&o(r.get("id"))}},readOnly:w})]})]})}),Aa=function(){var e=Object(f.b)(),t=Object(f.c)((function(e){return e.app})),r=Object(s.useState)(null),n=Object(j.a)(r,2),a=n[0],c=n[1];return Object(s.useEffect)((function(){de(e)}),[]),t.isLogged?Object(H.jsxs)("div",{children:[Object(H.jsx)(Fa,{setSearchResults:c}),Object(H.jsxs)(d.c,{children:[Object(H.jsx)(d.a,{exact:!0,path:"/friends",children:Object(H.jsx)(Ca,{})}),Object(H.jsx)(d.a,{path:"/friends/item/:userId",children:Object(H.jsx)(Ia,{})}),Object(H.jsx)(d.a,{path:"/friends/search",children:Object(H.jsx)(Ma,{searchResults:a})}),Object(H.jsx)(d.a,{path:"/friends/addByLink",children:Object(H.jsx)(qa,{})})]}),Object(H.jsx)("div",{className:"bottom"})]}):Object(H.jsx)("div",{className:"friendsNotLoggedWrap auth-container relative",children:Object(H.jsx)("div",{className:"absolute center auth-subcontainer",children:Object(H.jsxs)("div",{className:"auth-action-wrap mp-border-secondary",children:[Object(H.jsx)("p",{children:$e.loginToUseThis}),Object(H.jsx)(u.b,{to:"/auth",children:Object(H.jsx)("button",{className:"primary mp-border-accent loginBtn capitalize",children:$e.authorization})})]})})})},_a=function(){var e=Object(f.b)(),t=Object(d.f)(),r=Object(f.c)((function(e){return e.user})),n=r.friends,a=r.id,c=Object(f.c)((function(e){return e.app})),i=Object(f.c)((function(e){return e.user})),o=Object(s.useState)($e.defaultMode),l=Object(j.a)(o,2),p=l[0],b=l[1];function m(r){t.push("/"),fe(e,r),he(e,"watch")}return Object(s.useEffect)((function(){!function(){var e=Oa(c,n,a);b(e)}()}),[c.mode,c.friendModeId,c.tagModeTag]),Object(s.useEffect)((function(){de(e)}),[]),Object(H.jsxs)("div",{className:"modeSwitch",children:[Object(H.jsxs)("h5",{className:"currentMode",children:[$e.currentMode+": ",Object(H.jsx)("span",{className:"mp-counter",children:p})]}),Object(H.jsxs)("div",{className:"modeType mp-border-secondary",children:[Object(H.jsx)("h5",{className:"title",children:$e.watchModeSub1}),Object(H.jsx)("div",{className:"friendList",children:Boolean(null===n||void 0===n?void 0:n.length)?n.map((function(e){var t,r;return Object(H.jsx)("div",{className:"friendContainer",children:Object(H.jsxs)("div",{className:"resultUser cursor-pointer mp-accent-hover transition-small",onClick:function(){return m(e.id)},children:[Object(H.jsx)("div",{className:"authorLogo mp-bg-primary",children:Object(H.jsx)("span",{className:"mp-dark",title:e.login,children:null===(t=String(e.name))||void 0===t||null===(r=t[0])||void 0===r?void 0:r.toUpperCase()})}),Object(H.jsxs)("div",{className:"resultUser-creds",children:[Object(H.jsx)("p",{className:"mp-primary",children:e.name}),Object(H.jsxs)("label",{className:"cursor-pointer",children:["(",e.login,")"]})]})]})},e.id1+e.id2)})):Object(H.jsxs)("div",{className:"noFriendsCase",children:[Object(H.jsx)("h5",{children:$e.watchModeSub2}),Object(H.jsx)(u.b,{to:"/friends",children:Object(H.jsx)("button",{children:$e.addFriends})})]})})]}),Object(H.jsx)("div",{className:"myMarks",children:Object(H.jsx)("button",{className:"button",onClick:function(){return m(i.id)},children:Object(H.jsx)("h5",{className:"title cursor-pointer capitalize",children:$e.myMarks})})}),"draw"!==c.mode&&Object(H.jsxs)("div",{className:"modeType mp-border-secondary",children:[Object(H.jsx)("h5",{className:"title",children:$e.drawMode}),Boolean((null===i||void 0===i?void 0:i.level)<2)?Object(H.jsx)("p",{className:"subtitle",children:$e.drawModeLevelOnly}):Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(u.b,{to:"/",disabled:!0,children:Object(H.jsxs)("button",{className:"button modeButton drawModeButton",onClick:function(){t.push("/"),he(e,"draw")},children:[Object(H.jsx)(pt,{fill:"var(--secondary)",className:"nav-icon"}),$e.toDrawMode]})}),Object(H.jsx)("p",{className:"subtitle",children:$e.watchModeSub3})]})]}),Object(H.jsx)("div",{className:"modeType mp-border-secondary",children:c.tagModeTag?Object(H.jsx)("div",{children:Object(H.jsxs)("h5",{className:"title",children:[Object(H.jsx)("span",{className:"capitalize",children:$e.tag+": "}),Object(H.jsxs)(u.b,{to:"/tags/item/"+c.tagModeTag,className:"cursor-pointer",children:[Object(H.jsx)("span",{className:"mp-secondary",children:"#"}),Object(H.jsx)("span",{className:"mp-counter mp-accent-hover",children:c.tagModeTag})]})]})}):Object(H.jsxs)("div",{children:[Object(H.jsx)("h5",{className:"title",children:$e.tags}),Object(H.jsx)(u.b,{to:"/tags",children:Object(H.jsxs)("button",{className:"button modeButton tagModeButton tagWrap",children:[Object(H.jsx)("span",{className:"bigHashtag mp-secondary",children:"#"}),Object(H.jsx)("span",{className:"tagContent",children:$e.toTags})]})}),Object(H.jsx)("p",{className:"subtitle",children:$e.mapTagModeSub})]})}),c.mode&&Object(H.jsx)("div",{className:"modeType mp-border-secondary",children:Object(H.jsx)("button",{className:"button modeButton capitalize mp-counter mp-border-counter",onClick:function(){t.push("/"),he(e,"default")},children:$e.reset})})]})},Ga=function(e){var t=e.tagInfo,r=e.onClick;if(!t)return null;return Object(H.jsxs)("div",{className:"tagItem cursor-pointer mp-accent-hover transition-small mp-border-dark ",onClick:function(){r(t.tag)},children:[Object(H.jsxs)("div",{className:"mp-dark tagWrap",children:[Object(H.jsx)("span",{className:"bigHashtag",children:"# "}),Object(H.jsx)("span",{className:"tagContent mp-accent",children:t.tag})]}),Object(H.jsxs)("p",{className:"tagAmount mp-dark",children:[$e.tagsAmount,": ",Object(H.jsx)("span",{className:"mp-accent",children:t.amount})]})]})},Ka=function(){var e=Object(f.b)(),t=Object(d.f)(),r=Object(s.useState)([]),n=Object(j.a)(r,2),i=n[0],o=n[1],l=Object(s.useState)([]),u=Object(j.a)(l,2),p=u[0],b=u[1];function m(e){t.push("/tags/item/".concat(e))}return Object(s.useEffect)((function(){Object(c.a)(a.a.mark((function t(){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Tt();case 2:if("OK"===(r=t.sent).status){t.next=5;break}return t.abrupt("return",je(e,{message:$e.requestError+" #fts1"}));case 5:o(r.data.recent),b(r.data.popular);case 7:case"end":return t.stop()}}),t)})))()}),[]),Object(H.jsxs)("div",{children:[Object(H.jsx)("h4",{className:"title",children:$e.recentTags}),Object(H.jsx)("div",{className:"tagsGroup",children:Boolean(i.length)&&i.map((function(e){return Object(H.jsx)(Ga,{tagInfo:e,onClick:m},e.tag+"recent")}))}),Object(H.jsx)("h4",{className:"title",children:$e.mostPopular}),Object(H.jsx)("div",{className:"tagsGroup",children:Boolean(p.length)&&p.map((function(e){return Object(H.jsx)(Ga,{tagInfo:e,onClick:m},e.tag+"popular")}))})]})},Wa=function(e){var t=e.searchResults,r=new URLSearchParams(Object(d.g)().search).get("query"),n=Object(d.f)(),a=Object(s.useState)([]),c=Object(j.a)(a,2),i=c[0],o=c[1];if(Object(s.useEffect)((function(){if(t){var e={};t.forEach((function(t){if(!e[t.tag])return e[t.tag]={amount:t.amount,places:[t.placeId],tag:t.tag};e[t.tag].amount+=t.amount,e[t.tag].places.push(t.placeId)})),o(Object.values(e))}}),[t]),!t)return null;if(!t.length)return Object(H.jsx)("div",{className:"resultsContainer",children:Object(H.jsx)("h5",{children:$e.noResults})});function l(e){n.push("/tags/item/".concat(e,"?from=").concat(r))}return Object(H.jsx)("div",{className:"resultsContainer",children:i.map((function(e){return Object(H.jsx)(Ga,{tagInfo:e,onClick:l},e.key)}))})},Ha=function(){var e=Object(f.b)(),t=Object(d.h)().tag,r=Object(d.f)(),n=Object(f.c)((function(e){return e.app.mapRef})),i=Object(s.useState)(null),o=Object(j.a)(i,2),l=o[0],b=o[1];function m(){return(m=Object(c.a)(a.a.mark((function r(){var n,c;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Pt(t);case 2:if(n=r.sent,console.log("%c\u29ed","color: #00e600",n),"OK"===n.status){r.next=6;break}return r.abrupt("return",je(e,{message:$e.requestError+" #tow1"}));case 6:if(n.data.length){r.next=8;break}return r.abrupt("return");case 8:c={amount:0,places:[]},n.data.forEach((function(e){c.amount+=e.amount,c.places.push(Object(p.a)({},e))})),b(c);case 11:case"end":return r.stop()}}),r)})))).apply(this,arguments)}if(Object(s.useEffect)((function(){!function(){m.apply(this,arguments)}()}),[]),!l)return null;return Object(H.jsxs)("div",{className:"tagOverview",children:[Object(H.jsxs)("h3",{className:"title tagWrap",children:[Object(H.jsx)("span",{className:"bigHashtag",children:"#"}),Object(H.jsx)("span",{className:"tagContent mp-accent",children:t})]}),Object(H.jsxs)("p",{className:"subtitle",children:[$e.tagsAmount,": ",l.amount]}),Object(H.jsx)(u.b,{to:"/",children:Object(H.jsx)("button",{className:"button",onClick:function(){me(e,t),he(e,"tags"),r.push("/")},children:$e.watchAtMap})}),Object(H.jsx)("h4",{className:"title titlePopular",children:$e.mostPopularPlaces}),Object(H.jsx)("div",{className:"tagPlaces",children:Boolean(l.places)&&l.places.map((function(a){var c=a.placeId,s=a.amount,i=a.name,o=a.lng,l=a.lat;return i||(i=$e.noName),Object(H.jsx)("div",{children:Object(H.jsxs)("div",{className:"placeInTag",children:[Object(H.jsx)("div",{className:"amount mp-accent",title:$e.mentionsAmount,children:s}),Object(H.jsxs)("div",{className:"placeTagInfo",children:[Object(H.jsx)("div",{className:"name",children:i}),Object(H.jsx)("button",{className:"button",onClick:function(){n.flyTo({center:[o,l],zoom:16,speed:.5}),me(e,t),he(e,"tags"),r.push("/")},children:$e.show})]})]})},c)}))})]})},Da=(r(44),function(){var e=Object(f.b)(),t=Object(s.useState)(null),r=Object(j.a)(t,2),n=r[0],a=r[1];return Object(s.useEffect)((function(){de(e)}),[]),Object(H.jsxs)("div",{className:"tags",children:[Object(H.jsx)(Fa,{setSearchResults:a}),Object(H.jsxs)(d.c,{children:[Object(H.jsx)(d.a,{exact:!0,path:"/tags",children:Object(H.jsx)(Ka,{})}),Object(H.jsx)(d.a,{path:"/tags/item/:tag",children:Object(H.jsx)(Ha,{})}),Object(H.jsx)(d.a,{path:"/tags/search",children:Object(H.jsx)(Wa,{searchResults:n})})]}),Object(H.jsx)("div",{className:"bottom"})]})}),Ua=function(){var e=Object(f.b)(),t=Object(s.useState)(""),r=Object(j.a)(t,2),n=r[0],i=r[1];function o(){return(o=Object(c.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,nr(n);case 2:if("OK"===t.sent.status){t.next=7;break}return t.abrupt("return",je(e,{message:$e.requestError+" #aboutus1"}));case 7:je(e,{message:$e.sent,status:"complete"});case 8:setTimeout((function(){i("")}),500);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(s.useEffect)((function(){de(e)}),[]),Object(H.jsx)("div",{className:"aboutPage relative",children:Object(H.jsxs)("div",{className:"paddingcontainer",children:[Object(H.jsx)("p",{children:$e.aboutMain}),Object(H.jsx)("h5",{className:"mp-border-dark",children:$e.aboutFutureTitle}),Object(H.jsx)("p",{children:$e.aboutFuture}),Object(H.jsx)("br",{}),Object(H.jsxs)("p",{htmlFor:"comment",children:[$e.comment,":"]}),Object(H.jsx)("textarea",{name:"comment",rows:"3",value:n,onInput:function(e){i(e.target.value)},className:"raterComment mp-border-dark mp-dark",placeholder:$e.aboutPlaceholder}),Object(H.jsx)("br",{}),Object(H.jsx)("button",{className:"button",onClick:function(){return o.apply(this,arguments)},children:$e.submit}),Object(H.jsx)("br",{}),Object(H.jsx)("h5",{className:"mp-border-dark",children:$e.techInfo}),Object(H.jsx)("p",{children:$e.techSpecs}),Object(H.jsx)("br",{}),Object(H.jsx)("br",{}),Object(H.jsxs)("p",{className:"version mp-counter",children:[$e.author,": @ilyaizr"]}),Object(H.jsxs)("p",{className:"version mp-counter",children:[$e.version,": alpha 3.2"]}),Object(H.jsx)("div",{className:"bottom"})]})})};var Xa=function(){var e,t=Object(f.b)(),r=Object(f.c)((function(e){return e.app})),n=Object(H.jsx)("div",{className:"auth-modal-containter mp-border-secondary",children:Object(H.jsx)(Er,{})});return Object(s.useEffect)((function(){r.isLogged||Un().skipLogin||pe(t,{acceptLabel:null,cancelLabel:$e.skip,cancelAction:function(){Jn("skipLogin",!0)},message:$e.wannaAuthorize,children:n}),Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt(t);case 2:case"end":return e.stop()}}),e)})))()}),[]),Object(H.jsxs)(u.a,{children:[Object(H.jsx)(ga,{}),Object(H.jsx)(ha,{}),r.toast&&Object(H.jsx)(ka,{},null===(e=r.toast)||void 0===e?void 0:e.key),Object(H.jsx)(vr,{}),Object(H.jsxs)(d.c,{children:[Object(H.jsx)(d.a,{path:"/auth",children:Object(H.jsx)("div",{className:"routeWrapper",children:Object(H.jsx)(Kr,{})})}),Object(H.jsx)(d.a,{path:"/alphaReg",children:Object(H.jsx)("div",{className:"routeWrapper",children:Object(H.jsx)(Sa,{})})}),Object(H.jsx)(d.a,{path:"/editProfile",children:Object(H.jsx)("div",{className:"routeWrapper",children:Object(H.jsx)(ya,{})})}),Object(H.jsx)(d.a,{path:"/googleConfirm",children:Object(H.jsx)("div",{className:"routeWrapper",children:Object(H.jsx)(wa,{})})}),Object(H.jsx)(d.a,{path:"/friends",children:Object(H.jsx)("div",{className:"routeWrapper",children:Object(H.jsx)(Aa,{})})}),Object(H.jsx)(d.a,{path:"/mapMode",children:Object(H.jsx)("div",{className:"routeWrapper",children:Object(H.jsx)(_a,{})})}),Object(H.jsx)(d.a,{path:"/tags",children:Object(H.jsx)("div",{className:"routeWrapper",children:Object(H.jsx)(Da,{})})}),Object(H.jsx)(d.a,{path:"/about",children:Object(H.jsx)("div",{className:"routeWrapper",children:Object(H.jsx)(Ua,{})})})]})]})},Ja=(r(45),r(27)),Va=Object(Ja.a)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qe:return Object(p.a)(Object(p.a)({},e),t.credentials);case Ae:return Object(p.a)(Object(p.a)({},e),{},{level:t.newLevel});case _e:return Object(p.a)(Object(p.a)({},e),{},{friends:Object(b.a)(t.friendsArr)});case Ge:return Object(p.a)(Object(p.a)({},e),{},{requests:Object(b.a)(t.requestsArr)});case Ke:return Object(p.a)(Object(p.a)({},e),{},{commentsn:t.number});default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return Object(p.a)(Object(p.a)({},e),{},{isLogged:!0});case U:return Object(p.a)(Object(p.a)({},e),{},{isLogged:!1});case J:return Object(p.a)(Object(p.a)({},e),{},{reviewsShown:!1});case X:return Object(p.a)(Object(p.a)({},e),{},{reviewsShown:!0});case V:return Object(p.a)(Object(p.a)({},e),{},{legendShown:!1});case Q:return Object(p.a)(Object(p.a)({},e),{},{mapHidden:!1});case Y:return Object(p.a)(Object(p.a)({},e),{},{mapHidden:!0});case Z:return Object(p.a)(Object(p.a)({},e),{},{modal:t.modalInfo});case $:return Object(p.a)(Object(p.a)({},e),{},{modal:!1});case ee:return Object(p.a)(Object(p.a)({},e),{},{theme:t.theme});case te:var r=Math.random();return Object(p.a)(Object(p.a)({},e),{},{toast:Object(p.a)(Object(p.a)({},t.toastInfo),{},{key:r})});case re:return Object(p.a)(Object(p.a)({},e),{},{toast:!1});case ne:return Object(p.a)(Object(p.a)({},e),{},{mapKey:Number(e.mapKey)+1});case ae:return Object(p.a)(Object(p.a)({},e),{},{friendModeId:t.id});case ce:return Object(p.a)(Object(p.a)({},e),{},{tagModeTag:t.tag});case se:var n=t.mode,a=e.mode;if(!n)return Object(p.a)(Object(p.a)({},e),{},{mode:null,friendModeId:null,tagModeTag:null});if(n===a)return Object(p.a)({},e);var c=Object(p.a)(Object(p.a)({},e),{},{mode:n});return"draw"!==n&&"draw"!==a||(c.mapKey+=1),"watch"!==n&&(c.friendModeId=null),c;case"app/reset":return Object(p.a)({},oe);case ie:return Object(p.a)(Object(p.a)({},e),{},{mapRef:t.mapRef});default:return e}}}),Qa=Object(Ja.b)(Va),Ya=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,47)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))};function Za(){return $a.apply(this,arguments)}function $a(){return($a=Object(c.a)(a.a.mark((function e(){var t,r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},Xn(),t=R[3],(r=Un()).theme&&R.indexOf(r.theme)>-1&&(t=r.theme),oe.theme=t,K(),document.head.insertAdjacentHTML("beforeend","<style>:root{}</style>"),G(t),e.next=11,yr();case 11:if("OK"!==(n=e.sent).status){e.next=16;break}n.data&&(Object.entries(n.data).forEach((function(e){var t=Object(j.a)(e,2),r=t[0],n=t[1];return He[r]=n})),oe.isLogged=!0),e.next=22;break;case 16:if("REAUTH"!==n.status){e.next=20;break}return e.abrupt("return");case 20:return oe.toast={message:$e.initConnectionErr},e.abrupt("return","connection_error");case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Za();case 2:l.a.render(Object(H.jsx)(i.a.StrictMode,{children:Object(H.jsx)(f.a,{store:Qa,children:Object(H.jsx)(Xa,{})})}),document.getElementById("root"));case 3:case"end":return e.stop()}}),e)})))(),Ya()}},[[46,1,2]]]);
//# sourceMappingURL=main.1ea81a93.chunk.js.map
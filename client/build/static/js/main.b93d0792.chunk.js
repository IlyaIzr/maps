(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{28:function(e,t,r){},40:function(e,t,r){},41:function(e,t,r){},42:function(e,t,r){},43:function(e,t,r){},45:function(e,t,r){"use strict";r.r(t);var n=r(2),a=r.n(n),c=r(4),s=r(1),i=r.n(s),o=r(20),u=r.n(o),l=r(8),d=r(10),b=r(12),p=r(3),j=r(5),m=r(6),f=r(17),O=r.n(f),h=("https://m4ps.herokuapp.com/"||"http://localhost:1414/")+"api/";function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GET",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auth",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"refresh",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o={method:e,headers:{"Content-Type":"application/json"}};s&&(o.credentials="include"),n&&(o.body=JSON.stringify(Object(p.a)({},n)));var u=h+t+"/"+r+(i&&"?"+i);return Object(c.a)(a.a.mark((function e(){var t,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(u,o);case 3:return t=e.sent,e.next=6,t.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))}function v(){return g.apply(this,arguments)}function g(){return(g=Object(c.a)(a.a.mark((function e(){var t,r,n,c,s,i=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:0,r=i.length>1&&void 0!==i[1]?i[1]:99999999,n=i.length>2&&void 0!==i[2]?i[2]:0,c=i.length>3&&void 0!==i[3]?i[3]:99999999,s=x("GET","maps","places",null,!1,"minx=".concat(t,"&miny=").concat(n,"&maxx=").concat(r,"&maxy=").concat(c)),e.next=7,s();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return w.apply(this,arguments)}function w(){return(w=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x("GET","maps","userPlaces",null,!1,"id=".concat(t)),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return N.apply(this,arguments)}function N(){return(N=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x("GET","maps","reviews",null,!1,"targetId=".concat(t)),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return L.apply(this,arguments)}function L(){return(L=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x("POST","maps","placesByTiles",Object(p.a)({},t),!1),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return E.apply(this,arguments)}function E(){return(E=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x("POST","maps","postInitReview",Object(p.a)({},t),!1),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){return M.apply(this,arguments)}function M(){return(M=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x("POST","maps","postNextReview",Object(p.a)({},t),!1),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t){return q.apply(this,arguments)}function q(){return(q=Object(c.a)(a.a.mark((function e(t,r){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x("DELETE","maps","reviews",{timestamp:t,place:r},!0),e.next=3,n();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t){return P.apply(this,arguments)}function P(){return(P=Object(c.a)(a.a.mark((function e(t,r){var n,c,s,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Set(["street_address","natural_feature","airport","park","point_of_interest","establishment","food","store"]),t=Number(t),r=Number(r),e.next=5,window.geocoderRef.geocode({location:{lat:t,lng:r}});case 5:if(c=e.sent,s="",!c.results){e.next=20;break}i=0;case 9:if(!(i<c.results.length)){e.next=20;break}if("premise"!==(o=c.results[i]).types[0]){e.next=14;break}return s=o.formatted_address.split(", ")[0]+", "+o.formatted_address.split(", ")[1],e.abrupt("break",20);case 14:if(!o.types.find((function(e){return n.has(e)}))){e.next=17;break}return s=o.address_components[1].long_name+", "+o.address_components[0].long_name,e.abrupt("break",20);case 17:i++,e.next=9;break;case 20:return e.abrupt("return",s);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T=["standart","dark","b&w","blueprint"],B={login:null,name:null,avatar:null,token:null,occupiedLogin:null,id:null},A={ru:"ru",en:"en"},z=["#cd0c0c","#e14612","#e1922c","#e8c337","#94c52f","#0aa112"],_={standart:z,blueprint:["#422424","#723e36","#866b3c","#afb766","#6bc41c","#149f04"],dark:["#610505","#a82d00","#c7c400","#b3a700","#88c70a","#00e00b"],"b&w":["#422424","#723e36","#866b3c","#afb766","#96ce7e","#5fb961"]},G=["primary","secondary","accent","light","dark","counter"],D={standart:{primary:"#05304a",secondary:"#b6c8d6",accent:"#1bbc00",light:"#ffffff",dark:"#494949",counter:"#2d8bcf"},dark:{primary:"#BB86FC",secondary:"#a485c8",accent:"#03DAC6",light:"#383736",dark:"#d8d8d8",counter:"#e4d737"},"b&w":{primary:"#444444",secondary:"#747474",accent:"#676767",light:"#ffffff",dark:"#000000",counter:"#616161"},blueprint:{primary:"#f0a2de",secondary:"#c9abca",accent:"#e9eb7d",light:"#34568b",dark:"#ffffff",counter:"#9affd5"}};function K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T[0],t=document.querySelector(":root").style;Object.entries(D[e]).forEach((function(e){var r=Object(j.a)(e,2),n=r[0],a=r[1];return t.setProperty("--"+n,a)}))}function U(){var e="",t=".mp";G.forEach((function(r){e+="\n    ".concat(t,"-").concat(r,"{color: var(--").concat(r,")}\n    ").concat(t,"-").concat(r,"-hover:hover{color: var(--").concat(r,")}\n\n    ").concat(t,"-bg-").concat(r,"{background-color: var(--").concat(r,")}\n    ").concat(t,"-bg-").concat(r,"-hover:hover{background-color: var(--").concat(r,")}\n\n    ").concat(t,"-border-").concat(r,"{border-color: var(--").concat(r,")}\n    ").concat(t,"-shadow-").concat(r,"{ box-shadow: var(--").concat(r,") 2px 2px 4px }\n    ")})),document.head.insertAdjacentHTML("beforeend","<style>".concat(e,"</style>"))}function W(e,t,r){e.on("load",(function(n){var a=_[r];e.addSource("ratedFeaturesSource",{type:"geojson",data:{type:"FeatureCollection",features:t}}),e.addSource("selectedFeatureSrc",{type:"geojson",data:{type:"FeatureCollection",features:[]}});var c=e.getStyle().layers.find((function(e){return"symbol"===e.type})).id;e.addLayer({id:"ratedFeatures",source:"ratedFeaturesSource",minzoom:11,type:"fill",paint:{"fill-opacity":["interpolate",["linear"],["get","amount"],0,0,1,.5,2,.8,5,.9],"fill-color":["interpolate",["linear"],["get","rating"],0,a[0],1,a[1],2,a[2],3,a[3],4,a[4],5,a[5]]}},c),e.addLayer({id:"selectedFeature",source:"selectedFeatureSrc",minzoom:13,type:"fill",paint:{"fill-opacity":.9,"fill-color":D[r].accent,"fill-outline-color":D[r].counter}},c)}))}var H=r(0),J="app/log_in",Q="app/log_out",X="app/expand_comms",V="app/shrink_comms",Z="app/show_main",Y="app/hide_main",$="app/set_modal",ee="app/close_modal",te="app/switch_theme",re="app/set_toast",ne="app/close_toast",ae="app/rerender_map",ce="app/friend_id",se={isLogged:!1,reviewsShown:!0,mapHidden:!1,modal:!1,theme:T[0],toast:!1,mapKey:1e3,friendModeId:null};var ie=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e(t?{type:J}:{type:Q})},oe=function(e){e({type:Z})},ue=function(e){e({type:Y})},le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{message:"",acceptLabel:"",cancelLabel:"",acceptAction:function(){},cancelAction:function(){},children:Object(H.jsx)(H.Fragment,{})};e({type:$,modalInfo:t})},de=function(e){e({type:ee})},be=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{message:"",clickAction:function(){},status:"error",title:""};e({type:re,toastInfo:t})},pe=function(e,t){e({type:ce,id:t})};function je(e){return(null===e||void 0===e?void 0:e.length)?e.map((function(e){var t,r={type:"Feature",geometry:{type:"MultiPolygon"},id:e.id,properties:{rating:Number(e.rating),amount:e.amount,name:e.name,lng:e.lng,lat:e.lat},source:"composite",sourceLayer:"building"};return r.geometry.coordinates=null===e||void 0===e||null===(t=e.polygon)||void 0===t?void 0:t.map((function(e){return e.map((function(e){return e.map((function(e){return[e.x,e.y]}))}))})),r})):[]}function me(e,t,r,n,a,c){if("OK"!==e.status)return be(t,{title:r.networkError,message:e.msg||JSON.stringify(e)});var s=je(e.data);n(s);var i=new Map(Object(b.a)(a));return e.data.forEach((function(e){var t={type:"Feature",geometry:{type:"MultiPolygon"},id:e.id,properties:{rating:Number(e.rating),amount:e.amount,name:e.name,lng:e.lng,lat:e.lat},source:"composite",sourceLayer:"building"},r="x"+e.x+"y"+e.y;if(i.has(r))i.get(r).set(e.id,t);else{var n=new Map;n.set(e.id,t),i.set(r,n)}})),c(i),s}function fe(e,t,r,n){function s(t){return function(e){if(!e[1])return e[0];var t=window.turf.union(e[0],e[1]);if(e[2])for(var r=2;r<e.length;r++)t=window.turf.union(t,e[r]);return t.geometry}(function(t){var r=e.querySourceFeatures("composite",{filter:["any",["==",["id"],t.id]],sourceLayer:t.sourceLayer});return r.splice(r.length/2),r.map((function(e){return e.geometry}))}(t)||[])}e.on("click",function(){var i=Object(c.a)(a.a.mark((function c(i){var o,u,l,d,b,m,f,O,h,x,v,g,y,w;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=function(t){var r=i.lngLat,n=r.lng,a=r.lat;e.flyTo({center:[n,a],zoom:t})},u=e.queryRenderedFeatures(i.point),l=new Set(["building","landuse"]),!(d=u.find((function(e){return"ratedFeaturesSource"===e.source})))){a.next=10;break}return console.log("found rated feature",d),n.trash(),Le(e,d),t(d),a.abrupt("return");case 10:if(!(null===(b=u.find((function(e){return l.has(e.sourceLayer)})))||void 0===b?void 0:b.id)){a.next=24;break}return console.log("found feature",b),n.trash(),m=e.getZoom(),f=Le(e,b,m<16?16:m),O=Object(j.a)(f,2),h=O[0],x=O[1],v=s(b),a.next=19,R(x,h);case 19:return b.properties.name=a.sent,t(Object(p.a)(Object(p.a)({},b),{},{geometry:v})),a.abrupt("return");case 24:if(!b){a.next=32;break}return console.log("interesting, but no id",b),n.trash(),o(e.getZoom()+1),t(null),a.abrupt("return");case 32:if("mapbox-gl-draw-hot"!==(null===u||void 0===u||null===(g=u[0])||void 0===g?void 0:g.source)){a.next=34;break}return a.abrupt("return");case 34:return console.log("no interesting features",u),y=new Set(["natural_label","place_label","poi_label","housenum_label","airport_label"]),u.find((function(e){return y.has(e.sourceLayer)}))&&(w=e.getZoom()+1)<16&&o(w),r(),a.abrupt("return");case 40:case"end":return a.stop()}}),c)})));return function(e){return i.apply(this,arguments)}}())}function Oe(){var e=window.localStorage.getItem("lastLocation");if(!e)return{};var t=e=JSON.parse(e);return{lng:t.lng,lat:t.lat}}function he(e,t,r){return{x:Math.floor((e+180)/360*Math.pow(2,r)),y:Math.floor((1-Math.log(Math.tan(t*Math.PI/180)+1/Math.cos(t*Math.PI/180))/Math.PI)/2*Math.pow(2,r))}}var xe,ve=r(7),ge=(xe={ru:"\u0440\u0443\u0441\u0441\u043a\u0438\u0439",en:"\u0430\u043d\u0433\u043b\u0438\u0439\u0441\u043a\u0438\u0439",homeLinkBtn:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",authLinkBtn:"\u041b\u043e\u0433\u0438\u043d",profile:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",theme:"\u0422\u0435\u043c\u0430",friends:"\u0414\u0440\u0443\u0437\u044c\u044f",routes:"\u041c\u0430\u0440\u0448\u0440\u0443\u0442\u044b",language:"\u042f\u0437\u044b\u043a",aboutUs:"\u041e \u043d\u0430\u0441",setsLinkBtn:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",login:"\u041b\u043e\u0433\u0438\u043d",logout:"\u0412\u044b\u0439\u0442\u0438",register:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",yourLogin:"\u0412\u0430\u0448 \u043b\u043e\u0433\u0438\u043d",userName:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",yourPword:"\u0412\u0430\u0448 \u043f\u0430\u0440\u043e\u043b\u044c",secretQuestion:"\u0421\u0435\u043a\u0440\u0435\u0442\u043d\u044b\u0439 \u0432\u043e\u043f\u0440\u043e\u0441",secretHint:"\u0414\u043b\u044f \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u0430\u0440\u043e\u043b\u044f",secterAnswer:"\u041e\u0442\u0432\u0435\u0442 \u043d\u0430 \u0441\u0435\u043a\u0440\u0435\u0442",secretValidation:"\u0412\u044b \u0443\u043a\u0430\u0437\u0430\u043b\u0438 \u0432\u043e\u043f\u0440\u043e\u0441, \u0443\u043a\u0430\u0436\u0438\u0442\u0435 \u0438 \u043e\u0442\u0432\u0435\u0442",secretReplica:"\u041d\u043e \u044d\u0442\u043e \u043d\u0435 \u044f \u043d\u0430\u043f\u0438\u0441\u0430\u043b \u0432\u043e\u043f\u0440\u043e\u0441!",secretReplica2:"\u0410 \u043e\u0442\u0432\u0435\u0442 \u043d\u0430\u043c \u0432\u0441\u0451 \u0440\u0430\u0432\u043d\u043e \u043d\u0443\u0436\u0435\u043d",fillRequiredFields:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u043f\u043e\u043b\u044f",secretExample:"\u0418\u043c\u044f, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0432\u044b \u0442\u0430\u0439\u043d\u043e \u043d\u0435\u043d\u0430\u0432\u0438\u0434\u0438\u0442\u0435",submit:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c",confirm:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c",greetings:"\u041f\u0440\u0438\u0432\u0435\u0442",firstTimeRate:"\u0412\u0430\u043c \u0432\u044b\u043f\u0430\u043b\u0430 \u0447\u0435\u0441\u0442\u044c \u043f\u0435\u0440\u0432\u044b\u043c \u043e\u0446\u0435\u043d\u0438\u0442\u044c \u044d\u0442\u043e \u043c\u0435\u0441\u0442\u043e!",placeRatingPrefix:"\u041e\u0431\u0449\u0438\u0439 \u0440\u0435\u0439\u0442\u0438\u043d\u0433",placeAmountPrefix:"\u042d\u0442\u043e \u043c\u0435\u0441\u0442\u043e \u043e\u0446\u0435\u043d\u0438\u043b\u0438",placeAmountNumberEnds1:"\u0440\u0430\u0437",placeAmountEndsMultiple:"\u0440\u0430\u0437\u0430",push:"\u041d\u0430\u0436\u0430\u0442\u044c",commentPlacehol:"\u0435\u0441\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438?",rating:"\u0412\u0430\u0448\u0430 \u043e\u0446\u0435\u043d\u043a\u0430",bestRating:"\u0417\u0430\u043c\u0435\u0447\u0430\u0442\u0435\u043b\u044c\u043d\u043e",worstRating:"\u0423\u0436\u0430\u0441\u043d\u043e",reviews:"\u041e\u0442\u0437\u044b\u0432\u044b",noComments:"\u0411\u0435\u0437 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432",searchPHolder:"\u041d\u0430\u0439\u0442\u0438",newFeature:"\u041d\u043e\u0432\u044b\u0439 \u043e\u0431\u044a\u0435\u043a\u0442 \u043d\u0430 \u043a\u0430\u0440\u0442\u0435",newFeaturePHolder:"\u0410\u0434\u0440\u0435\u0441 \u0438\u043b\u0438 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430",drawPromptHeader:"\u0420\u0435\u0436\u0438\u043c \u0440\u0438\u0441\u043e\u0432\u0430\u043d\u0438\u044f",drawPrompt:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435, \u0434\u0432\u0430\u0436\u0434\u044b \u043d\u0430\u0436\u0430\u0432 \u043d\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u044e\u044e \u0442\u043e\u0447\u043a\u0443 \u043f\u043e\u043b\u0438\u0433\u043e\u043d\u0430",level:"\u0443\u0440\u043e\u0432\u0435\u043d\u044c",acceptDefault:"\u043f\u0440\u0438\u043d\u044f\u0442\u044c",cancelDefault:"\u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c",rateZeroModal:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u043f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043e\u0446\u0435\u043d\u043a\u0443 0?",toMain:"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e",menu:"\u041c\u0435\u043d\u044e",pickTheme:"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0442\u0435\u043c\u0443",apply:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c",password:"\u041f\u0430\u0440\u043e\u043b\u044c",field:"\u043f\u043e\u043b\u0435",tooLong:"\u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043b\u0438\u043d\u043d\u043e\u0435"},Object(ve.a)(xe,T[0],"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0430\u044f"),Object(ve.a)(xe,T[1],"\u0422\u0451\u043c\u043d\u0430\u044f"),Object(ve.a)(xe,T[2],"Black&White"),Object(ve.a)(xe,T[3],"\u0427\u0435\u0440\u0442\u0451\u0436\u043d\u0430\u044f"),Object(ve.a)(xe,"successfullReg","\u0423\u0441\u043f\u0435\u0448\u043d\u0430\u044f \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f!"),Object(ve.a)(xe,"errorReg","\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"),Object(ve.a)(xe,"errCode","\u043a\u043e\u0434 \u043e\u0448\u0438\u0431\u043a\u0438"),Object(ve.a)(xe,"loginOccupied","\u041b\u043e\u0433\u0438\u043d \u0443\u0436\u0435 \u0437\u0430\u043d\u044f\u0442"),Object(ve.a)(xe,"wrongAuth","\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0432\u0445\u043e\u0434\u0430"),Object(ve.a)(xe,"editProfile","\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0444\u0438\u043b\u044f"),Object(ve.a)(xe,"successfulUpdate","\u0423\u0441\u043f\u0435\u0448\u043d\u043e\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435"),Object(ve.a)(xe,"secretChallenge","\u0412\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u043e\u0442\u0432\u0435\u0442\u0438\u0442\u044c \u043d\u0430 \u0441\u0435\u043a\u0440\u0435\u0442\u043d\u044b\u0439 \u0432\u043e\u043f\u0440\u043e\u0441, \u0447\u0442\u043e\u0431\u044b \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"),Object(ve.a)(xe,"loading","\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"),Object(ve.a)(xe,"oauthTitle","\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u0447\u0435\u0440\u0435\u0437 google \u0430\u043a\u043a\u0430\u0443\u043d\u0442"),Object(ve.a)(xe,"occupied","\u0417\u0430\u043d\u044f\u0442"),Object(ve.a)(xe,"bannedPwod","\u044d\u0442\u043e\u0442 \u043f\u0430\u0440\u043e\u043b\u044c \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d"),Object(ve.a)(xe,"error","\u043e\u0448\u0438\u0431\u043a\u0430"),Object(ve.a)(xe,"warning","\u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435"),Object(ve.a)(xe,"complete","\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e"),Object(ve.a)(xe,"initConnectionErr","\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u043a\u044e\u0447\u0435\u043d\u0438\u0438 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443, \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u043d\u0435 \u0443\u0434\u0430\u043b\u0430\u0441\u044c. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0441\u043e\u043e\u0431\u0449\u0438\u0442\u0435 \u043e\u0431 \u043e\u0448\u0438\u0431\u043a\u0435"),Object(ve.a)(xe,"networkError","\u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0442\u0438"),Object(ve.a)(xe,"wannaAuthorize","\u0425\u043e\u0442\u0438\u0442\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f?"),Object(ve.a)(xe,"skip","\u043f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c"),Object(ve.a)(xe,"farewell","\u0414\u043e \u0432\u0441\u0442\u0440\u0435\u0447\u0438"),Object(ve.a)(xe,"pickLanguage","\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u044f\u0437\u044b\u043a"),Object(ve.a)(xe,"requestError","\u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0435, \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u044b \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0441 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u043e\u043c"),Object(ve.a)(xe,"anonimus","\u0410\u043d\u043e\u043d"),Object(ve.a)(xe,"removeComment","\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"),Object(ve.a)(xe,"friendList","\u0421\u043f\u0438\u0441\u043e\u043a \u0434\u0440\u0443\u0437\u0435\u0439"),Object(ve.a)(xe,"sadlyNoFriends","\u041f\u0435\u0447\u0430\u043b\u044c\u043d\u043e, \u0434\u0440\u0443\u0437\u0435\u0439 \u0443 \u0432\u0430\u0441 \u043d\u0435\u0442"),Object(ve.a)(xe,"addFriends","\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0434\u0440\u0443\u0437\u0435\u0439"),Object(ve.a)(xe,"noResults","\u041d\u0435\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432"),Object(ve.a)(xe,"loginToUseThis","\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0443\u0439\u0442\u0435\u0441\u044c \u0447\u0442\u043e\u0431\u044b \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u0441\u0432\u043e\u0438\u0445 \u0434\u0440\u0443\u0437\u0435\u0439, \u0438\u0445 \u043e\u0446\u0435\u043d\u043a\u0438 (\u0438 \u0432 \u0431\u0443\u0434\u0443\u0449\u0435\u043c - \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u044b), \u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u043d\u043e\u0432\u044b\u0445 \u0434\u0440\u0443\u0437\u0435\u0439"),Object(ve.a)(xe,"authorization","\u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),Object(ve.a)(xe,"avatar","\u0430\u0432\u0430\u0442\u0430\u0440"),Object(ve.a)(xe,"commentsn","\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432"),Object(ve.a)(xe,"addFriend","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0434\u0440\u0443\u0437\u044c\u044f"),Object(ve.a)(xe,"removeFriend","\u0423\u0431\u0440\u0430\u0442\u044c \u0438\u0437 \u0434\u0440\u0443\u0437\u0435\u0439"),Object(ve.a)(xe,"inFriendlist","\u0412 \u0441\u043f\u0438\u0441\u043a\u0435 \u0434\u0440\u0443\u0437\u0435\u0439"),Object(ve.a)(xe,"sent","\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e"),Object(ve.a)(xe,"youRequested","\u0412\u044b \u043e\u0441\u0442\u0430\u0432\u0438\u043b\u0438 \u0437\u0430\u043f\u0440\u043e\u0441"),Object(ve.a)(xe,"confirmRequest","\u041f\u0440\u0438\u043d\u044f\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441"),Object(ve.a)(xe,"addMeLink","\u0421\u0441\u044b\u043b\u043a\u0430 \u0434\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0432\u0430\u0441 \u0432 \u0434\u0440\u0443\u0437\u044c\u044f"),Object(ve.a)(xe,"addByLink","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435"),Object(ve.a)(xe,"pasteAddLink","\u0412\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443 \u0434\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f"),Object(ve.a)(xe,"yourFriendsNow","\u0422\u0435\u043f\u0435\u0440\u044c \u0432\u044b \u0434\u0440\u0443\u0437\u044c\u044f"),Object(ve.a)(xe,"goBack","\u041d\u0430\u0437\u0430\u0434"),Object(ve.a)(xe,"friendRequests","\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0434\u0440\u0443\u0436\u0431\u044b"),Object(ve.a)(xe,"watchMode","\u0420\u0435\u0436\u0438\u043c \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430"),Object(ve.a)(xe,"watchModeSub1","\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043d\u0430 \u043a\u0430\u0440\u0442\u0435 \u043e\u0446\u0435\u043d\u043a\u0438 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u0434\u0440\u0443\u0433\u0430"),Object(ve.a)(xe,"watchModeSub2","\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0434\u0440\u0443\u0437\u0435\u0439, \u0447\u0442\u043e\u0431\u044b \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u0438\u0445 \u043e\u0446\u0435\u043d\u043a\u0438 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e"),Object(ve.a)(xe,"default","\u043e\u0431\u044b\u0447\u043d\u044b\u0439"),Object(ve.a)(xe,"reset","\u0441\u0431\u0440\u043e\u0441\u0438\u0442\u044c"),Object(ve.a)(xe,"asAnonius","\u043a\u0430\u043a \u0430\u043d\u043e\u043d\u0438\u043c"),Object(ve.a)(xe,"send","\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"),xe);function ye(e,t,r,n,s,i){var o=new window.MapboxDraw({displayControlsDefault:!1,controls:{}});function u(e){return l.apply(this,arguments)}function l(){return(l=Object(c.a)(a.a.mark((function n(c){var i,u,l,d,b,m;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s(!1),r.style.display="none",!((i=o.getAll()).features.length>0)){n.next=15;break}return(u=Object(p.a)({},i.features[0])).properties.amount=0,u.properties.created=!0,u.source="createdPoly",l=Object(j.a)(window.turf.centroid(u.geometry).geometry.coordinates,2),d=l[0],b=l[1],m=e.getZoom(),u._vectorTileFeature={_x:Math.floor((d+180)/360*Math.pow(2,m)),_y:Math.floor((1-Math.log(Math.tan(b*Math.PI/180)+1/Math.cos(b*Math.PI/180))/Math.PI)/2*Math.pow(2,m))},n.next=13,R(b,d);case 13:u.properties.name=n.sent,t(u);case 15:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return r.onclick=function(){o.changeMode("draw_polygon"),n.style.display="block",s(!0)},n.onclick=function(){o.deleteAll(),i(),s(!1),r.style.display="block",n.style.display="none"},e.addControl(o),r.style.display="block",n.style.display="none",e.on("draw.create",u),e.on("draw.update",u),o}function we(e,t,r,n,a){e.on("moveend",(function(c){var s,i=e.getCenter(),o=he(i.lng,i.lat,16),u=o.x,l=o.y;if(t((function(e){return s=e,{x:u,y:l}})),s&&(s.x!==u||s.y!==l)){var d,b=new Set([]);a((function(e){d=e;for(var t=r;t>-r-1;t--)for(var n=-r;n<r+1;n++){var a="x"+(u+n)+"y"+(l+t);d.has(a)||b.add(a)}return b.size>10&&Array.from(d.keys()).forEach((function(e){if(b.has(e))return console.log("%c\u29ed it had tilekey","color: #e50000",e);d.delete(e)})),e})),n(b)}}))}O.a.accessToken="pk.eyJ1IjoiaWx5YWl6ciIsImEiOiJja29nNG5rNTkwbGdxMm5sYTFqbXpqbnlpIn0.S4LdF8fBwDtEQ6-dQBrWVw";var ke={standart:"mapbox://styles/ilyaizr/ckq2l808k0ifn17o0x0yl9qi4",dark:"mapbox://styles/ilyaizr/cks1rsp1d3jxs17qo1m3gwxf0","b&w":"mapbox://styles/ilyaizr/ckpk88ybo17tn17mzmd5etst8",blueprint:"mapbox://styles/ilyaizr/cksp4jldx0b1z17mog8wzg0jm"},Ne=function(e){var t=e.feature,r=e.setFeature,n=e.resetRater,i=e.geoData,o=e.setGeoData,u=e.featureTrigger,l=Object(m.c)((function(e){return e.app})),p=Object(d.g)(),f=Object(m.b)(),h=Object(s.useRef)(null),x=Object(s.useRef)(null),g=Object(s.useRef)(null),w=Object(s.useRef)(null),k=Object(s.useState)(!1),N=Object(j.a)(k,2),L=N[0],C=N[1],E=Object(s.useState)({x:null,y:null}),F=Object(j.a)(E,2)[1],M=Object(s.useState)(new Map),I=Object(j.a)(M,2),q=I[0],R=I[1],P=Object(s.useState)(new Set),T=Object(j.a)(P,2),B=T[0],A=T[1];function z(){return _.apply(this,arguments)}function _(){return(_=Object(c.a)(a.a.mark((function e(){var t,r,n,c,s,i,u,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Oe(),r=t.lng,n=t.lat,c=he(r,n,16),s=c.x,i=c.y,F({x:s,y:i}),!l.friendModeId){e.next=9;break}return e.next=6,y(l.friendModeId);case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,v(s-3,s+3,i-3,i+3);case 11:e.t0=e.sent;case 12:return u=e.t0,d=me(u,f,ge,o,q,R),e.abrupt("return",d);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l.friendModeId){e.next=2;break}return e.abrupt("return");case 2:if(!B.size){e.next=7;break}return e.next=5,S(Object(b.a)(B));case 5:me(e.sent,f,ge,o,q,R);case 7:case"end":return e.stop()}}),e)})))()}),[B]),Object(s.useEffect)((function(){x.current,Object(c.a)(a.a.mark((function e(){var t,c,s,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:t=e.sent,c=Oe(),s=c.lng,i=c.lat,x.current=new O.a.Map({container:h.current,style:ke[l.theme],center:[s||34.354,i||53.235],zoom:16}),x.current.addControl(new window.MapboxGeocoder({accessToken:"pk.eyJ1IjoiaWx5YWl6ciIsImEiOiJja29nNG5rNTkwbGdxMm5sYTFqbXpqbnlpIn0.S4LdF8fBwDtEQ6-dQBrWVw",mapboxgl:O.a,placeholder:ge.searchPHolder})),o=ye(x.current,r,g.current,w.current,C,n),W(x.current,t,l.theme),fe(x.current,r,n,o),we(x.current,F,3,A,R),window.geocoderRef=new window.google.maps.Geocoder;case 11:case"end":return e.stop()}}),e)})))();var e=setInterval((function(){var e,t,r=null===(e=x.current)||void 0===e||null===(t=e.getCenter)||void 0===t?void 0:t.call(e);r&&function(e){var t=e.lng,r=e.lat;window.localStorage.setItem("lastLocation",JSON.stringify({lng:t,lat:r}))}(r)}),1e4);return function(){return clearInterval(e)}}),[l.theme]),Object(s.useEffect)((function(){x.current&&Se(x.current,i,"ratedFeaturesSource")}),[u,i]),Object(s.useEffect)((function(){x.current&&Se(x.current,[t||{}],"selectedFeatureSrc")}),[t]),Object(s.useEffect)((function(){"/"!==p.pathname?ue(f):(oe(f),setTimeout((function(){var e;null===(e=x.current)||void 0===e||e.resize()}),0))}),[p.pathname]),Object(s.useEffect)((function(){x.current&&Object(c.a)(a.a.mark((function e(){var t,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.friendModeId){e.next=6;break}return e.next=3,z();case 3:t=e.sent,e.next=12;break;case 6:return e.next=8,y(l.friendModeId);case 8:if("OK"===(r=e.sent).status){e.next=11;break}return e.abrupt("return",be(f,{title:ge.networkError,message:r.msg||JSON.stringify(r)}));case 11:t=je(r.data);case 12:o(t);case 13:case"end":return e.stop()}}),e)})))()}),[l.friendModeId,l.mapKey]),Object(H.jsxs)("div",{children:[Object(H.jsx)("div",{ref:h,className:l.mapHidden?"map-container hidden":"map-container"}),Object(H.jsx)("button",{id:"createBtn",ref:g,className:"mp-bg-light mp-border-primary controlButton",children:Object(H.jsx)("img",{src:"/icons/edit-pen.svg",alt:"draw area"})}),Object(H.jsx)("button",{id:"deleteBtn",ref:w,className:"mp-bg-light mp-border-primary controlButton",children:Object(H.jsx)("img",{src:"/icons/trash.svg",alt:"cancel drawing"})}),L&&Object(H.jsxs)("div",{className:"controlPrompt mp-border-counter mp-bg-light",children:[Object(H.jsx)("h6",{children:ge.drawPromptHeader}),Object(H.jsx)("p",{children:ge.drawPrompt})]})]})};function Se(e,t,r){var n;null===(n=e.getSource(r))||void 0===n||n.setData({type:"FeatureCollection",features:t})}function Le(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=Object(j.a)(window.turf.centroid(t.geometry).geometry.coordinates,2),c=a[0],s=a[1];return e.flyTo({center:[c,s],zoom:r,speed:n}),[c,s]}var Ce=function(e){var t=e.onSubmit,r=Object(m.c)((function(e){return e.app})),n=r.theme,a=r.isLogged,c=_[n],i=Object(m.b)(),o=Object(s.useState)(0),u=Object(j.a)(o,2),l=u[0],d=u[1],p=Object(s.useState)(0),f=Object(j.a)(p,2),O=f[0],h=f[1],x=Object(s.useState)(""),v=Object(j.a)(x,2),g=v[0],y=v[1];function w(){h(l)}function k(){d(0),t(O,g)}function N(e){d(Number(e.target.name))}function S(){d(O)}return Object(H.jsxs)("div",{className:"rater",children:[Object(H.jsxs)("div",{className:"stars",children:[Object(H.jsxs)("h5",{className:"starRating",children:[ge.rating," :"]})," ",Object(H.jsx)("span",{className:"hoverValue mp-dark",children:l+1?l:0}),Object(H.jsx)("br",{}),Object(b.a)(Array(5)).map((function(e,t){return t+=1,Object(H.jsx)("button",{type:"button",name:t,className:t<=(l||O)?"mp-accent starButton":"mp-secondary starButton",onClick:w,onMouseEnter:N,onMouseLeave:S,style:t<=(l||O)?{color:c[l]}:{color:c[0]},children:Object(H.jsx)("span",{className:"star",children:"\u2605"})},t)}))]}),Object(H.jsx)("textarea",{name:"comment",cols:"25",rows:"2",value:g,onInput:function(e){y(e.target.value)},className:"raterComment",placeholder:ge.commentPlacehol}),Object(H.jsxs)("div",{className:"raterBtnContainer",children:[Object(H.jsx)("button",{type:"button",onClick:function(){if(0===Number(O))return le(i,{message:ge.rateZeroModal,acceptAction:k});k()},children:ge.send}),!a&&Object(H.jsx)("div",{className:"subtitle",children:ge.asAnonius})]})]})},Ee=function(e){var t=e.feature,r=e.name,n=e.setName;if(Object(s.useEffect)((function(){(null===t||void 0===t?void 0:t.name)&&n(t.properties.name),console.log("%c\u29ed","color: #d0bfff",t)}),[t,n]),!(null===t||void 0===t?void 0:t.source))return console.log("wtf feature",t),null;if("ratedFeaturesSource"===t.source)return Object(H.jsxs)("div",{className:"featurer",children:[Object(H.jsxs)("p",{className:"rateAmount",children:[ge.placeAmountPrefix+" "+t.properties.amount+" ",String(t.properties.amount).endsWith("1")?ge.placeAmountNumberEnds1:ge.placeAmountEndsMultiple]}),Object(H.jsxs)("h5",{className:"rateValue",children:[ge.placeRatingPrefix,":",Object(H.jsxs)("span",{className:"rateNumber",children:[" ",t.properties.rating]})]}),t.properties.name?Object(H.jsx)("div",{className:"featureNameWrap",children:Object(H.jsx)("p",{className:"featureName mp-bg-dark mp-border-primary mp-light",children:t.properties.name})}):Object(H.jsx)(H.Fragment,{})]});return"createdPoly"===t.source?Object(H.jsxs)("div",{className:"featurer",children:[Object(H.jsx)("p",{className:"featurerGreetings",children:ge.newFeature}),Object(H.jsx)("div",{className:"featureNameWrap",children:Object(H.jsx)("input",{type:"text",value:r,onInput:function(e){n(e.target.value),t.properties.name=e.target.value},placeholder:ge.newFeaturePHolder,title:ge.newFeaturePHolder,className:"featureName mp-bg-counter mp-border-counter  mp-primary"})})]}):Object(H.jsxs)("div",{className:"featurer",children:[Object(H.jsx)("p",{className:"featurerGreetings",children:ge.firstTimeRate}),t.properties.name?Object(H.jsx)("div",{className:"featureNameWrap",children:Object(H.jsx)("p",{className:"featureName mp-bg-counter mp-border-primary  mp-primary",children:t.properties.name})}):Object(H.jsx)(H.Fragment,{})]})};function Fe(e){var t;t="Polygon"===e.type?[e.coordinates]:e.coordinates;var r=-90,n=-180,a=90,c=180,s=[];t.forEach((function(e){s.push(function(e){var t=[];return e.forEach((function(e,s){t.push("("),e.forEach((function(e,i){var o=Object(j.a)(e,2),u=o[0],l=o[1];u<c&&(c=u),u>n&&(n=u),l>r&&(r=l),l<a&&(a=l),t[s]+=(i?", ":"")+String(u)+" "+String(l)})),t[s]+=")"})),"("+t.join(",")+")"}(e))}));var i="MULTIPOLYGON("+s.join(", ")+")";return[[n,r],[c,a],i]}r(28);var Me=function(){var e=Object(m.c)((function(e){return e.app.theme})),t=_[e];return Object(H.jsx)("div",{className:"mapLegend mp-bg-light mp-border-secondary mp-shadow-light",children:Object(H.jsxs)("div",{className:"ratingLegend",children:[Object(H.jsxs)("div",{className:"ratingDescription",children:[Object(H.jsx)("span",{children:ge.worstRating}),Object(H.jsx)("span",{}),Object(H.jsx)("span",{}),Object(H.jsx)("span",{}),Object(H.jsx)("span",{children:ge.bestRating})]}),Object(H.jsx)("div",{className:"ratingUnitsWrap",children:t.map((function(e,t){return Object(H.jsx)("div",{className:"ratingUnit",children:Object(H.jsx)("span",{className:"ratingColor",style:{backgroundColor:e}})},e+t)}))}),Object(H.jsx)("div",{className:"ratingGradientWrap",children:Object(H.jsx)("div",{className:"ratingGradient",style:{background:"linear-gradient(90deg, ".concat(t[0],", ").concat(t[3],", ").concat(t[5],")")}})})]})})},Ie=function(e){var t=e.feature,r=e.updateLayers,n=e.setGeoData,i=Object(m.b)(),o=Object(m.c)((function(e){return e.app})).reviewsShown,u=Object(m.c)((function(e){return e.user.id})),d=Object(s.useState)([]),p=Object(j.a)(d,2),f=p[0],O=p[1];function h(e){var s=e.target.attributes.timestamp.value,o={rating:t.properties.rating,amount:t.properties.amount,grade:e.target.attributes.grade.value,id:t.id};le(i,{message:ge.removeComment+"?",acceptAction:function(){return Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(s,o);case 2:if("OK"===e.sent.status){e.next=5;break}return e.abrupt("return",be(i,{message:ge.requestError}));case 5:O(f.filter((function(e){return e.timestamp+e.author!==s+u}))),t.properties.rating=(o.amount*o.rating-o.grade)/(o.amount-1),t.properties.amount-=1,n((function(e){for(var r=0;r<e.length;r++)if(e[r].id===t.id){var n=t.properties,a=n.amount,c=n.rating;e[r].properties={rating:+((a*c-o.grade)/(a-1)).toFixed(5),amount:a-1};break}return e})),r();case 10:case"end":return e.stop()}}),e)})))()}})}return Object(s.useEffect)((function(){return Object(c.a)(a.a.mark((function e(){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("ratedFeaturesSource"===(null===t||void 0===t?void 0:t.source)){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,k(t.id);case 4:if("OK"===(r=e.sent).status){e.next=7;break}return e.abrupt("return",be(i,{message:ge.requestError}));case 7:O(r.data);case 8:case"end":return e.stop()}}),e)})))(),function(){O([])}}),[null===t||void 0===t?void 0:t.source,null===t||void 0===t?void 0:t.id]),"ratedFeaturesSource"!==(null===t||void 0===t?void 0:t.source)?null:Object(H.jsxs)("div",{className:"reviewsContainer ".concat(o?"expanded":"shrinked"),children:[f.length?f.map((function(e){var t,r;return console.log("%c\u29ed","color: #d90000",e),e.name||(e.name=ge.anonimus),Object(H.jsxs)("div",{className:"reviewWrap mp-border-secondary mp-shadow-light",children:[Object(H.jsx)(l.b,{to:"/friends/user/"+e.author,children:Object(H.jsx)("div",{className:"authorLogo mp-bg-primary",children:Object(H.jsx)("span",{className:"mp-dark",title:e.login,children:null===(t=String(e.name))||void 0===t||null===(r=t[0])||void 0===r?void 0:r.toUpperCase()})})}),Object(H.jsxs)("div",{className:"reviewBody",children:[Object(H.jsx)("p",{className:"author mp-primary",children:e.name}),Object(H.jsxs)("div",{className:"reviewDate mp-secondary",children:[new Date(e.timestamp).toLocaleDateString(),Boolean("anonimus"!==e.author&&e.author===u)&&Object(H.jsx)("label",{onClick:h,className:"deleteComment cursor-pointer",timestamp:e.timestamp,grade:e.grade,children:" \u2715"})]}),Object(H.jsxs)("div",{className:"reviewRating",children:[e.grade,"/5",Object(H.jsx)("span",{className:"reviewStars stars",children:Object(b.a)(Array(5)).map((function(t,r){return r+=1,Object(H.jsx)("span",{className:r<=e.grade?"mp-accent starButton":"mp-secondary starButton",children:"\u2605"},r)}))})]}),Boolean(e.comment)&&Object(H.jsx)("div",{className:"reviewComment ",children:e.comment})]})]},e.author+e.timestamp)})):Object(H.jsx)("div",{children:ge.noreviews}),Object(H.jsx)("div",{className:"skipperContainer",children:Object(H.jsx)("div",{className:"skipper mp-bg-light mp-border-secondary",onClick:function(){o?i({type:V}):function(e){e({type:X})}(i)},children:o?Object(H.jsx)("span",{className:"mp-secondary",children:"\u21a5"}):Object(H.jsx)("span",{className:"mp-secondary",children:"\u21a7"})})})]})},qe=function(){var e=Object(m.c)((function(e){return e.user})),t=Object(m.c)((function(e){return e.app})),r=Object(m.b)(),n=Object(s.useState)(null),i=Object(j.a)(n,2),o=i[0],u=i[1],l=Object(s.useState)(""),d=Object(j.a)(l,2),f=d[0],h=d[1],x=Object(s.useState)(null),v=Object(j.a)(x,2),g=v[0],y=v[1],w=Object(s.useState)(0),k=Object(j.a)(w,2),N=k[0],S=k[1],L=Object(s.useState)(0),E=Object(j.a)(L,2),M=E[0],I=E[1];function q(){S(N+1)}function R(){h(""),u(null)}function P(){return(P=Object(c.a)(a.a.mark((function t(n,c){var s,i,u,l,d,m,h,x,v,w,k,N,S,L,E,P,T,B;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=Fe(o.geometry),i=Object(j.a)(s,3),u=i[0],l=i[1],d=i[2],m=new O.a.LngLatBounds(u,l),h=m.getCenter(),x=h.lng,v=h.lat,w={comment:c,grade:n,targetId:o.id},k={lng:x,lat:v,id:o.id,name:o.properties.name||"",polyString:d},N=he(x,v,16),S=N.x,L=N.y,k.x=S,k.y=L,pe(r,null),"ratedFeaturesSource"!==o.source){t.next=27;break}return t.next=12,F({user:e.id,review:w,place:Object(p.a)(Object(p.a)({},o.properties),{},{id:o.id})});case 12:if("OK"===t.sent.status){t.next=15;break}return t.abrupt("return",be(r,{message:ge.requestError}));case 15:E=0;case 16:if(!(E<g.length)){t.next=24;break}if(g[E].id!==o.id){t.next=21;break}return P=o.properties,T=P.amount,B=P.rating,g[E].properties={rating:+((T*B+w.grade)/(T+1)).toFixed(5),amount:T+1},t.abrupt("break",24);case 21:E++,t.next=16;break;case 24:return y(g),q(),t.abrupt("return",R());case 27:return t.next=29,C({user:e.id,review:w,place:k});case 29:if("OK"===t.sent.status){t.next=32;break}return t.abrupt("return",be(r,{message:ge.requestError}));case 32:y([].concat(Object(b.a)(g),[{type:"Feature",properties:{rating:n,name:f,amount:1},id:o.id,geometry:o.geometry}])),q(),"createdPoly"===o.source&&I(M+1),R();case 36:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(s.useEffect)((function(){oe(r)}),[]),Object(H.jsxs)("div",{className:t.mapHidden?"hidden":"mainWrapper",children:[Object(H.jsx)(Ne,{feature:o,setFeature:u,resetRater:R,geoData:g,setGeoData:y,featureTrigger:N},M),Object(H.jsx)(Me,{}),o&&Object(H.jsxs)("div",{className:"featureContainer mp-bg-light mp-border-secondary",children:[Object(H.jsx)(Ee,{feature:o,name:f,setName:h}),Object(H.jsx)(Ce,{onSubmit:function(e,t){return P.apply(this,arguments)}}),Object(H.jsx)(Ie,{feature:o,updateLayers:q,setGeoData:y}),Object(H.jsx)("div",{className:"closeFeature",onClick:R,children:"\u2715"})]})]})};function Re(e){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x("POST","auth","login",Object(p.a)({},t),!0),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Te=x("GET","auth","refresh",null,!0),Be=x("GET","auth","logout",null,!0);function Ae(e,t){return ze.apply(this,arguments)}function ze(){return(ze=Object(c.a)(a.a.mark((function e(t,r){var n,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+r},body:JSON.stringify(Object(p.a)({},t)),credentials:"include"},e.prev=1,e.next=4,fetch(h+"auth/glogin",n);case 4:return c=e.sent,e.next=7,c.json();case 7:return s=e.sent,e.abrupt("return",s);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}var _e=function(e){var t=e.message,r=void 0===t?"":t,n=e.setMessage,a=e.color,c=void 0===a?"accent":a,s=e.title,i=void 0===s?"":s;if(!r)return null;var o="responser mp-".concat(c," mp-border-").concat(c);return Object(H.jsxs)("div",{className:o,children:[Object(H.jsxs)("div",{className:"header",children:[Object(H.jsx)("h6",{children:i}),Object(H.jsx)("div",{className:"close-cross cursor-pointer mp-".concat(c),onClick:function(){n("")},children:"\u2716"})]}),Object(H.jsx)("p",{children:r})]})},Ge="user/set_credentials",De="user/set_level",Ke="user/set_friends",Ue="user/set_requests",We={name:"anonimus",login:"",level:0,id:"anonimus",comments:0,avatar:null,friends:[],requests:[]},He=Object(p.a)({},We);var Je=function(e,t){e({type:Ge,credentials:Object(p.a)({},t)})},Qe=function(e,t){Je(e,t),ie(e,!0)},Xe=function(e){Je(e,We),ie(e,!1)},Ve=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e({type:Ke,friendsArr:t})},Ze=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e({type:Ue,requestsArr:t})},Ye=function(){var e=Object(m.b)(),t=Object(d.f)(),r=Object(m.c)((function(e){return e.user})),n=Object(m.c)((function(e){return e.app})),i=Object(s.useState)(""),o=Object(j.a)(i,2),u=o[0],l=o[1],b=Object(s.useState)(""),p=Object(j.a)(b,2),f=p[0],O=p[1],h=Object(s.useState)(""),x=Object(j.a)(h,2),v=x[0],g=x[1];function y(){return(y=Object(c.a)(a.a.mark((function r(){var n;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return g(ge.loading+"..."),r.next=3,Re({login:u,pword:f});case 3:if("WRONG"!==(n=r.sent).status){r.next=6;break}return r.abrupt("return",g(ge.wrongAuth));case 6:if("OK"!==n.status){r.next=12;break}return de(e),be(e,{message:ge.greetings+", "+n.data.name,status:"complete",title:null}),g(""),t.push("/"),r.abrupt("return",Qe(e,n.data));case 12:g(ge.errorReg+", "+ge.errCode+": "+(n.msg||n));case 13:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function w(){return(w=Object(c.a)(a.a.mark((function t(){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Be();case 2:if("OK"!==(n=t.sent).status){t.next=9;break}return be(e,{message:ge.farewell+", "+r.name,status:"complete",title:null}),l(""),O(""),g(""),t.abrupt("return",Xe(e));case 9:g(ge.errorReg+", "+ge.errCode+": "+(n.msg||n));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(e){return N.apply(this,arguments)}function N(){return(N=Object(c.a)(a.a.mark((function r(n){var c,s,i;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=n.getBasicProfile(),s={name:c.getName(),avatar:c.getImageUrl(),gmail:c.getEmail()},r.next=4,Ae(s,n.getAuthResponse().id_token);case 4:if("FIRSTTIME"!==(i=r.sent).status){r.next=14;break}return B.token=n.getAuthResponse().id_token,B.name=i.data.name,B.login=i.data.login,i.data.login||(B.occupiedLogin=c.getEmail().split("@")[0]),B.avatar=i.data.avatar,B.id=c.getId(),de(e),r.abrupt("return",t.push("/googleConfirm"));case 14:if("OK"!==i.status){r.next=20;break}return de(e),be(e,{message:ge.greetings+", "+i.data.name,status:"complete",title:null}),g(""),t.push("/"),r.abrupt("return",Qe(e,i.data));case 20:g(ge.errorReg+", "+ge.errCode+": "+(i.msg||i));case 21:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function S(e){console.log("%c\u29ed failed","color: #00a3cc",e),g(ge.errorReg+", "+ge.errCode+": "+JSON.stringify(e))}return Object(s.useEffect)((function(){var t=window.gapi;if(!t)return be(e,{message:ge.networkError});t.load("auth2",(function(){t.auth2.init().then((function(e){e.signOut().then((function(){t.signin2.render("google-signin-button",{width:232,height:40,longtitle:!0,onsuccess:k,onfailure:S})}))}))}))}),[]),Object(H.jsx)("div",{children:n.isLogged?Object(H.jsxs)("div",{children:[Object(H.jsxs)("h4",{children:[ge.greetings,", ",r.name]}),Object(H.jsx)("button",{className:"primary",onClick:function(){return w.apply(this,arguments)},children:ge.logout})]}):Object(H.jsxs)("div",{className:"login-form",children:[Object(H.jsxs)("label",{htmlFor:"name",children:[ge.yourLogin,":"]}),Object(H.jsx)("input",{type:"text",name:"login",value:u,onInput:function(e){l(e.target.value)},autoFocus:!0}),Object(H.jsx)("br",{}),Object(H.jsxs)("label",{htmlFor:"pword",children:[ge.yourPword,":"]}),Object(H.jsx)("input",{type:"password",name:"pword",value:f,onInput:function(e){O(e.target.value)}}),Object(H.jsx)(_e,{message:v,setMessage:g}),Object(H.jsx)("button",{className:"primary mp-border-accent loginBtn",onClick:function(){return y.apply(this,arguments)},children:ge.confirm}),Object(H.jsx)("div",{id:"google-signin-button",className:"google-signin-button g-signin2 google-oauthBtn","data-onsuccess":"onSignIn"})]})})};function $e(e){return et.apply(this,arguments)}function et(){return(et=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x("POST","users","register",Object(p.a)({},t),!0),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tt(e){return rt.apply(this,arguments)}function rt(){return(rt=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x("POST","users","gregister",Object(p.a)({},t),!0),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nt(e){return at.apply(this,arguments)}function at(){return(at=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x("POST","users","update",Object(p.a)({},t),!0),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ct(e){return st.apply(this,arguments)}function st(){return(st=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x("POST","users","updatePword",Object(p.a)({},t),!0),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function it(e){return ot.apply(this,arguments)}function ot(){return(ot=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x("GET","settings","setLang",null,!0,"lang="+t),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ut={login:"",pword:"",name:"",question:ge.secretExample,answer:""},lt=function(){var e=Object(m.b)(),t=Object(d.f)(),r=Object(s.useState)(ut),n=Object(j.a)(r,2),i=n[0],o=n[1],u=Object(s.useState)(""),l=Object(j.a)(u,2),b=l[0],f=l[1],O=Object(s.useRef)(null),h=Object(s.useState)(!1),x=Object(j.a)(h,2),v=x[0],g=x[1];function y(e){o(Object(p.a)(Object(p.a)({},i),{},Object(ve.a)({},e.target.name,e.target.value)))}function w(){return(w=Object(c.a)(a.a.mark((function r(){var n,c,s;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i.login&&i.pword){r.next=2;break}return r.abrupt("return",f(ge.fillRequiredFields));case 2:if(!i.question||i.answer){r.next=6;break}return i.question===ge.secretExample&&g(!0),O.current.focus(),r.abrupt("return",f(ge.secretValidation));case 6:if(!((null===(n=i.question)||void 0===n?void 0:n.length)>300)){r.next=8;break}return r.abrupt("return",f((ge.field+" "+ge.secretQuestion+" "+ge.tooLong).toLocaleLowerCase().capitalize()));case 8:if(!((null===(c=i.answer)||void 0===c?void 0:c.length)>255)){r.next=10;break}return r.abrupt("return",f((ge.field+" "+ge.secterAnswer+" "+ge.tooLong).toLocaleLowerCase().capitalize()));case 10:if(!(i.login.length>50)){r.next=12;break}return r.abrupt("return",f((ge.field+" "+ge.login+" "+ge.tooLong).toLocaleLowerCase().capitalize()));case 12:if(!(i.pword.length>50)){r.next=14;break}return r.abrupt("return",f((ge.field+" "+ge.password+" "+ge.tooLong).toLocaleLowerCase().capitalize()));case 14:if(!(i.name.length>140)){r.next=16;break}return r.abrupt("return",f((ge.field+" "+ge.userName+" "+ge.tooLong).toLocaleLowerCase().capitalize()));case 16:return r.next=18,$e(i);case 18:if("OK"!==(s=r.sent).status){r.next=26;break}f(ge.successfullReg),Qe(e,s.data),o(ut),t.push("/"),r.next=35;break;case 26:if("EXISTING"!==s.status){r.next=30;break}return r.abrupt("return",f(ge.loginOccupied+" - "+i.login));case 30:if("BANEDPWORD"!==s.status){r.next=34;break}return r.abrupt("return",f(ge.bannedPwod+" - "+i.pword));case 34:f(ge.errorReg+", "+ge.errCode+": "+(s.msg||s));case 35:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return Object(H.jsx)("div",{children:Object(H.jsxs)("div",{className:"register-form",children:[Object(H.jsx)("h4",{children:ge.register}),Object(H.jsxs)("label",{htmlFor:"login",children:[ge.login,":"]}),Object(H.jsx)("input",{type:"text",name:"login",value:i.login,onInput:y,autoFocus:!0,required:!0}),Object(H.jsx)("br",{}),Object(H.jsxs)("label",{htmlFor:"name",children:[ge.userName,":"]}),Object(H.jsx)("input",{type:"text",name:"name",value:i.name,onInput:y,required:!0}),Object(H.jsx)("br",{}),Object(H.jsxs)("label",{htmlFor:"pword",children:[ge.password,":"]}),Object(H.jsx)("input",{type:"password",name:"pword",value:i.pword,onInput:y,required:!0}),Object(H.jsx)("br",{}),Object(H.jsx)("br",{}),Object(H.jsxs)("label",{htmlFor:"question",children:[ge.secretQuestion,":"]}),Object(H.jsx)("br",{}),Object(H.jsx)("textarea",{type:"text",name:"question",value:i.question,onInput:y,autoComplete:"false"}),Object(H.jsx)("p",{className:"little-hint",children:ge.secretHint}),Object(H.jsxs)("label",{htmlFor:"answer",children:[ge.secterAnswer,":"]}),Object(H.jsx)("input",{type:"text",name:"answer",value:i.answer,onInput:y,required:Boolean(i.question),ref:O,autoComplete:"false"}),Object(H.jsx)("div",{className:"register-responser",children:Object(H.jsx)(_e,{message:b,setMessage:f})}),v&&Object(H.jsx)("button",{className:"btn-replica mp-border-counter mp-primary-hover",onClick:function(){g(!1),f(ge.secretReplica2),O.current.focus()},children:ge.secretReplica}),Object(H.jsx)("button",{className:"mp-border-accent",type:"button",onClick:function(){return w.apply(this,arguments)},children:ge.submit})]})})},dt=(r(40),function(){var e=Object(m.b)(),t=Object(s.useState)(!0),r=Object(j.a)(t,2),n=r[0],a=r[1];return Object(s.useEffect)((function(){ue(e)}),[]),Object(H.jsx)("div",{className:"auth-container relative",children:Object(H.jsxs)("div",{className:"absolute center auth-subcontainer",children:[n?Object(H.jsx)("h3",{className:"align-center",children:ge.login}):null,Object(H.jsx)("div",{className:"auth-action-wrap mp-border-secondary",children:n?Object(H.jsx)(Ye,{}):Object(H.jsx)(lt,{})}),Object(H.jsx)("div",{className:"align-center",children:n?Object(H.jsx)("button",{className:"small",onClick:function(){return a(!1)},children:ge.register}):Object(H.jsx)("button",{className:"small",onClick:function(){return a(!0)},children:ge.login})})]})})}),bt=(r(41),function(e){var t,r=e.setNavState,n=e.hideSelf,a=Object(m.c)((function(e){return e.user})),c=Object(m.c)((function(e){return e.app}));function s(){n()}return Object(H.jsxs)("div",{className:"left-menu-container",children:[Object(H.jsxs)("div",{className:"menu-user",children:[Object(H.jsx)("div",{className:"menu-avatar mp-bg-counter",children:Object(H.jsx)("div",{className:"letter mp-light",children:(null===(t=a.name)||void 0===t?void 0:t[0])||"?"})}),Object(H.jsxs)("div",{className:"menu-user-subcontainer",children:[Object(H.jsx)("div",{className:"menu-username",children:a.name||"no name"}),Object(H.jsxs)("div",{className:"menu-userlevel",children:[ge.level,": ",Object(H.jsx)("span",{className:"mp-accent",children:a.level})]})]})]}),Object(H.jsx)("div",{children:c.isLogged?Object(H.jsxs)(l.b,{to:"/editProfile",onClick:s,className:"left-menu-item mp-dark",children:[" ",ge.profile]}):Object(H.jsxs)(l.b,{to:"/auth",onClick:s,className:"left-menu-item mp-dark",children:[" ",ge.login]})}),Object(H.jsxs)("div",{onClick:function(){r(xt.theme)},className:"left-menu-item mp-accent-hover pick-theme-item",children:[ge.theme,Object(H.jsxs)("label",{className:"little-hint",children:["(",ge[c.theme],")"]})]}),Object(H.jsx)("div",{onClick:function(){r(xt.language)},className:"left-menu-item mp-accent-hover pick-theme-item",children:ge.language}),Object(H.jsxs)(l.b,{to:"/friends",onClick:s,className:"left-menu-item mp-dark",children:[ge.friends,Boolean(a.requests.length)&&Object(H.jsx)("span",{className:"mp-accent",children:" ("+a.requests.length+")"})]}),Object(H.jsx)("div",{className:"readonly",children:ge.routes}),Object(H.jsx)("div",{className:"readonly",children:ge.aboutUs})]})}),pt=function(e){var t=e.setNavState,r=Object(m.b)(),n=Object(s.useState)(),i=Object(j.a)(n,2),o=i[0],u=i[1];function l(e){return d.apply(this,arguments)}function d(){return(d=Object(c.a)(a.a.mark((function e(t){var n,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.attributes.name.value,e.next=3,it(n);case 3:if("OK"!==(c=e.sent).status){e.next=6;break}return e.abrupt("return",window.location.reload());case 6:be(r,{message:JSON.stringify(c),title:ge.error,status:"error"});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){u(document.documentElement.lang)}),[]),Object(H.jsxs)("div",{className:"left-menu-container lang-nav",children:[Object(H.jsxs)("div",{className:"menu-user theme-menu",children:[Object(H.jsx)("div",{onClick:function(){t(xt.default)},className:"\r menu-avatar cursor-pointer \r mp-bg-accent-hover mp-light-hover\r mp-bg-primary mp-light\r transition",children:Object(H.jsx)("div",{className:"letter",children:"<"})}),Object(H.jsxs)("div",{className:"menu-user-subcontainer",children:[Object(H.jsx)("div",{className:"menu-username",children:ge.pickLanguage}),Object(H.jsxs)("div",{className:"menu-userlevel",children:[ge.language,": ",Object(H.jsx)("span",{className:"mp-accent",children:ge[o]})]})]})]}),Object(H.jsx)("div",{className:"pickTheme-container",children:Object.keys(A).map((function(e,t){return Object(H.jsx)("div",{className:"\n              pickTheme-item mp-border-secondary mp-counter-hover transition-small\n              ".concat(e===o?" current-theme mp-accent mp-border-accent events-none":"","\n              "),name:e,onClick:l,children:ge[e]},e+t)}))})]})};function jt(){var e=window.localStorage.getItem("mp/preferences");return e?JSON.parse(e):null}function mt(){jt()||window.localStorage.setItem("mp/preferences","{}")}function ft(e,t){var r=jt();r[e]=t,window.localStorage.setItem("mp/preferences",JSON.stringify(r))}var Ot,ht=function(e){var t=e.setNavState,r=Object(m.c)((function(e){return e.app})),n=Object(m.b)(),a=Object(s.useState)(T.indexOf(r.theme)),c=Object(j.a)(a,2),i=c[0],o=c[1];function u(e){var t,r,a=e.target.attributes.name.value;o(a),t=n,r=T[a],T.indexOf(r)<0&&(r=T[0]),t({type:te,theme:r}),console.log("%c\u29ed","color: #7f7700","theme switched"),K(T[a]),ft("theme",T[a])}return Object(H.jsxs)("div",{className:"left-menu-container",children:[Object(H.jsxs)("div",{className:"menu-user theme-menu",children:[Object(H.jsx)("div",{onClick:function(){t(xt.default)},className:"\r menu-avatar cursor-pointer \r mp-bg-accent-hover mp-light-hover\r mp-bg-primary mp-light\r transition",children:Object(H.jsx)("div",{className:"letter",children:"<"})}),Object(H.jsxs)("div",{className:"menu-user-subcontainer",children:[Object(H.jsx)("div",{className:"menu-username",children:ge.pickTheme}),Object(H.jsxs)("div",{className:"menu-userlevel",children:[ge.theme,": ",Object(H.jsx)("span",{className:"mp-accent",children:ge[T[i]]})]})]})]}),Object(H.jsx)("div",{className:"pickTheme-container",children:T.map((function(e,t){return Object(H.jsx)("div",{className:"\n              pickTheme-item ".concat(e,"-theme mp-border-secondary mp-counter-hover transition-small\n              ").concat(+t===+i?" current-theme mp-accent mp-border-accent events-none":"","\n              "),name:t,onClick:u,children:ge[e]},e+String(i))}))})]})},xt={default:"default",theme:"theme",language:"language"},vt=function(e){var t=e.leftMenu,r=e.setLeftMenu,n=Object(s.useState)(xt.default),a=Object(j.a)(n,2),c=a[0],i=a[1];function o(){r(!1)}var u="mp-bg-light mp-border-secondary";return Object(H.jsxs)("div",{id:"left-menu",className:t?"active "+u:u,children:[c===xt.default&&Object(H.jsx)(bt,{hideSelf:o,setNavState:i}),c===xt.theme&&Object(H.jsx)(ht,{hideSelf:o,setNavState:i}),c===xt.language&&Object(H.jsx)(pt,{setNavState:i}),Object(H.jsx)("div",{id:"closeLeftAtBottom",children:Object(H.jsx)("button",{onClick:o,children:"x"})})]})},gt=(r(42),["title","titleId"]);function yt(){return(yt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function wt(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function kt(e,t){var r=e.title,n=e.titleId,a=wt(e,gt);return s.createElement("svg",yt({fill:"current",enableBackground:"new 0 0 26 26",viewBox:"0 0 26 26",xmlSpace:"preserve",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,Ot||(Ot=s.createElement("g",null,s.createElement("path",{d:"M24.25,12.25H1.75C1.3359375,12.25,1,12.5859375,1,13s0.3359375,0.75,0.75,0.75h22.5   c0.4140625,0,0.75-0.3359375,0.75-0.75S24.6640625,12.25,24.25,12.25z"}),s.createElement("path",{d:"M1.75,7.75h22.5C24.6640625,7.75,25,7.4140625,25,7s-0.3359375-0.75-0.75-0.75H1.75   C1.3359375,6.25,1,6.5859375,1,7S1.3359375,7.75,1.75,7.75z"}),s.createElement("path",{d:"M24.25,18.25H1.75C1.3359375,18.25,1,18.5859375,1,19s0.3359375,0.75,0.75,0.75h22.5   c0.4140625,0,0.75-0.3359375,0.75-0.75S24.6640625,18.25,24.25,18.25z"}))))}var Nt,St=s.forwardRef(kt),Lt=(r.p,["title","titleId"]);function Ct(){return(Ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Et(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Ft(e,t){var r=e.title,n=e.titleId,a=Et(e,Lt);return s.createElement("svg",Ct({fill:"current",enableBackground:"new 0 0 800 800",id:"Layer_1",viewBox:"0 0 800 800",xmlSpace:"preserve",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,Nt||(Nt=s.createElement("g",null,s.createElement("path",{d:"M417.1,176c9.6-2.1-1.1-22.4-9.6-24.5c-6.4-1.1-18.1,9.6-17.1,16C391.5,173.9,407.5,179.2,417.1,176z"}),s.createElement("path",{d:"M398.9,53.3C208,53.3,52.3,209.1,52.3,400S208,746.7,398.9,746.7S745.6,590.9,745.6,400S589.9,53.3,398.9,53.3z M681.6,400   c0,115.2-69.3,214.4-167.5,258.1c-12.8,2.1-30.9,3.2-68.3,3.2c-42.7-1.1-53.3,13.9-64,21.3c-10.7-1.1-22.4-2.1-33.1-4.3   c-2.1-1.1-4.3-2.1-6.4-3.2c-23.5-14.9-39.5-14.9-48-12.8c-103.5-41.6-177.1-144-177.1-262.4c0-41.6,8.5-80,24.5-115.2   c17.1,62.9-24.5,66.1-24.5,115.2c0,32,21.3,85.3,53.3,134.4c36.3,54.4,83.2,101.3,100.3,97.1c30.9-9.6-70.4-24.5-7.5-139.7   c62.9-116.3-82.1-39.5-103.5-198.4c-7.5-57.6,32-40.5,60.8-83.2c21.3-33.1,64-40.5,58.7-64c17.1-8.5,35.2-14.9,54.4-19.2   c-20.3,18.1-38.4,33.1,3.2,24.5c45.9-9.6,69.3-18.1,72.5-32c25.6,1.1,49.1,4.3,72.5,11.7c-17.1-2.1-49.1-2.1-50.1,20.3   c-2.1,30.9-6.4,42.7-21.3,45.9s-18.1,7.5-18.1,13.9c1.1,19.2,19.2,23.5,49.1,0c29.9-23.5,38.4,7.5,61.9,12.8   c23.5,5.3,20.3-23.5,39.5-16c19.2,7.5,42.7,49.1-17.1,44.8c-59.7-3.2-89.6-20.3-133.3,2.1c-61.9,30.9-51.2,122.7,13.9,121.6   c53.3,0,68.3,2.1,85.3,58.7S480,512,509.9,555.7c29.9,45.9,100.3-82.1,98.1-124.8s55.5-62.9,23.5-113.1   c-32-49.1,6.4-49.1,34.1-20.3C675.2,329.6,681.6,363.7,681.6,400z"}),s.createElement("path",{d:"M602.7,523.7c14.9,5.3,53.3-74.7,36.3-67.2C620.8,464,590.9,519.5,602.7,523.7z"}))))}var Mt=s.forwardRef(Ft),It=(r.p,function(){var e=Object(m.c)((function(e){return e.app})),t=Object(m.c)((function(e){return e.user.friends})),r=Object(s.useState)(!1),n=Object(j.a)(r,2),a=n[0],c=n[1],i=Object(d.f)();return Object(H.jsxs)("div",{className:"mainNavigation mp-bg-light mp-border-secondary mp-shadow-primary",children:[Object(H.jsx)(vt,{leftMenu:a,setLeftMenu:c}),Object(H.jsxs)("div",{className:"flex-wrap nav-menu-back-wrap",children:[e.mapHidden&&Object(H.jsx)("div",{id:"backToMain",className:"nav-icon",onClick:function(){c(!1),i.push("/")},title:ge.toMain,children:Object(H.jsx)(Mt,{fill:"var(--accent)"})}),Object(H.jsx)("div",{id:"openLeftMenu",className:"nav-icon",onClick:function(){c(!0)},title:ge.menu,children:Object(H.jsx)(St,{fill:"var(--primary)"})}),Object(H.jsxs)(l.b,{to:"/watchMode",children:[Object(H.jsxs)("span",{className:"mp-dark",children:[ge.watchMode+": "," "]}),Object(H.jsx)("span",{className:"mp-counter",children:e.friendModeId?function(){var r=t.find((function(t){return t.id===e.friendModeId}));return r.name+" ("+r.login+")"}():ge.default})]})]})]})}),qt=function(){var e=Object(m.c)((function(e){return e.app.modal})),t=Object(m.b)(),r=void 0!==e.acceptLabel?e.acceptLabel:ge.acceptDefault,n=void 0!==e.cancelLabel?e.cancelLabel:ge.cancelDefault;function s(){return(s=Object(c.a)(a.a.mark((function r(){var n;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,null===(n=e.cancelAction)||void 0===n?void 0:n.call(e);case 2:de(t);case 3:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function i(){return(i=Object(c.a)(a.a.mark((function r(){var n;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,null===(n=e.acceptAction)||void 0===n?void 0:n.call(e);case 2:de(t);case 3:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return e?Object(H.jsx)("div",{className:"modal-dialog-wrap",children:Object(H.jsx)("div",{className:"modal-dialog mp-border-dark mp-bg-light",children:Object(H.jsxs)("div",{className:"modal-dialog-content mp-dark",children:[Object(H.jsx)("div",{className:"modal-content",children:e.message}),Boolean(e.children)&&e.children,Object(H.jsxs)("div",{className:"modal-buttons",children:[Boolean(n)&&Object(H.jsx)("button",{className:"modal-cancel",onClick:function(){return s.apply(this,arguments)},children:n}),Boolean(r)&&Object(H.jsx)("button",{className:"modal-accept",onClick:function(){return i.apply(this,arguments)},children:r})]})]})})}):null},Rt={login:"",pword:"",name:"",question:"",answer:""},Pt=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.user})),r=Object(d.f)(),n=Object(s.useState)(Rt),i=Object(j.a)(n,2),o=i[0],u=i[1],l=Object(s.useState)(!1),b=Object(j.a)(l,2),f=b[0],O=b[1],h=Object(s.useState)(""),x=Object(j.a)(h,2),v=x[0],g=x[1];function y(e){u(Object(p.a)(Object(p.a)({},o),{},Object(ve.a)({},e.target.name,e.target.value)))}function w(){return(w=Object(c.a)(a.a.mark((function t(r){var n,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),o.login&&o.name){t.next=3;break}return t.abrupt("return",g(ge.fillRequiredFields));case 3:if(!(o.login.length>50)){t.next=5;break}return t.abrupt("return",g((ge.field+" "+ge.login+" "+ge.tooLong).toLocaleLowerCase().capitalize()));case 5:if(!(o.pword.length>50)){t.next=7;break}return t.abrupt("return",g((ge.field+" "+ge.password+" "+ge.tooLong).toLocaleLowerCase().capitalize()));case 7:if(!(o.name.length>140)){t.next=9;break}return t.abrupt("return",g((ge.field+" "+ge.userName+" "+ge.tooLong).toLocaleLowerCase().capitalize()));case 9:if(!f){t.next=22;break}return t.next=12,ct(o);case 12:if("OK"!==(n=t.sent).status){t.next=19;break}return g(ge.successfulUpdate),O(!1),t.abrupt("return",Qe(e,n.data));case 19:if("BANEDPWORD"!==n.status){t.next=21;break}return t.abrupt("return",g(ge.bannedPwod+" - "+o.pword));case 21:return t.abrupt("return",g(ge.errCode+": "+(n.msg||n)));case 22:return t.next=24,nt(o);case 24:if(c=t.sent,console.log("%c\u29ed","color: #514080",c),"OK"!==c.status){t.next=31;break}return g(ge.successfulUpdate),t.abrupt("return",Qe(e,c.data));case 31:if("EXISTING"!==c.status){t.next=35;break}return t.abrupt("return",g(ge.loginOccupied+" - "+o.login));case 35:if("PWORDCHANGE"!==c.status){t.next=41;break}return O(!0),u(Object(p.a)(Object(p.a)({},o),{},{question:c.data.question})),t.abrupt("return",g(ge.secretChallenge));case 41:g(ge.errCode+": "+(c.msg||c));case 42:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(){return(k=Object(c.a)(a.a.mark((function n(){var c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Be();case 2:if("OK"!==(c=n.sent).status){n.next=9;break}return u(Rt),g(""),be(e,{message:ge.farewell+", "+t.name,status:"complete",title:""}),Xe(e),n.abrupt("return",r.push("/"));case 9:g(ge.errCode+": "+(c.msg||c));case 10:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(s.useEffect)((function(){return t.id&&u((function(e){return Object(p.a)(Object(p.a)({},e),{},{name:t.name,login:t.login,avatar:t.avatar})})),function(){u(Rt)}}),[t]),Object(s.useEffect)((function(){ue(e)}),[]),Object(H.jsx)("div",{className:"edit-profile-area relative ",children:Object(H.jsxs)("div",{className:"edit-profile-wrapper absolute center mp-border-secondary",children:[Object(H.jsxs)("form",{className:"edit-profile ",children:[Object(H.jsx)("h4",{children:ge.editProfile}),Object(H.jsxs)("label",{htmlFor:"login",children:[ge.login,":"]}),Object(H.jsx)("input",{type:"text",name:"login",value:o.login,onInput:y,autoFocus:!0,required:!0}),Object(H.jsx)("br",{}),Object(H.jsxs)("label",{htmlFor:"name",children:[ge.userName,":"]}),Object(H.jsx)("input",{type:"text",name:"name",value:o.name,onInput:y,autoFocus:!0,required:!0}),Object(H.jsx)("br",{}),Object(H.jsxs)("label",{htmlFor:"pword",children:[ge.password,":"]}),Object(H.jsx)("input",{type:"password",name:"pword",value:o.pword,onInput:y}),Object(H.jsx)("br",{}),Object(H.jsx)("br",{}),f&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)("label",{htmlFor:"question",children:[ge.secretQuestion,":"]}),Object(H.jsx)("br",{}),Object(H.jsx)("textarea",{type:"text",name:"question",value:o.question,onInput:y,autoComplete:"false",readOnly:!0}),Object(H.jsx)("br",{}),Object(H.jsxs)("label",{htmlFor:"answer",children:[ge.secterAnswer,":"]}),Object(H.jsx)("input",{type:"text",name:"answer",value:o.answer,onInput:y,required:Boolean(o.question),autoComplete:"false"}),Object(H.jsx)("br",{})]}),Object(H.jsx)(_e,{message:v,setMessage:g})]}),Object(H.jsx)("hr",{className:"mp-border-secondary"}),Object(H.jsxs)("div",{className:"logout-container",children:[Object(H.jsx)("button",{className:"mp-border-secondary profile-logout",onClick:function(){return k.apply(this,arguments)},children:ge.logout}),Object(H.jsx)("button",{className:"mp-border-accent",onClick:function(e){return w.apply(this,arguments)},children:ge.submit})]})]})})},Tt=function(){var e=Object(m.b)(),t=Object(d.f)(),r=Object(s.useState)(Object(p.a)({},B)),n=Object(j.a)(r,2),i=n[0],o=n[1],u=Object(s.useState)(""),l=Object(j.a)(u,2),b=l[0],f=l[1];function O(e){o(Object(p.a)(Object(p.a)({},i),{},Object(ve.a)({},e.target.name,e.target.value)))}function h(){return(h=Object(c.a)(a.a.mark((function r(){var n,c;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(i.login.length>50)){r.next=2;break}return r.abrupt("return",f((ge.field+" "+ge.login+" "+ge.tooLong).toLocaleLowerCase().capitalize()));case 2:if(!(i.name.length>140)){r.next=4;break}return r.abrupt("return",f((ge.field+" "+ge.userName+" "+ge.tooLong).toLocaleLowerCase().capitalize()));case 4:return delete(n=Object(p.a)({},i)).occupiedLogin,r.next=8,tt(n);case 8:if(c=r.sent,console.log("%c\u29ed","color: #0088cc",c),"OK"!==c.status){r.next=19;break}f(ge.successfullReg),Qe(e,c.data),console.log("%c\u29ed","color: #00b300",B),Object.keys(B).forEach((function(e){B.key=null})),o(B),t.push("/"),r.next=28;break;case 19:if("EXISTING"!==c.status){r.next=23;break}return r.abrupt("return",f(ge.loginOccupied+" - "+i.login));case 23:if("BANEDPWORD"!==c.status){r.next=27;break}return r.abrupt("return",f(ge.bannedPwod+" - "+i.pword));case 27:f(ge.errorReg+", "+ge.errCode+": "+(c.msg||c));case 28:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return Object(s.useEffect)((function(){o(B)}),[]),Object(H.jsx)("div",{className:"auth-container relative",children:Object(H.jsx)("div",{className:"absolute center auth-subcontainer",children:Object(H.jsxs)("div",{className:"google-regform mp-border-secondary",children:[Object(H.jsx)("h4",{children:ge.oauthTitle}),Object(H.jsxs)("label",{htmlFor:"login",children:[ge.login,":"]}),Object(H.jsx)("input",{type:"text",name:"login",value:i.login,onInput:O,required:!0}),B.occupiedLogin&&Object(H.jsx)("p",{className:"little-hint",children:ge.login+" "+B.occupiedLogin+" "+ge.occupied}),Object(H.jsx)("br",{}),Object(H.jsxs)("label",{htmlFor:"name",children:[ge.userName,":"]}),Object(H.jsx)("input",{type:"text",name:"name",value:i.name,onInput:O,required:!0}),Object(H.jsx)("br",{}),Object(H.jsx)(_e,{message:b,setMessage:f}),Object(H.jsx)("button",{className:"mp-border-accent",type:"button",onClick:function(){return h.apply(this,arguments)},children:ge.confirm})]})})})},Bt=function(){var e=Object(m.c)((function(e){return e.app.toast})),t=Object(m.b)(),r=Object(s.useState)(null),n=Object(j.a)(r,2),a=n[0],c=n[1],i=Object(s.useRef)(null);if(Object(s.useEffect)((function(){var e=setTimeout((function(){c("opaque")}),4e3);return(null===i||void 0===i?void 0:i.current)&&(i.current.onmouseover=function(e){return c(null)}),function(){clearTimeout(e)}}),[]),!e.message)return null;var o="accent",u="dark",l="light",d="accent",b=void 0!==e.title?e.title:ge.error;return"info"===e.status?(o="counter",u="dark",l="light",d="counter",b=""):"warning"===e.status?(o="counter",u="accent",l="light",d="accent",b=void 0!==e.title?e.title:ge.warning+"!"):"complete"===e.status&&(o="counter",u="dark",l="light",d="counter",b=void 0!==e.title?e.title:ge.complete+"!"),Object(H.jsxs)("div",{className:"mp-toast mp-".concat(o," mp-bg-").concat(l," mp-border-").concat(d," cursor-pointer ").concat(a),onClick:function(){e.clickAction&&e.clickAction(),t({type:ne})},ref:i,children:[Object(H.jsx)("div",{className:"toast-header",children:b?Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("h6",{children:b}),Object(H.jsx)("div",{className:"close-cross mp-".concat(u),children:"\u2716"})]}):Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("p",{className:"mp-".concat(u),children:e.message}),Object(H.jsx)("div",{className:"close-cross mp-".concat(o),children:"\u2716"})]})}),Boolean(b)&&Object(H.jsx)("div",{className:"toast-contetnt mp-".concat(u),children:e.message}),Object(H.jsx)("div",{className:"toast-bottom"})]},e.key)},At={login:"",pword:"",name:"",question:ge.secretExample,answer:""},zt=function(){var e=Object(m.b)(),t=Object(d.f)(),r=Object(m.c)((function(e){return e.user})),n=Object(d.g)().search,i=Object(s.useState)(At),o=Object(j.a)(i,2),u=o[0],l=o[1],b=Object(s.useState)(""),f=Object(j.a)(b,2),O=f[0],h=f[1],x=Object(s.useRef)(null),v=Object(s.useState)(!1),g=Object(j.a)(v,2),y=g[0],w=g[1];function k(e){l(Object(p.a)(Object(p.a)({},u),{},Object(ve.a)({},e.target.name,e.target.value)))}function N(){return(N=Object(c.a)(a.a.mark((function r(){var n,c,s;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(u.login){r.next=2;break}return r.abrupt("return",h(ge.fillRequiredFields));case 2:if(!u.question||u.answer){r.next=6;break}return u.question===ge.secretExample&&w(!0),x.current.focus(),r.abrupt("return",h(ge.secretValidation));case 6:if(!((null===(n=u.question)||void 0===n?void 0:n.length)>300)){r.next=8;break}return r.abrupt("return",h((ge.field+" "+ge.secretQuestion+" "+ge.tooLong).toLocaleLowerCase().capitalize()));case 8:if(!((null===(c=u.answer)||void 0===c?void 0:c.length)>255)){r.next=10;break}return r.abrupt("return",h((ge.field+" "+ge.secterAnswer+" "+ge.tooLong).toLocaleLowerCase().capitalize()));case 10:if(!(u.login.length>50)){r.next=12;break}return r.abrupt("return",h((ge.field+" "+ge.login+" "+ge.tooLong).toLocaleLowerCase().capitalize()));case 12:if(!(u.name.length>140)){r.next=14;break}return r.abrupt("return",h((ge.field+" "+ge.userName+" "+ge.tooLong).toLocaleLowerCase().capitalize()));case 14:return r.next=16,$e(u);case 16:if("OK"!==(s=r.sent).status){r.next=24;break}h(ge.successfullReg),Qe(e,s.data),l(At),t.push("/"),r.next=33;break;case 24:if("EXISTING"!==s.status){r.next=28;break}return r.abrupt("return",h(ge.loginOccupied+" - "+u.login));case 28:if("BANEDPWORD"!==s.status){r.next=32;break}return r.abrupt("return",h(ge.bannedPwod+" - "+u.pword));case 32:h(ge.errorReg+", "+ge.errCode+": "+(s.msg||s));case 33:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return Object(s.useEffect)((function(){return Object(c.a)(a.a.mark((function t(){var c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.id){t.next=5;break}return t.next=3,Be();case 3:"OK"===t.sent.status?Xe(e):h("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438");case 5:c=new URLSearchParams(n),l(Object(p.a)(Object(p.a)({},u),{},{login:c.get("login"),name:c.get("name"),level:c.get("level")}));case 7:case"end":return t.stop()}}),t)})))(),function(){l(At)}}),[]),Object(H.jsx)("div",{className:"auth-container relative",children:Object(H.jsx)("div",{className:"absolute center auth-subcontainer",children:Object(H.jsx)("div",{className:"auth-action-wrap mp-border-secondary",children:Object(H.jsxs)("div",{className:"register-form",children:[Object(H.jsx)("h4",{children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435, \u0431\u0435\u0437 \u0441\u043c\u0441"}),Object(H.jsxs)("label",{htmlFor:"login",children:[ge.login,":"]}),Object(H.jsx)("input",{type:"text",name:"login",value:u.login,onInput:k,autoFocus:!0,required:!0}),Object(H.jsx)("br",{}),Object(H.jsxs)("label",{htmlFor:"name",children:[ge.userName,":"]}),Object(H.jsx)("input",{type:"text",name:"name",value:u.name,onInput:k,required:!0}),Object(H.jsx)("br",{}),Object(H.jsxs)("label",{htmlFor:"pword",children:[ge.password,":"]}),Object(H.jsx)("input",{type:"password",placeholder:"\u043f\u0430\u0440\u043e\u043b\u044c \u043d\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u0435\u043d",name:"pword",value:u.pword,onInput:k,required:!0}),Object(H.jsx)("br",{}),Object(H.jsx)("br",{}),Object(H.jsxs)("label",{htmlFor:"question",children:[ge.secretQuestion,":"]}),Object(H.jsx)("br",{}),Object(H.jsx)("textarea",{type:"text",name:"question",value:u.question,onInput:k,autoComplete:"false"}),Object(H.jsx)("p",{className:"little-hint",children:ge.secretHint}),Object(H.jsxs)("label",{htmlFor:"answer",children:[ge.secterAnswer,":"]}),Object(H.jsx)("input",{type:"text",name:"answer",value:u.answer,onInput:k,required:Boolean(u.question),ref:x,autoComplete:"false"}),Object(H.jsx)("div",{className:"register-responser",children:Object(H.jsx)(_e,{message:O,setMessage:h})}),y&&Object(H.jsx)("button",{className:"btn-replica mp-border-counter mp-primary-hover",onClick:function(){w(!1),h(ge.secretReplica2),x.current.focus()},children:ge.secretReplica}),Object(H.jsx)("button",{className:"mp-border-accent",type:"button",onClick:function(){return N.apply(this,arguments)},children:ge.submit})]})})})})},_t=window.location.origin+"/friends/addByLink?id=",Gt=function(){var e=Object(d.f)(),t=Object(m.c)((function(e){return e.user})),r=t.id,n=t.friends,a=t.requests;function c(t){e.push("/friends/user/".concat(t))}return Object(H.jsxs)("div",{className:"friendsDefault",children:[Object(H.jsx)("h4",{children:ge.friendList}),Object(H.jsx)("div",{className:"friendList",children:Boolean(null===n||void 0===n?void 0:n.length)?n.map((function(e){var t,r;return Object(H.jsx)("div",{className:"friendContainer",children:Object(H.jsxs)("div",{className:"resultUser cursor-pointer mp-accent-hover transition-small",onClick:function(){return c(e.id)},children:[Object(H.jsx)("div",{className:"authorLogo mp-bg-secondary",children:Object(H.jsx)("span",{className:"mp-dark",title:e.login,children:null===(t=String(e.name))||void 0===t||null===(r=t[0])||void 0===r?void 0:r.toUpperCase()})}),Object(H.jsxs)("div",{className:"resultUser-creds",children:[Object(H.jsx)("p",{className:"mp-secondary",children:e.name}),Object(H.jsxs)("label",{className:"cursor-pointer",children:["(",e.login,")"]})]})]},e.id)},e.id1+e.id2)})):Object(H.jsx)("div",{className:"noFriendsCase",children:Object(H.jsx)("h5",{children:ge.sadlyNoFriends})})}),Object(H.jsx)("h4",{children:Boolean(null===a||void 0===a?void 0:a.length)&&ge.friendRequests}),Boolean(null===a||void 0===a?void 0:a.length)&&Object(H.jsx)("div",{className:"friendList",children:Boolean(null===a||void 0===a?void 0:a.length)&&a.map((function(e){var t,r;return Object(H.jsx)("div",{className:"friendContainer",children:Object(H.jsxs)("div",{className:"resultUser cursor-pointer mp-accent-hover transition-small",onClick:function(){return c(e.id)},children:[Object(H.jsx)("div",{className:"authorLogo mp-bg-secondary",children:Object(H.jsx)("span",{className:"mp-dark",title:e.login,children:null===(t=String(e.name))||void 0===t||null===(r=t[0])||void 0===r?void 0:r.toUpperCase()})}),Object(H.jsxs)("div",{className:"resultUser-creds",children:[Object(H.jsx)("p",{className:"mp-secondary",children:e.name}),Object(H.jsxs)("label",{className:"cursor-pointer",children:["(",e.login,")"]})]})]},e.id)},e.id1+e.id2)}))}),Object(H.jsxs)("div",{className:"addMeLink",children:[Object(H.jsx)("h4",{children:ge.addMeLink}),Object(H.jsx)("input",{type:"text",value:_t+r,onFocus:function(e){e.target.select()},readOnly:!0})]}),Object(H.jsx)(l.b,{to:"/friends/addByLink",children:Object(H.jsx)("button",{className:"button",children:ge.addByLink})})]})};function Dt(){return Kt.apply(this,arguments)}function Kt(){return(Kt=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x("GET","friends","all",null,!0),e.next=3,t();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ut(){return Wt.apply(this,arguments)}function Wt(){return(Wt=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x("GET","friends","requests",null,!0),e.next=3,t();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ht(e){return Jt.apply(this,arguments)}function Jt(){return(Jt=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x("GET","friends","search",null,!0,"input="+t),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qt(e){return Xt.apply(this,arguments)}function Xt(){return(Xt=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x("GET","friends","details",null,!0,"id="+t),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vt(e){return Zt.apply(this,arguments)}function Zt(){return(Zt=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x("GET","friends","add",null,!0,"id="+t),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yt(e){return $t.apply(this,arguments)}function $t(){return($t=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x("GET","friends","remove",null,!0,"id="+t),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function er(e){return tr.apply(this,arguments)}function tr(){return(tr=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x("GET","friends","accept",null,!0,"id="+t),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rr(e){return nr.apply(this,arguments)}function nr(){return(nr=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x("GET","friends","addByLink",null,!0,"id="+t),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ar=function(e){return e.loading?Object(H.jsx)("div",{children:"Loading anmation..."}):null},cr=function(){var e=Object(d.h)().userId,t=Object(m.b)(),r=Object(m.c)((function(e){return e.user})),n=Object(s.useState)(null),i=Object(j.a)(n,2),o=i[0],u=i[1],b=Object(s.useState)(!0),f=Object(j.a)(b,2),O=f[0],h=f[1],x=Object(s.useState)(Object(H.jsx)("button",{className:"button",onClick:function(){return w.apply(this,arguments)},children:ge.addFriend})),v=Object(j.a)(x,2),g=v[0],y=v[1];if(Object(s.useEffect)((function(){Object(c.a)(a.a.mark((function n(){var c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.id!==e){n.next=4;break}return u(Object(p.a)({},r)),y(Object(H.jsx)(l.b,{to:"/editProfile",children:Object(H.jsx)("button",{className:"button",children:ge.profile})})),n.abrupt("return",h(!1));case 4:return n.next=6,Qt(e);case 6:"OK"!==(c=n.sent).status?be(t,{message:ge.requestError}):u(c.data),h(!1);case 9:case"end":return n.stop()}}),n)})))()}),[e]),Object(s.useEffect)((function(){(null===o||void 0===o?void 0:o.friendStatus)&&("friends"===o.friendStatus?y(Object(H.jsxs)("div",{children:[Object(H.jsx)(l.b,{to:"/friends",children:Object(H.jsx)("button",{className:"button",children:ge.inFriendlist})}),Object(H.jsx)("button",{className:"button mp-border-counter",onClick:k,children:ge.removeFriend})]})):"youRequested"===o.friendStatus?y(Object(H.jsx)("button",{className:"button mp-border-secondary mp-secondary",children:ge.youRequested})):"youAsked"===o.friendStatus&&y(Object(H.jsx)("button",{className:"button mp-border-accent",onClick:S,children:ge.confirmRequest})))}),[null===o||void 0===o?void 0:o.friendStatus]),O)return Object(H.jsx)("div",{className:"profileContainer",children:Object(H.jsx)(ar,{loading:O})});function w(){return(w=Object(c.a)(a.a.mark((function r(){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Vt(e);case 2:if("OK"===r.sent.status){r.next=5;break}return r.abrupt("return",be(t,{message:ge.requestError}));case 5:y(Object(H.jsx)("button",{className:"button",children:ge.sent}));case 6:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function k(){return N.apply(this,arguments)}function N(){return(N=Object(c.a)(a.a.mark((function r(){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Yt(e);case 2:if("OK"===r.sent.status){r.next=5;break}return r.abrupt("return",be(t,{message:ge.requestError}));case 5:u(Object(p.a)(Object(p.a)({},o),{},{friendStatus:"youAsked"}));case 6:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function S(){return L.apply(this,arguments)}function L(){return(L=Object(c.a)(a.a.mark((function r(){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,er(e);case 2:if("OK"===r.sent.status){r.next=5;break}return r.abrupt("return",be(t,{message:ge.requestError}));case 5:u(Object(p.a)(Object(p.a)({},o),{},{friendStatus:"friends"}));case 6:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return o?Object(H.jsxs)("div",{className:"profileContainer",children:[Object(H.jsxs)("div",{className:"userProfile mp-border-dark",children:[Boolean(o.avatar)&&Object(H.jsx)("div",{className:"avatar",children:Object(H.jsx)("img",{src:o.avatar,alt:ge.avatar})}),Object(H.jsxs)("div",{className:"mp-primary credentials ",title:ge.userName,children:[o.name," ",Object(H.jsxs)("label",{className:"mp-dark",title:ge.login,children:["(",o.login,")"]})]}),Boolean(o.commentsn+1)&&Object(H.jsxs)("div",{className:"commentsn",children:[ge.commentsn,": ",o.commentsn]}),Object(H.jsxs)("div",{className:"level capitalize",children:[ge.level,": ",Object(H.jsx)("label",{className:"mp-dark",children:o.level})]})]}),Object(H.jsx)("div",{className:"friends-actionButton",children:g})]}):Object(H.jsx)("div",{className:"profileContainer",children:Object(H.jsx)("div",{className:"userProfile mp-border-dark",children:Object(H.jsx)("p",{children:ge.noResults})})})},sr=function(e){var t=e.searchResults,r=new URLSearchParams(Object(d.g)().search).get("query"),n=Object(d.f)();if(!t)return null;if(!t.length)return Object(H.jsx)("div",{className:"resultsContainer",children:Object(H.jsx)("h5",{children:ge.noResults})});return Object(H.jsx)("div",{className:"resultsContainer",children:t.map((function(e){var t,a;return Object(H.jsxs)("div",{className:"resultUser cursor-pointer mp-accent-hover transition-small",onClick:function(){return t=e.id,void n.push("/friends/user/".concat(t,"?from=").concat(r));var t},children:[Object(H.jsx)("div",{className:"authorLogo mp-bg-secondary",children:Object(H.jsx)("span",{className:"mp-dark",title:e.login,children:null===(t=String(e.name))||void 0===t||null===(a=t[0])||void 0===a?void 0:a.toUpperCase()})}),Object(H.jsxs)("div",{className:"resultUser-creds",children:[Object(H.jsx)("p",{className:"mp-secondary",children:e.name}),Object(H.jsxs)("label",{className:"cursor-pointer",children:["(",e.login,")"]})]})]},e.id)}))})},ir=function(e){var t=e.setSearchResults,r=Object(m.b)(),n=Object(d.f)(),i=Object(s.useState)(""),o=Object(j.a)(i,2),u=o[0],l=o[1];function b(){return p.apply(this,arguments)}function p(){return(p=Object(c.a)(a.a.mark((function e(){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ht(u);case 2:if("OK"===(c=e.sent).status){e.next=5;break}return e.abrupt("return",be(r,{message:ge.requestError}));case 5:t(c.data),n.push("/friends/search?query="+u);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(H.jsxs)("div",{className:"searchContainer transition",children:[Object(H.jsx)("div",{onClick:function(){n.goBack()},className:"backButton",children:Object(H.jsx)("button",{className:"button mp-primary",children:"<<"})}),Object(H.jsx)("label",{htmlFor:"search"}),Object(H.jsx)("input",{type:"text",name:"search",value:u,onInput:function(e){l(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&b()}}),Object(H.jsx)("button",{onClick:b,children:"searchPH"})]})},or=(r(43),function(){var e=new URLSearchParams(Object(d.g)().search).get("id"),t=Object(m.b)(),r=Object(s.useState)(null),n=Object(j.a)(r,2),i=n[0],o=n[1],u=Object(s.useState)(!0),b=Object(j.a)(u,2),p=b[0],f=b[1],O=Object(s.useState)(""),h=Object(j.a)(O,2),x=h[0],v=h[1];var g=Object(s.useState)(!1),y=Object(j.a)(g,2),w=y[0],k=y[1];function N(){return S.apply(this,arguments)}function S(){return(S=Object(c.a)(a.a.mark((function e(){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rr(i);case 2:if(r=e.sent,console.log("%c\u29ed","color: #00e600",r),"OK"===r.status){e.next=6;break}return e.abrupt("return",be(t,{message:ge.requestError}));case 6:be(t,{message:ge.yourFriendsNow,status:"complete"}),k(!0);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){e&&o(e)}),[]),Object(s.useEffect)((function(){Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return");case 2:return console.log("%c\u29ed id run","color: #733d00",i),e.next=5,N();case 5:f(!1);case 6:case"end":return e.stop()}}),e)})))()}),[i]),e&&p?Object(H.jsx)(ar,{loading:p}):Object(H.jsxs)("div",{className:"addByLink",children:[Object(H.jsx)("h4",{children:ge.addByLink}),w?Object(H.jsx)("div",{children:Object(H.jsx)(l.b,{to:"/friends",children:Object(H.jsx)("button",{className:"button",children:ge.goBack})})}):Object(H.jsxs)("div",{className:"field",children:[Object(H.jsx)("label",{htmlFor:"link",children:ge.pasteAddLink}),Object(H.jsx)("input",{type:"text",value:x,onInput:function(e){var t=e.target.value;if(v(t),null===t||void 0===t?void 0:t.includes("id")){var r=new URLSearchParams(t.split("?")[1]);r.get("id")&&o(r.get("id"))}},readOnly:w})]})]})}),ur=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.app})),r=Object(s.useState)(null),n=Object(j.a)(r,2),a=n[0],c=n[1];return Object(s.useEffect)((function(){ue(e)}),[]),t.isLogged?Object(H.jsxs)("div",{children:[Object(H.jsx)(ir,{setSearchResults:c}),Object(H.jsxs)(d.c,{children:[Object(H.jsx)(d.a,{exact:!0,path:"/friends",children:Object(H.jsx)(Gt,{})}),Object(H.jsx)(d.a,{path:"/friends/user/:userId",children:Object(H.jsx)(cr,{})}),Object(H.jsx)(d.a,{path:"/friends/search",children:Object(H.jsx)(sr,{searchResults:a})}),Object(H.jsx)(d.a,{path:"/friends/addByLink",children:Object(H.jsx)(or,{})})]})]}):Object(H.jsx)("div",{className:"friendsNotLoggedWrap auth-container relative",children:Object(H.jsx)("div",{className:"absolute center auth-subcontainer",children:Object(H.jsxs)("div",{className:"auth-action-wrap mp-border-secondary",children:[Object(H.jsx)("p",{children:ge.loginToUseThis}),Object(H.jsx)(l.b,{to:"/auth",children:Object(H.jsx)("button",{className:"primary mp-border-accent loginBtn capitalize",children:ge.authorization})})]})})})},lr=function(){var e=Object(m.b)(),t=Object(d.f)(),r=Object(m.c)((function(e){return e.user})).friends;return Object(s.useEffect)((function(){ue(e)}),[]),Object(H.jsxs)("div",{className:"watchMode",children:[Object(H.jsx)("h4",{children:ge.watchMode}),Object(H.jsx)("p",{className:"subtitle",children:ge.watchModeSub1}),Object(H.jsx)("div",{className:"friendList",children:Boolean(null===r||void 0===r?void 0:r.length)?r.map((function(r){var n,a;return Object(H.jsx)("div",{className:"friendContainer",children:Object(H.jsxs)("div",{className:"resultUser cursor-pointer mp-accent-hover transition-small",onClick:function(){return n=r.id,t.push("/"),void pe(e,n);var n},children:[Object(H.jsx)("div",{className:"authorLogo mp-bg-secondary",children:Object(H.jsx)("span",{className:"mp-dark",title:r.login,children:null===(n=String(r.name))||void 0===n||null===(a=n[0])||void 0===a?void 0:a.toUpperCase()})}),Object(H.jsxs)("div",{className:"resultUser-creds",children:[Object(H.jsx)("p",{className:"mp-secondary",children:r.name}),Object(H.jsxs)("label",{className:"cursor-pointer",children:["(",r.login,")"]})]})]},r.id)},r.id1+r.id2)})):Object(H.jsxs)("div",{className:"noFriendsCase",children:[Object(H.jsx)("h5",{children:ge.watchModeSub2}),Object(H.jsx)(l.b,{to:"/friends",children:Object(H.jsx)("button",{children:ge.addFriends})})]})}),Object(H.jsx)("button",{className:"button capitalize mp-counter mp-border-counter",onClick:function(){t.push("/"),pe(e,null)},children:ge.reset})]})};var dr=function(){var e,t=Object(m.b)(),r=Object(m.c)((function(e){return e.app})),n=Object(H.jsx)("div",{className:"auth-modal-containter mp-border-secondary",children:Object(H.jsx)(Ye,{})});return Object(s.useEffect)((function(){r.isLogged||jt().skipLogin||le(t,{acceptLabel:null,cancelLabel:ge.skip,cancelAction:function(){ft("skipLogin",!0)},message:ge.wannaAuthorize,children:n}),Object(c.a)(a.a.mark((function e(){var r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dt();case 2:if("OK"===(r=e.sent).status){e.next=5;break}return e.abrupt("return",be(t,{message:ge.requestError}));case 5:return Ve(t,r.data),e.next=8,Ut();case 8:if(n=e.sent,"OK"===r.status){e.next=11;break}return e.abrupt("return",be(t,{message:ge.requestError}));case 11:Ze(t,n.data);case 12:case"end":return e.stop()}}),e)})))()}),[]),Object(H.jsxs)(l.a,{children:[Object(H.jsx)(qt,{}),Object(H.jsx)(It,{}),r.toast&&Object(H.jsx)(Bt,{},null===(e=r.toast)||void 0===e?void 0:e.key),Object(H.jsx)(qe,{}),Object(H.jsxs)(d.c,{children:[Object(H.jsx)(d.a,{path:"/auth",children:Object(H.jsx)("div",{className:"routeWrapper",children:Object(H.jsx)(dt,{})})}),Object(H.jsx)(d.a,{path:"/alphaReg",children:Object(H.jsx)("div",{className:"routeWrapper",children:Object(H.jsx)(zt,{})})}),Object(H.jsx)(d.a,{path:"/editProfile",children:Object(H.jsx)("div",{className:"routeWrapper",children:Object(H.jsx)(Pt,{})})}),Object(H.jsx)(d.a,{path:"/googleConfirm",children:Object(H.jsx)("div",{className:"routeWrapper",children:Object(H.jsx)(Tt,{})})}),Object(H.jsx)(d.a,{path:"/friends",children:Object(H.jsx)("div",{className:"routeWrapper",children:Object(H.jsx)(ur,{})})}),Object(H.jsx)(d.a,{path:"/watchMode",children:Object(H.jsx)("div",{className:"routeWrapper",children:Object(H.jsx)(lr,{})})})]})]})},br=(r(44),r(27)),pr=Object(br.a)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ge:return Object(p.a)(Object(p.a)({},e),t.credentials);case De:return Object(p.a)(Object(p.a)({},e),{},{level:t.newLevel});case Ke:return Object(p.a)(Object(p.a)({},e),{},{friends:Object(b.a)(t.friendsArr)});case Ue:return Object(p.a)(Object(p.a)({},e),{},{requests:Object(b.a)(t.requestsArr)});default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:return Object(p.a)(Object(p.a)({},e),{},{isLogged:!0});case Q:return Object(p.a)(Object(p.a)({},e),{},{isLogged:!1});case V:return Object(p.a)(Object(p.a)({},e),{},{reviewsShown:!1});case X:return Object(p.a)(Object(p.a)({},e),{},{reviewsShown:!0});case Z:return Object(p.a)(Object(p.a)({},e),{},{mapHidden:!1});case Y:return Object(p.a)(Object(p.a)({},e),{},{mapHidden:!0});case $:return Object(p.a)(Object(p.a)({},e),{},{modal:t.modalInfo});case ee:return Object(p.a)(Object(p.a)({},e),{},{modal:!1});case te:return Object(p.a)(Object(p.a)({},e),{},{theme:t.theme});case re:var r=Math.random();return Object(p.a)(Object(p.a)({},e),{},{toast:Object(p.a)(Object(p.a)({},t.toastInfo),{},{key:r})});case ne:return Object(p.a)(Object(p.a)({},e),{},{toast:!1});case ae:return Object(p.a)(Object(p.a)({},e),{},{mapKey:Number(e.mapKey)+1});case ce:return Object(p.a)(Object(p.a)({},e),{},{friendModeId:t.id});default:return e}}}),jr=Object(br.b)(pr),mr=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,46)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))};function fr(){return Or.apply(this,arguments)}function Or(){return(Or=Object(c.a)(a.a.mark((function e(){var t,r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},mt(),t=T[3],(r=jt()).theme&&T.indexOf(r.theme)>-1&&(t=r.theme,se.theme=r.theme),U(),document.head.insertAdjacentHTML("beforeend","<style>:root{}</style>"),K(t),e.next=10,Te();case 10:if("OK"!==(n=e.sent).status){e.next=15;break}n.data&&(Object.entries(n.data).forEach((function(e){var t=Object(j.a)(e,2),r=t[0],n=t[1];return He[r]=n})),se.isLogged=!0),e.next=21;break;case 15:if("REAUTH"!==n.status){e.next=19;break}return e.abrupt("return");case 19:return se.toast={message:ge.initConnectionErr},e.abrupt("return","connection_error");case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fr();case 2:u.a.render(Object(H.jsx)(i.a.StrictMode,{children:Object(H.jsx)(m.a,{store:jr,children:Object(H.jsx)(dr,{})})}),document.getElementById("root"));case 3:case"end":return e.stop()}}),e)})))(),mr()}},[[45,1,2]]]);
//# sourceMappingURL=main.b93d0792.chunk.js.map
(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{28:function(e,t,r){},29:function(e,t,r){},41:function(e,t,r){},42:function(e,t,r){},43:function(e,t,r){},44:function(e,t,r){},46:function(e,t,r){"use strict";r.r(t);var n=r(2),a=r.n(n),c=r(4),s=r(1),i=r.n(s),o=r(20),u=r.n(o),l=r(8),d=r(10),b=r(3),p=r(11),j=r(6),m=r(7),f=r(17),O=r.n(f),h=("https://m4ps.herokuapp.com/"||"http://localhost:1414/")+"api/";function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GET",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auth",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"refresh",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o={method:e,headers:{"Content-Type":"application/json"}};s&&(o.credentials="include"),n&&(o.body=JSON.stringify(Object(b.a)({},n)));var u=h+t+"/"+r+(i&&"?"+i);return Object(c.a)(a.a.mark((function e(){var t,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(u,o);case 3:return t=e.sent,e.next=6,t.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))}function x(){return v.apply(this,arguments)}function v(){return(v=Object(c.a)(a.a.mark((function e(){var t,r,n,c,s,i=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:0,r=i.length>1&&void 0!==i[1]?i[1]:99999999,n=i.length>2&&void 0!==i[2]?i[2]:0,c=i.length>3&&void 0!==i[3]?i[3]:99999999,s=g("GET","maps","places",null,!1,"minx=".concat(t,"&miny=").concat(n,"&maxx=").concat(r,"&maxy=").concat(c)),e.next=7,s();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return y.apply(this,arguments)}function y(){return(y=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("GET","maps","userPlaces",null,!1,"id=".concat(t)),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return N.apply(this,arguments)}function N(){return(N=Object(c.a)(a.a.mark((function e(t){var r,n,c,s,i,o=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:0,n=o.length>2&&void 0!==o[2]?o[2]:99999999,c=o.length>3&&void 0!==o[3]?o[3]:0,s=o.length>4&&void 0!==o[4]?o[4]:99999999,i=g("GET","maps","taggedPlaces",null,!1,"tag=".concat(t,"&minx=").concat(r,"&miny=").concat(c,"&maxx=").concat(n,"&maxy=").concat(s)),e.next=7,i();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t){return C.apply(this,arguments)}function C(){return(C=Object(c.a)(a.a.mark((function e(t,r){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g("POST","maps","taggedByTiles",{tag:t,data:r},!1),e.next=3,n();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){return E.apply(this,arguments)}function E(){return(E=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("POST","maps","placesByTiles",Object(b.a)({},t),!1),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t){return T.apply(this,arguments)}function T(){return(T=Object(c.a)(a.a.mark((function e(t,r){var n,c,s,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Set(["street_address","natural_feature","airport","park","point_of_interest","establishment","food","store"]),t=Number(t),r=Number(r),e.next=5,window.geocoderRef.geocode({location:{lat:t,lng:r}});case 5:if(c=e.sent,s="",!c.results){e.next=20;break}i=0;case 9:if(!(i<c.results.length)){e.next=20;break}if("premise"!==(o=c.results[i]).types[0]){e.next=14;break}return s=o.formatted_address.split(", ")[0]+", "+o.formatted_address.split(", ")[1],e.abrupt("break",20);case 14:if(!o.types.find((function(e){return n.has(e)}))){e.next=17;break}return s=o.address_components[1].long_name+", "+o.address_components[0].long_name,e.abrupt("break",20);case 17:i++,e.next=9;break;case 20:return e.abrupt("return",s);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var I=["standart","dark","b&w","blueprint"],R={login:null,name:null,avatar:null,token:null,occupiedLogin:null,id:null},F={ru:"ru",en:"en"},P=["@","!","$","\u2116","#","%","^","*","(",")",".",",","`","|",NaN,"[","]","{","}"," "],q=["#cd0c0c","#e14612","#e1922c","#e8c337","#94c52f","#0aa112"],B={standart:q,blueprint:["#422424","#723e36","#866b3c","#afb766","#6bc41c","#149f04"],dark:["#610505","#a82d00","#c7c400","#b3a700","#88c70a","#00e00b"],"b&w":["#422424","#723e36","#866b3c","#afb766","#96ce7e","#5fb961"]},z=["primary","secondary","accent","light","dark","counter"],A={standart:{primary:"#124c81",secondary:"#b6c8d6",accent:"#1bbc00",light:"#ffffff",dark:"#494949",counter:"#2d8bcf"},dark:{primary:"#BB86FC",secondary:"#a485c8",accent:"#03DAC6",light:"#383736",dark:"#d8d8d8",counter:"#e4d737"},"b&w":{primary:"#444444",secondary:"#747474",accent:"#676767",light:"#ffffff",dark:"#000000",counter:"#616161"},blueprint:{primary:"#f0a2de",secondary:"#c9abca",accent:"#e9eb7d",light:"#34568b",dark:"#ffffff",counter:"#9affd5"}};function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I[0],t=document.querySelector(":root").style;Object.entries(A[e]).forEach((function(e){var r=Object(j.a)(e,2),n=r[0],a=r[1];return t.setProperty("--"+n,a)}))}function G(){var e="",t=".mp";z.forEach((function(r){e+="\n    ".concat(t,"-").concat(r,"{color: var(--").concat(r,")}\n    ").concat(t,"-").concat(r,"-hover:hover{color: var(--").concat(r,")}\n\n    ").concat(t,"-bg-").concat(r,"{background-color: var(--").concat(r,")}\n    ").concat(t,"-bg-").concat(r,"-hover:hover{background-color: var(--").concat(r,")}\n\n    ").concat(t,"-border-").concat(r,"{border-color: var(--").concat(r,")}\n    ").concat(t,"-shadow-").concat(r,"{ box-shadow: var(--").concat(r,") 2px 2px 4px }\n    ")})),document.head.insertAdjacentHTML("beforeend","<style>".concat(e,"</style>"))}function K(e,t,r){e.on("load",(function(n){var a=B[r];e.addSource("ratedFeaturesSource",{type:"geojson",data:{type:"FeatureCollection",features:t}}),e.addSource("selectedFeatureSrc",{type:"geojson",data:{type:"FeatureCollection",features:[]}});var c=e.getStyle().layers.find((function(e){return"symbol"===e.type})).id;e.addLayer({id:"ratedFeatures",source:"ratedFeaturesSource",minzoom:11,type:"fill",paint:{"fill-opacity":["interpolate",["linear"],["get","amount"],0,0,1,.5,2,.8,5,.9],"fill-color":["interpolate",["linear"],["get","rating"],0,a[0],1,a[1],2,a[2],3,a[3],4,a[4],5,a[5]]}},c),e.addLayer({id:"selectedFeature",source:"selectedFeatureSrc",minzoom:13,type:"fill",paint:{"fill-opacity":.9,"fill-color":A[r].accent,"fill-outline-color":A[r].counter}},c)}))}var D=r(0),W="app/log_in",U="app/log_out",H="app/expand_comms",J="app/shrink_comms",Q="app/show_main",X="app/hide_main",Y="app/set_modal",V="app/close_modal",Z="app/switch_theme",$="app/set_toast",ee="app/close_toast",te="app/rerender_map",re="app/friend_id",ne="app/set_tag",ae="app/set_mode",ce="app/set_mapref",se={isLogged:!1,reviewsShown:!0,mapHidden:!1,modal:!1,theme:I[0],toast:!1,mapKey:1e3,mode:null,friendModeId:null,tagModeTag:null,mapRef:null};var ie=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e(t?{type:W}:{type:U})},oe=function(e){e({type:Q})},ue=function(e){e({type:X})},le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{message:"",acceptLabel:"",cancelLabel:"",acceptAction:function(){},cancelAction:function(){},children:Object(D.jsx)(D.Fragment,{})};e({type:Y,modalInfo:t})},de=function(e){e({type:V})},be=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{message:"",clickAction:function(){},status:"error",title:""};e({type:$,toastInfo:t})},pe=function(e,t){e({type:re,id:t})},je=function(e,t){e({type:ne,tag:t})},me=function(e,t){["watch","draw","drawRoute","tags","?withRoutes"].includes(t)||(t=null),e({type:ae,mode:t})},fe=function(e,t){return e({type:ce,mapRef:t})};function Oe(e){return(null===e||void 0===e?void 0:e.length)?e.map((function(e){var t,r={type:"Feature",geometry:{type:"MultiPolygon"},id:e.id,properties:{rating:Number(e.rating),amount:e.amount,name:e.name,lng:e.lng,lat:e.lat},source:"composite",sourceLayer:"building"};return r.geometry.coordinates=null===e||void 0===e||null===(t=e.polygon)||void 0===t?void 0:t.map((function(e){return e.map((function(e){return e.map((function(e){return[e.x,e.y]}))}))})),r})):[]}function he(e,t,r,n,a,c){if("OK"!==e.status)return be(t,{title:r.networkError,message:"object"===typeof e.msg?JSON.stringify(e.msg):e.msg||JSON.stringify(e.smg)});var s=Oe(e.data);n(s);var i=new Map(Object(p.a)(a));return e.data.forEach((function(e){var t={type:"Feature",geometry:{type:"MultiPolygon"},id:e.id,properties:{rating:Number(e.rating),amount:e.amount,name:e.name,lng:e.lng,lat:e.lat},source:"composite",sourceLayer:"building"},r="x"+e.x+"y"+e.y;if(i.has(r))i.get(r).set(e.id,t);else{var n=new Map;n.set(e.id,t),i.set(r,n)}})),c(i),s}function ge(e,t,r,n){function s(t){return function(e){if(!e[1])return e[0];var t=window.turf.union(e[0],e[1]);if(e[2])for(var r=2;r<e.length;r++)t=window.turf.union(t,e[r]);return t.geometry}(function(t){var r=e.querySourceFeatures("composite",{filter:["any",["==",["id"],t.id]],sourceLayer:t.sourceLayer});return r.splice(r.length/2),r.map((function(e){return e.geometry}))}(t)||[])}e.on("click",function(){var i=Object(c.a)(a.a.mark((function c(i){var o,u,l,d,p,m,f,O,h,g,x,v,w,y;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=function(t){var r=i.lngLat,n=r.lng,a=r.lat;e.flyTo({center:[n,a],zoom:t})},u=e.queryRenderedFeatures(i.point),l=new Set(["building","landuse"]),!(d=u.find((function(e){return"ratedFeaturesSource"===e.source})))){a.next=10;break}return console.log("found rated feature",d),null===n||void 0===n||n.trash(),yt(e,d),t(d),a.abrupt("return");case 10:if(!(null===(p=u.find((function(e){return l.has(e.sourceLayer)})))||void 0===p?void 0:p.id)){a.next=24;break}return console.log("found feature",p),null===n||void 0===n||n.trash(),m=e.getZoom(),f=yt(e,p,m<16?16:m),O=Object(j.a)(f,2),h=O[0],g=O[1],x=s(p),a.next=19,M(g,h);case 19:return p.properties.name=a.sent,t(Object(b.a)(Object(b.a)({},p),{},{geometry:x})),a.abrupt("return");case 24:if(!p){a.next=32;break}return console.log("interesting, but no id",p),null===n||void 0===n||n.trash(),o(e.getZoom()+1),t(null),a.abrupt("return");case 32:if("mapbox-gl-draw-hot"!==(null===u||void 0===u||null===(v=u[0])||void 0===v?void 0:v.source)){a.next=34;break}return a.abrupt("return");case 34:return console.log("no interesting features",u),w=new Set(["natural_label","place_label","poi_label","housenum_label","airport_label"]),u.find((function(e){return w.has(e.sourceLayer)}))&&(y=e.getZoom()+1)<16&&o(y),r(),a.abrupt("return");case 40:case"end":return a.stop()}}),c)})));return function(e){return i.apply(this,arguments)}}())}function xe(){return ve.apply(this,arguments)}function ve(){return(ve=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g("GET","friends","all",null,!0),e.next=3,t();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(){return ye.apply(this,arguments)}function ye(){return(ye=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g("GET","friends","requests",null,!0),e.next=3,t();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("GET","friends","search",null,!0,"input="+t),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Se(e){return Ce.apply(this,arguments)}function Ce(){return(Ce=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("GET","friends","details",null,!0,"id="+t),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(e){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("GET","friends","add",null,!0,"id="+t),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Me(e){return Te.apply(this,arguments)}function Te(){return(Te=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("GET","friends","remove",null,!0,"id="+t),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e){return Re.apply(this,arguments)}function Re(){return(Re=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("GET","friends","accept",null,!0,"id="+t),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fe(e){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("GET","friends","addByLink",null,!0,"id="+t),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qe="user/set_credentials",Be="user/set_level",ze="user/set_friends",Ae="user/set_requests",_e="user/comments_number",Ge={name:"anonimus",login:"",level:0,id:"anonimus",commentsn:0,avatar:null,friends:[],requests:[]},Ke=Object(b.a)({},Ge);var De,We,Ue=function(e,t){e({type:qe,credentials:Object(b.a)({},t)})},He=function(e,t){Ue(e,t),ie(e,!0)},Je=function(e){pe(e,null),me(e,"default"),Ue(e,Ge),ie(e,!1)},Qe=function(e,t){e({type:qe,newLevel:Number(t)})},Xe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e({type:ze,friendsArr:t})},Ye=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e({type:Ae,requestsArr:t})},Ve=function(e,t){return e({type:_e,number:t})},Ze=r(5),$e=(De={ru:"\u0440\u0443\u0441\u0441\u043a\u0438\u0439",en:"\u0430\u043d\u0433\u043b\u0438\u0439\u0441\u043a\u0438\u0439",homeLinkBtn:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",authLinkBtn:"\u041b\u043e\u0433\u0438\u043d",profile:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",theme:"\u0422\u0435\u043c\u0430",friends:"\u0414\u0440\u0443\u0437\u044c\u044f",routes:"\u041c\u0430\u0440\u0448\u0440\u0443\u0442\u044b",language:"\u042f\u0437\u044b\u043a",aboutUs:"\u041e \u043f\u0440\u043e\u0435\u043a\u0442\u0435",setsLinkBtn:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",login:"\u041b\u043e\u0433\u0438\u043d",logout:"\u0412\u044b\u0439\u0442\u0438",register:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",yourLogin:"\u0412\u0430\u0448 \u043b\u043e\u0433\u0438\u043d",userName:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",yourPword:"\u0412\u0430\u0448 \u043f\u0430\u0440\u043e\u043b\u044c",secretQuestion:"\u0421\u0435\u043a\u0440\u0435\u0442\u043d\u044b\u0439 \u0432\u043e\u043f\u0440\u043e\u0441",secretHint:"\u0414\u043b\u044f \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u0430\u0440\u043e\u043b\u044f",secterAnswer:"\u041e\u0442\u0432\u0435\u0442 \u043d\u0430 \u0441\u0435\u043a\u0440\u0435\u0442",secretValidation:"\u0412\u044b \u0443\u043a\u0430\u0437\u0430\u043b\u0438 \u0432\u043e\u043f\u0440\u043e\u0441, \u0443\u043a\u0430\u0436\u0438\u0442\u0435 \u0438 \u043e\u0442\u0432\u0435\u0442",secretReplica:"\u041d\u043e \u044d\u0442\u043e \u043d\u0435 \u044f \u043d\u0430\u043f\u0438\u0441\u0430\u043b \u0432\u043e\u043f\u0440\u043e\u0441!",secretReplica2:"\u0410 \u043e\u0442\u0432\u0435\u0442 \u043d\u0430\u043c \u0432\u0441\u0451 \u0440\u0430\u0432\u043d\u043e \u043d\u0443\u0436\u0435\u043d",fillRequiredFields:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u043f\u043e\u043b\u044f",secretExample:"\u0418\u043c\u044f, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0432\u044b \u0442\u0430\u0439\u043d\u043e \u043d\u0435\u043d\u0430\u0432\u0438\u0434\u0438\u0442\u0435",submit:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c",confirm:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c",greetings:"\u041f\u0440\u0438\u0432\u0435\u0442",firstTimeRate:"\u0412\u0430\u043c \u0432\u044b\u043f\u0430\u043b\u0430 \u0447\u0435\u0441\u0442\u044c \u043f\u0435\u0440\u0432\u044b\u043c \u043e\u0446\u0435\u043d\u0438\u0442\u044c \u044d\u0442\u043e \u043c\u0435\u0441\u0442\u043e!",placeRatingPrefix:"\u041e\u0431\u0449\u0438\u0439 \u0440\u0435\u0439\u0442\u0438\u043d\u0433",placeAmountPrefix:"\u042d\u0442\u043e \u043c\u0435\u0441\u0442\u043e \u043e\u0446\u0435\u043d\u0438\u043b\u0438",singleMark:"\u043e\u0446\u0435\u043d\u043a\u0430",marks:"\u043e\u0446\u0435\u043d\u043e\u043a",push:"\u041d\u0430\u0436\u0430\u0442\u044c",commentPlacehol:"\u0435\u0441\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438?",rating:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433",yourRating:"\u0412\u0430\u0448\u0430 \u043e\u0446\u0435\u043d\u043a\u0430",bestRating:"\u0417\u0430\u043c\u0435\u0447\u0430\u0442\u0435\u043b\u044c\u043d\u043e",worstRating:"\u0423\u0436\u0430\u0441\u043d\u043e",reviews:"\u041e\u0442\u0437\u044b\u0432\u044b",noComments:"\u0411\u0435\u0437 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432",searchPHolder:"\u041d\u0430\u0439\u0442\u0438",newFeature:"\u041d\u043e\u0432\u044b\u0439 \u043e\u0431\u044a\u0435\u043a\u0442 \u043d\u0430 \u043a\u0430\u0440\u0442\u0435",newFeaturePHolder:"\u0410\u0434\u0440\u0435\u0441 \u0438\u043b\u0438 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430",drawMode:"\u0420\u0435\u0436\u0438\u043c \u0440\u0438\u0441\u043e\u0432\u0430\u043d\u0438\u044f",toDrawMode:"\u041a \u0440\u0435\u0436\u0438\u043c\u0443 \u0440\u0438\u0441\u043e\u0432\u0430\u043d\u0438\u044f",drawPrompt:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435, \u0434\u0432\u0430\u0436\u0434\u044b \u043d\u0430\u0436\u0430\u0432 \u043d\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u044e\u044e \u0442\u043e\u0447\u043a\u0443 \u043f\u043e\u043b\u0438\u0433\u043e\u043d\u0430",level:"\u0443\u0440\u043e\u0432\u0435\u043d\u044c",acceptDefault:"\u043f\u0440\u0438\u043d\u044f\u0442\u044c",cancelDefault:"\u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c",rateZeroModal:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u043f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043e\u0446\u0435\u043d\u043a\u0443 0?",toMain:"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e",menu:"\u041c\u0435\u043d\u044e",pickTheme:"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0442\u0435\u043c\u0443",apply:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c",password:"\u041f\u0430\u0440\u043e\u043b\u044c",field:"\u043f\u043e\u043b\u0435",tooLong:"\u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043b\u0438\u043d\u043d\u043e\u0435"},Object(Ze.a)(De,I[0],"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0430\u044f"),Object(Ze.a)(De,I[1],"\u0422\u0451\u043c\u043d\u0430\u044f"),Object(Ze.a)(De,I[2],"Black&White"),Object(Ze.a)(De,I[3],"\u0427\u0435\u0440\u0442\u0451\u0436\u043d\u0430\u044f"),Object(Ze.a)(De,"successfullReg","\u0423\u0441\u043f\u0435\u0448\u043d\u0430\u044f \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f!"),Object(Ze.a)(De,"errorReg","\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"),Object(Ze.a)(De,"errCode","\u043a\u043e\u0434 \u043e\u0448\u0438\u0431\u043a\u0438"),Object(Ze.a)(De,"loginOccupied","\u041b\u043e\u0433\u0438\u043d \u0443\u0436\u0435 \u0437\u0430\u043d\u044f\u0442"),Object(Ze.a)(De,"wrongAuth","\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0432\u0445\u043e\u0434\u0430"),Object(Ze.a)(De,"editProfile","\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0444\u0438\u043b\u044f"),Object(Ze.a)(De,"successfulUpdate","\u0423\u0441\u043f\u0435\u0448\u043d\u043e\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435"),Object(Ze.a)(De,"secretChallenge","\u0412\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u043e\u0442\u0432\u0435\u0442\u0438\u0442\u044c \u043d\u0430 \u0441\u0435\u043a\u0440\u0435\u0442\u043d\u044b\u0439 \u0432\u043e\u043f\u0440\u043e\u0441, \u0447\u0442\u043e\u0431\u044b \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"),Object(Ze.a)(De,"loading","\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"),Object(Ze.a)(De,"oauthTitle","\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u0447\u0435\u0440\u0435\u0437 google \u0430\u043a\u043a\u0430\u0443\u043d\u0442"),Object(Ze.a)(De,"occupied","\u0417\u0430\u043d\u044f\u0442"),Object(Ze.a)(De,"bannedPwod","\u044d\u0442\u043e\u0442 \u043f\u0430\u0440\u043e\u043b\u044c \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d"),Object(Ze.a)(De,"error","\u043e\u0448\u0438\u0431\u043a\u0430"),Object(Ze.a)(De,"warning","\u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435"),Object(Ze.a)(De,"complete","\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e"),Object(Ze.a)(De,"initConnectionErr","\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u043a\u044e\u0447\u0435\u043d\u0438\u0438 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443, \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u043d\u0435 \u0443\u0434\u0430\u043b\u0430\u0441\u044c. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0441\u043e\u043e\u0431\u0449\u0438\u0442\u0435 \u043e\u0431 \u043e\u0448\u0438\u0431\u043a\u0435"),Object(Ze.a)(De,"networkError","\u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0442\u0438"),Object(Ze.a)(De,"wannaAuthorize","\u0425\u043e\u0442\u0438\u0442\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f?"),Object(Ze.a)(De,"skip","\u043f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c"),Object(Ze.a)(De,"farewell","\u0414\u043e \u0432\u0441\u0442\u0440\u0435\u0447\u0438"),Object(Ze.a)(De,"pickLanguage","\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u044f\u0437\u044b\u043a"),Object(Ze.a)(De,"requestError","\u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0435, \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u044b \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0441 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u043e\u043c"),Object(Ze.a)(De,"anonimus","\u0410\u043d\u043e\u043d"),Object(Ze.a)(De,"removeComment","\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"),Object(Ze.a)(De,"friendList","\u0421\u043f\u0438\u0441\u043e\u043a \u0434\u0440\u0443\u0437\u0435\u0439"),Object(Ze.a)(De,"sadlyNoFriends","\u041f\u0435\u0447\u0430\u043b\u044c\u043d\u043e, \u0434\u0440\u0443\u0437\u0435\u0439 \u0443 \u0432\u0430\u0441 \u043d\u0435\u0442"),Object(Ze.a)(De,"addFriends","\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0434\u0440\u0443\u0437\u0435\u0439"),Object(Ze.a)(De,"noResults","\u041d\u0435\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432"),Object(Ze.a)(De,"loginToUseThis","\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0443\u0439\u0442\u0435\u0441\u044c \u0447\u0442\u043e\u0431\u044b \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u0441\u0432\u043e\u0438\u0445 \u0434\u0440\u0443\u0437\u0435\u0439, \u0438\u0445 \u043e\u0446\u0435\u043d\u043a\u0438 (\u0438 \u0432 \u0431\u0443\u0434\u0443\u0449\u0435\u043c - \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u044b), \u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u043d\u043e\u0432\u044b\u0445 \u0434\u0440\u0443\u0437\u0435\u0439"),Object(Ze.a)(De,"authorization","\u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),Object(Ze.a)(De,"avatar","\u0430\u0432\u0430\u0442\u0430\u0440"),Object(Ze.a)(De,"commentsn","\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432"),Object(Ze.a)(De,"addFriend","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0434\u0440\u0443\u0437\u044c\u044f"),Object(Ze.a)(De,"removeFriend","\u0423\u0431\u0440\u0430\u0442\u044c \u0438\u0437 \u0434\u0440\u0443\u0437\u0435\u0439"),Object(Ze.a)(De,"inFriendlist","\u0412 \u0441\u043f\u0438\u0441\u043a\u0435 \u0434\u0440\u0443\u0437\u0435\u0439"),Object(Ze.a)(De,"sent","\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e"),Object(Ze.a)(De,"youRequested","\u0412\u044b \u043e\u0441\u0442\u0430\u0432\u0438\u043b\u0438 \u0437\u0430\u043f\u0440\u043e\u0441"),Object(Ze.a)(De,"confirmRequest","\u041f\u0440\u0438\u043d\u044f\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441"),Object(Ze.a)(De,"addMeLink","\u0421\u0441\u044b\u043b\u043a\u0430 \u0434\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0432\u0430\u0441 \u0432 \u0434\u0440\u0443\u0437\u044c\u044f"),Object(Ze.a)(De,"addByLink","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435"),Object(Ze.a)(De,"pasteAddLink","\u0412\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443 \u0434\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f"),Object(Ze.a)(De,"yourFriendsNow","\u0422\u0435\u043f\u0435\u0440\u044c \u0432\u044b \u0434\u0440\u0443\u0437\u044c\u044f"),Object(Ze.a)(De,"goBack","\u041d\u0430\u0437\u0430\u0434"),Object(Ze.a)(De,"friendRequests","\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0434\u0440\u0443\u0436\u0431\u044b"),Object(Ze.a)(De,"currentMode","\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u0440\u0435\u0436\u0438\u043c"),Object(Ze.a)(De,"watchModeSub1","\u041e\u0446\u0435\u043d\u043a\u0438 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u0434\u0440\u0443\u0433\u0430"),Object(Ze.a)(De,"watchModeSub2","\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0434\u0440\u0443\u0437\u0435\u0439, \u0447\u0442\u043e\u0431\u044b \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u0438\u0445 \u043e\u0446\u0435\u043d\u043a\u0438 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e"),Object(Ze.a)(De,"watchModeSub3","\u041e\u0442\u043c\u0435\u0447\u0430\u0439\u0442\u0435 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u044e\u0449\u0438\u0435 \u0437\u0434\u0430\u043d\u0438\u044f. \u0412 \u0440\u0435\u0436\u0438\u043c\u0435 \u0440\u0438\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043a\u043b\u0438\u043a\u0438 \u043d\u0430 \u043e\u0431\u044b\u0447\u043d\u044b\u0435 \u0437\u0434\u0430\u043d\u0438\u044f \u043c\u043e\u0433\u0443\u0442 \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c"),Object(Ze.a)(De,"default","\u043e\u0431\u044b\u0447\u043d\u044b\u0439"),Object(Ze.a)(De,"reset","\u0441\u0431\u0440\u043e\u0441\u0438\u0442\u044c"),Object(Ze.a)(De,"asAnonius","\u043a\u0430\u043a \u0430\u043d\u043e\u043d\u0438\u043c"),Object(Ze.a)(De,"send","\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"),Object(Ze.a)(De,"signWithGoogle","\u0412\u043e\u0439\u0442\u0438 \u0447\u0435\u0440\u0435\u0437 Google"),Object(Ze.a)(De,"defaultMode","\u043e\u0431\u044b\u0447\u043d\u044b\u0439"),Object(Ze.a)(De,"drawRouteMode","\u0440\u0438\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430"),Object(Ze.a)(De,"drawing","\u0440\u0438\u0441\u043e\u0432\u0430\u043d\u0438\u0435"),Object(Ze.a)(De,"mode","\u0440\u0435\u0436\u0438\u043c"),Object(Ze.a)(De,"marksOf","\u043e\u0446\u0435\u043d\u043a\u0438"),Object(Ze.a)(De,"close","\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),Object(Ze.a)(De,"tags","\u0422\u044d\u0433\u0438"),Object(Ze.a)(De,"tagsAmount","\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0442\u044d\u0433\u043e\u0432"),Object(Ze.a)(De,"watchAtMap","\u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043d\u0430 \u043a\u0430\u0440\u0442\u0435"),Object(Ze.a)(De,"recentTags","\u041d\u043e\u0432\u044b\u0435 \u0442\u044d\u0433\u0438"),Object(Ze.a)(De,"mostPopularPlaces","\u0421\u0430\u043c\u044b\u0435 \u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435 \u043c\u0435\u0441\u0442\u0430"),Object(Ze.a)(De,"mostPopular","\u0421\u0430\u043c\u044b\u0435 \u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435"),Object(Ze.a)(De,"newPassword","\u041d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"),Object(Ze.a)(De,"tag","\u0442\u044d\u0433"),Object(Ze.a)(De,"mentionsAmount","\u041a\u043e\u043b\u0447\u0435\u0441\u0442\u0432\u043e \u0443\u043f\u043e\u043c\u0438\u043d\u0430\u043d\u0438\u0439"),Object(Ze.a)(De,"show","\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c"),Object(Ze.a)(De,"mapTagModeSub","\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u0430\u0440\u0442\u0443 \u043f\u043e \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e\u043c\u0443 #\u0442\u044d\u0433\u0443"),Object(Ze.a)(De,"toTags","\u041a \u0442\u044d\u0433\u0430\u043c"),Object(Ze.a)(De,"standartMode","\u041e\u0431\u044b\u0447\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c"),Object(Ze.a)(De,"nowYourLevel","\u0422\u0435\u043f\u0435\u0440\u044c \u0432\u0430\u0448 \u0443\u0440\u043e\u0432\u0435\u043d\u044c"),Object(Ze.a)(De,"aboutPlaceholder","\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0438, \u0435\u0441\u043b\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e, \u043a\u043e\u043d\u0442\u0430\u043a\u0442 \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0442\u043d\u043e\u0439 \u0441\u0432\u044f\u0437\u0438"),Object(Ze.a)(De,"aboutMain","\u041f\u0440\u0438\u0432\u0435\u0442, \u0441\u043f\u0430\u0441\u0438\u0431\u043e \u0437\u0430 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435 \u043a \u043f\u0440\u043e\u0435\u043a\u0442\u0443! \n  \u0412 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0438 \u043e\u043d \u0441\u043e\u0437\u0434\u0430\u043d \u0434\u043b\u044f \u0434\u0432\u0443\u0445 \u0432\u0435\u0449\u0435\u0439 - \u043d\u0430\u0439\u0442\u0438 \u0441\u0430\u043c\u044b\u0435 \u044f\u0440\u043a\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 \u0433\u043e\u0440\u043e\u0434\u0430 \u0438 \u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u0441\u0432\u043e\u0438\u043c\u0438 \u043e\u0446\u0435\u043d\u043a\u0430\u043c\u0438 \u0441 \u0434\u0440\u0443\u0437\u044c\u044f\u043c\u0438"),Object(Ze.a)(De,"comment","\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"),Object(Ze.a)(De,"aboutFutureTitle","\u041e \u0431\u0443\u0434\u0443\u0449\u0435\u043c \u043f\u0440\u043e\u0435\u043a\u0442\u0430"),Object(Ze.a)(De,"aboutFuture","\u041f\u0440\u0435\u0436\u0434\u0435 \u0432\u0441\u0435\u0433\u043e \u044f \u043f\u043b\u0430\u043d\u0438\u0440\u0443\u044e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c '\u043c\u0430\u0440\u0448\u0440\u0443\u0442\u044b', \u043a\u043e\u0442\u043e\u0440\u044b\u043c\u0438 \u0442\u043e\u0436\u0435 \u043c\u043e\u0436\u043d\u043e \u0431\u0443\u0434\u0435\u0442 \u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u0438 \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u043e \u0432\u0441\u0442\u0440\u0435\u0447\u0430\u0442\u044c \n  \u0447\u0443\u0436\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u044b \u043d\u0430 \u043a\u0430\u0440\u0442\u0435. \u041f\u0440\u0438\u0434\u0443\u043c\u0430\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u043e\u0436\u0435 \u0431\u044b\u043b\u043e \u0431\u044b \u043d\u0435\u043f\u043b\u043e\u0445\u043e. \n  \u0412 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0438\u043b\u0438 \u0432\u043f\u0435\u0447\u0430\u0442\u043b\u0435\u043d\u0438\u044f \u043e \u0441\u0430\u0439\u0442\u0435, \u043b\u0438\u0431\u043e \u0441\u0432\u044f\u0436\u0438\u0442\u0435\u0441\u044c \u0441\u043e \u043c\u043d\u043e\u0439 \n  \u043d\u0430\u043f\u0440\u044f\u043c\u0443\u044e \u0447\u0435\u0440\u0435\u0437 ilyaizrailyan@gmail.com \u0438\u043b\u0438 @ilyaizr \u0432 \u043a\u0430\u043a\u043e\u0439-\u043d\u0438\u0431\u0443\u0434\u044c \u0441\u043e\u0446 \u0441\u0435\u0442\u0438"),Object(Ze.a)(De,"version","\u0432\u0435\u0440\u0441\u0438\u044f"),De);function et(){var e=window.localStorage.getItem("lastLocation");if(!e)return{};var t=e=JSON.parse(e);return{lng:t.lng,lat:t.lat}}function tt(e,t,r){return{x:Math.floor((e+180)/360*Math.pow(2,r)),y:Math.floor((1-Math.log(Math.tan(t*Math.PI/180)+1/Math.cos(t*Math.PI/180))/Math.PI)/2*Math.pow(2,r))}}function rt(e){return nt.apply(this,arguments)}function nt(){return(nt=Object(c.a)(a.a.mark((function e(t){var r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe();case 2:if("OK"===(r=e.sent).status||"REAUTH"===r.status){e.next=5;break}return e.abrupt("return",be(t,{message:$e.requestError}));case 5:return Xe(t,r.data),e.next=8,we();case 8:if(n=e.sent,"OK"===r.status||"REAUTH"===r.status){e.next=11;break}return e.abrupt("return",be(t,{message:$e.requestError}));case 11:Ye(t,n.data);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function at(e){return e||"number"!==typeof e||0===e?e:0}function ct(e,t,r,n,s,i){var o=new window.MapboxDraw({displayControlsDefault:!1,controls:{}});function u(e){return l.apply(this,arguments)}function l(){return(l=Object(c.a)(a.a.mark((function n(c){var i,u,l,d,p,m;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s(!1),r.style.display="none",!((i=o.getAll()).features.length>0)){n.next=16;break}return(u=Object(b.a)({},i.features[0])).properties.amount=0,u.properties.created=!0,u.source="createdPoly",l=Object(j.a)(window.turf.centroid(u.geometry).geometry.coordinates,2),d=l[0],p=l[1],m=e.getZoom(),u._vectorTileFeature={_x:Math.floor((d+180)/360*Math.pow(2,m)),_y:Math.floor((1-Math.log(Math.tan(p*Math.PI/180)+1/Math.cos(p*Math.PI/180))/Math.PI)/2*Math.pow(2,m))},n.next=13,M(p,d);case 13:u.properties.name=n.sent,console.log("%c\u29ed","color: #917399",u.properties.name),t(u);case 16:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return r.onclick=function(){o.changeMode("draw_polygon"),n.style.display="block",s(!0)},n.onclick=function(){o.deleteAll(),i(),s(!1),r.style.display="block",n.style.display="none"},e.addControl(o),r.style.display="block",n.style.display="none",e.on("draw.create",u),e.on("draw.update",u),o}function st(e,t,r,n,a){e.on("moveend",(function(c){var s,i=e.getCenter(),o=tt(i.lng,i.lat,16),u=o.x,l=o.y;if(t((function(e){return s=e,{x:u,y:l}})),s&&(s.x!==u||s.y!==l)){var d,b=new Set([]);a((function(e){d=e;for(var t=r;t>-r-1;t--)for(var n=-r;n<r+1;n++){var a="x"+(u+n)+"y"+(l+t);d.has(a)||b.add(a)}return b.size>10&&Array.from(d.keys()).forEach((function(e){if(b.has(e))return console.log("%c\u29ed it had tilekey","color: #e50000",e);d.delete(e)})),e})),n(b)}}))}var it=["title","titleId"];function ot(){return(ot=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ut(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function lt(e,t){var r=e.title,n=e.titleId,a=ut(e,it);return s.createElement("svg",ot({fill:"current",enableBackground:"new 0 0 512 512",height:"512px",id:"Layer_1",viewBox:"0 0 512 512",width:"512px",xmlSpace:"preserve",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,We||(We=s.createElement("path",{d:"M493.278,154.515l-22.625,22.641L334.871,41.39l22.625-22.641c25-25,65.531-25,90.531,0l45.25,45.266  C518.246,89,518.246,129.515,493.278,154.515z M176.465,426.031c-6.25,6.25-6.25,16.375,0,22.625c6.25,6.281,16.375,6.281,22.625,0  l248.938-248.875l-22.656-22.641L176.465,426.031z M63.309,312.906c-6.25,6.25-6.25,16.375,0,22.625s16.375,6.25,22.625,0  L334.871,86.64l-22.625-22.625L63.309,312.906z M357.465,109.25L108.559,358.156c-12.5,12.469-12.469,32.75,0,45.25  c12.5,12.5,32.75,12.563,45.281-0.031l248.906-248.859L357.465,109.25z M153.778,471.219c-7.656-7.656-11.344-17.375-12.719-27.375  c-3.25,0.5-6.531,0.969-9.875,0.969c-17.094,0-33.156-6.688-45.25-18.781c-12.094-12.125-18.75-28.156-18.75-45.25  c0-3.125,0.469-6.156,0.906-9.188c-10.344-1.406-19.906-5.938-27.406-13.438c-0.719-0.719-0.969-1.688-1.625-2.469L-0.004,512  l155.906-39.031C155.215,472.344,154.434,471.875,153.778,471.219z"})))}var dt,bt=s.forwardRef(lt),pt=(r.p,["title","titleId"]);function jt(){return(jt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function mt(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ft(e,t){var r=e.title,n=e.titleId,a=mt(e,pt);return s.createElement("svg",jt({fill:"current",xmlns:"http://www.w3.org/2000/svg",width:"980.000000pt",height:"952.000000pt",viewBox:"0 0 980.000000 952.000000",preserveAspectRatio:"xMidYMid meet",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,dt||(dt=s.createElement("g",{transform:"translate(0.000000,952.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none"},s.createElement("path",{d:"M3665 9513 c-274 -38 -540 -237 -651 -489 -64 -145 -67 -168 -72 -551 l-4 -353 -1347 0 c-1535 0 -1416 7 -1507 -84 -79 -80 -102 -173 -68 -286 22 -74 100 -152 174 -174 49 -15 492 -16 4711 -16 4301 0 4661 1 4708 17 66 21 125 72 159 137 22 42 27 63 26 126 0 113 -50 197 -148 248 l-51 27 -1367 3 -1368 2 0 309 c0 232 -4 330 -15 396 -30 169 -106 314 -230 440 -129 132 -291 217 -465 244 -62 10 -2414 14 -2485 4z m2483 -588 c59 -32 91 -66 125 -129 21 -39 22 -53 25 -358 l3 -318 -1401 0 -1401 0 3 318 3 317 27 51 c36 69 100 121 178 145 14 4 556 7 1205 6 l1180 -2 53 -30z"}),s.createElement("path",{d:"M1726 7264 c-34 -11 -64 -31 -102 -68 -93 -94 -84 236 -84 -3160 0 -3275 -3 -3089 56 -3265 29 -86 91 -214 136 -279 138 -201 353 -361 584 -437 174 -57 69 -55 2584 -55 1482 0 2340 4 2385 10 292 42 549 187 729 412 76 94 153 237 191 354 58 176 55 8 55 3265 0 3390 9 3062 -84 3155 -114 113 -278 113 -392 0 -93 -93 -84 233 -84 -3141 0 -2072 -3 -2999 -11 -3041 -35 -194 -186 -361 -389 -430 -53 -18 -135 -19 -2405 -19 l-2350 0 -59 22 c-150 57 -263 157 -326 286 -21 45 -43 109 -49 141 -8 42 -11 969 -11 3041 0 3374 9 3048 -84 3141 -80 79 -178 102 -290 68z"}),s.createElement("path",{d:"M3406 6144 c-34 -11 -64 -31 -102 -68 -92 -93 -84 110 -84 -2156 0 -2265 -8 -2063 84 -2156 113 -112 278 -112 391 1 93 92 85 -114 85 2154 0 2266 8 2064 -84 2157 -80 79 -178 102 -290 68z"}),s.createElement("path",{d:"M4806 6144 c-34 -11 -64 -31 -102 -68 -92 -93 -84 110 -84 -2156 0 -2265 -8 -2063 84 -2156 113 -112 278 -112 391 1 93 92 85 -114 85 2154 0 2266 8 2064 -84 2157 -80 79 -178 102 -290 68z"}),s.createElement("path",{d:"M6206 6144 c-34 -11 -64 -31 -102 -68 -92 -93 -84 110 -84 -2156 0 -2265 -8 -2063 84 -2156 113 -112 278 -112 391 1 93 92 85 -114 85 2154 0 2266 8 2064 -84 2157 -80 79 -178 102 -290 68z"}))))}var Ot=s.forwardRef(ft);r.p;O.a.accessToken="pk.eyJ1IjoiaWx5YWl6ciIsImEiOiJja29nNG5rNTkwbGdxMm5sYTFqbXpqbnlpIn0.S4LdF8fBwDtEQ6-dQBrWVw";var ht=34.354,gt=53.235,xt={standart:"mapbox://styles/ilyaizr/ckq2l808k0ifn17o0x0yl9qi4",dark:"mapbox://styles/ilyaizr/cktd77j8u12ch18swzrqikqor","b&w":"mapbox://styles/ilyaizr/ckpk88ybo17tn17mzmd5etst8",blueprint:"mapbox://styles/ilyaizr/cksp4jldx0b1z17mog8wzg0jm"},vt=function(e){var t=e.feature,r=e.setFeature,n=e.resetRater,i=e.geoData,o=e.setGeoData,u=e.featureTrigger,l=Object(m.c)((function(e){return e.app})),b=Object(d.g)(),f=Object(m.b)(),h=Object(s.useRef)(null),g=Object(s.useRef)(null),v=Object(s.useRef)(null),y=Object(s.useRef)(null),N=Object(s.useState)(!1),C=Object(j.a)(N,2),E=C[0],M=C[1],T=Object(s.useState)({x:null,y:null}),I=Object(j.a)(T,2)[1],R=Object(s.useState)(new Map),F=Object(j.a)(R,2),P=F[0],q=F[1],B=Object(s.useState)(new Set),z=Object(j.a)(B,2),A=z[0],_=z[1];function G(){return W.apply(this,arguments)}function W(){return(W=Object(c.a)(a.a.mark((function e(){var t,r,n,c,s,i,u,d,b,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=et(),n=r.lng,c=r.lat,s=tt(n||ht,c||gt,16),i=s.x,u=s.y,I({x:i,y:u}),"watch"!==l.mode){e.next=12;break}return e.next=6,w(l.friendModeId);case 6:if("OK"===(d=e.sent).status){e.next=9;break}return e.abrupt("return",be(f,{title:$e.networkError,message:d.msg+"#mp1"||!1}));case 9:t=Oe(d.data),e.next=25;break;case 12:if("tags"!==l.mode){e.next=21;break}return e.next=15,k(l.tagModeTag,i-3,i+3,u-3,u+3);case 15:if("OK"===(b=e.sent).status){e.next=18;break}return e.abrupt("return",be(f,{title:$e.networkError,message:b.msg+"#mp2"||!1}));case 18:t=Oe(b.data),e.next=25;break;case 21:return e.next=23,x(i-3,i+3,u-3,u+3);case 23:return p=e.sent,e.abrupt("return",he(p,f,$e,o,P,q));case 25:return o(t),e.abrupt("return",t);case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("watch"!==l.mode){e.next=2;break}return e.abrupt("return");case 2:if("tags"!==l.mode||!A.size){e.next=7;break}return e.next=5,S(l.tagModeTag,Object(p.a)(A));case 5:return t=e.sent,e.abrupt("return",he(t,f,$e,o,P,q));case 7:if(!A.size){e.next=12;break}return e.next=10,L(Object(p.a)(A));case 10:he(e.sent,f,$e,o,P,q);case 12:case"end":return e.stop()}}),e)})))()}),[A]),Object(s.useEffect)((function(){r(null),Object(c.a)(a.a.mark((function e(){var t,c,s,i,o,u,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:s=e.sent,i=et(),o=i.lng,u=i.lat,g.current=new O.a.Map({container:h.current,style:xt[l.theme],center:[o||34.354,u||53.235],zoom:16}),fe(f,g.current),"draw"!==l.mode&&g.current.addControl(new window.MapboxGeocoder({accessToken:"pk.eyJ1IjoiaWx5YWl6ciIsImEiOiJja29nNG5rNTkwbGdxMm5sYTFqbXpqbnlpIn0.S4LdF8fBwDtEQ6-dQBrWVw",mapboxgl:O.a,placeholder:$e.searchPHolder})),"draw"===l.mode&&(d=ct(g.current,r,v.current,y.current,M,n)),K(g.current,s,l.theme),ge(g.current,r,n,d||null),st(g.current,I,3,_,q),(null===(t=window.google)||void 0===t||null===(c=t.maps)||void 0===c?void 0:c.Geocoder)&&(window.geocoderRef=new window.google.maps.Geocoder);case 12:case"end":return e.stop()}}),e)})))();var e=setInterval((function(){var e,t,r=null===(e=g.current)||void 0===e||null===(t=e.getCenter)||void 0===t?void 0:t.call(e);r&&function(e){var t=e.lng,r=e.lat;window.localStorage.setItem("lastLocation",JSON.stringify({lng:t,lat:r}))}(r)}),1e4);return function(){return clearInterval(e)}}),[l.theme,l.mapKey]),Object(s.useEffect)((function(){g.current&&wt(g.current,i,"ratedFeaturesSource")}),[u,i]),Object(s.useEffect)((function(){g.current&&wt(g.current,[t||{}],"selectedFeatureSrc")}),[t]),Object(s.useEffect)((function(){"/"!==b.pathname?ue(f):(oe(f),setTimeout((function(){var e;null===(e=g.current)||void 0===e||e.resize()}),0))}),[b.pathname]),Object(s.useEffect)((function(){g.current&&Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:case"end":return e.stop()}}),e)})))()}),[l.mode,l.friendModeId,l.tagModeTag]),Object(D.jsxs)("div",{children:[Object(D.jsx)("div",{ref:h,className:l.mapHidden?"map-container hidden":"map-container"}),"draw"===l.mode&&Object(D.jsx)("button",{id:"createBtn",ref:v,className:"mp-bg-light mp-border-accent controlButton",children:Object(D.jsx)(bt,{fill:"var(--accent)",className:"nav-icon"})}),"draw"===l.mode&&Object(D.jsx)("button",{id:"deleteBtn",ref:y,className:"mp-bg-light mp-border-accent controlButton",children:Object(D.jsx)(Ot,{fill:"var(--accent)",className:"nav-icon"})}),E&&"draw"===l.mode&&Object(D.jsxs)("div",{className:"controlPrompt mp-border-secondary mp-bg-light",children:[Object(D.jsx)("h6",{children:$e.drawMode}),Object(D.jsx)("p",{children:$e.drawPrompt})]})]})};function wt(e,t,r){var n;null===(n=e.getSource(r))||void 0===n||n.setData({type:"FeatureCollection",features:t})}function yt(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=Object(j.a)(window.turf.centroid(t.geometry).geometry.coordinates,2),c=a[0],s=a[1];return e.flyTo({center:[c,s],zoom:r,speed:n}),[c,s]}function kt(e){return Nt.apply(this,arguments)}function Nt(){return(Nt=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("GET","tags","search",null,!1,"input="+t),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function St(e){return Ct.apply(this,arguments)}function Ct(){return(Ct=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("GET","tags","getTag",null,!1,"tag="+t),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lt(){return Et.apply(this,arguments)}function Et(){return(Et=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g("GET","tags","featuredTags",null,!1),e.next=3,t();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mt(e){return Tt.apply(this,arguments)}function Tt(){return(Tt=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("GET","tags","tagSuggestions",null,!1,"input="+t),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function It(e){return Rt.apply(this,arguments)}function Rt(){return(Rt=Object(c.a)(a.a.mark((function e(t){var r,n,c,s,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.user,n=t.comment,c=t.placeId,s=n.split(" ").filter((function(e){return null===e||void 0===e?void 0:e.startsWith("#")})),i=[],s.forEach((function(e){for(var t="",r=1;r<e.length;r++){var n=e[r];if(P.includes(n))break;t+=n}t&&i.push(t)})),i.length){e.next=6;break}return e.abrupt("return",{status:"OK"});case 6:return i=i.filter((function(e,t,r){return r.indexOf(e)===t})),o=g("POST","tags","postTags",{user:r,placeId:c,tags:i},!1),e.next=10,o();case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ft=function(e){var t=e.comment,r=e.setComment,n=Object(m.b)(),i=Object(s.useRef)(null),o=Object(s.useState)(null),u=Object(j.a)(o,2),l=u[0],d=u[1],b=Object(s.useState)([]),p=Object(j.a)(b,2),f=p[0],O=p[1];function h(e){var n=e.target.attributes.value.value,a=t.split("#");a[a.length-1]=n,r(a.join("#")),d(null),i.current.focus()}return Object(s.useEffect)((function(){Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"===typeof l){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Mt(l);case 4:if("OK"===(t=e.sent).status){e.next=7;break}return e.abrupt("return",be(n,{message:$e.requestError+" #com1"}));case 7:O(t.data);case 8:case"end":return e.stop()}}),e)})))()}),[l]),Object(D.jsxs)("div",{children:["string"===typeof l&&Object(D.jsx)("div",{className:"suggContainer mp-border-dark",children:f.map((function(e){return Object(D.jsxs)("span",{className:"sugg mp-accent mp-dark-hover mp-border-secondary cursor-pointer",value:e.tag,onClick:h,children:[Object(D.jsx)("span",{className:"mp-secondary",children:"#"}),e.tag]},e.tag)}))}),Object(D.jsx)("textarea",{name:"comment",cols:"25",rows:"2",value:t,onInput:function(e){r(e.target.value);var t=e.nativeEvent.data;"#"===t?d(""):!t||P.includes(t)?d(null):"string"===typeof l&&d(l+t)},className:"raterComment mp-border-dark",placeholder:$e.commentPlacehol,ref:i})]})},Pt=function(e){var t=e.feature,r=e.onSubmit,n=Object(m.c)((function(e){return e.app})),a=n.theme,c=n.isLogged,i=B[a],o=Object(m.b)();function u(){var e;if(!(null===t||void 0===t||null===(e=t.properties)||void 0===e?void 0:e.rating))return B[a][0];for(var r=0;r<B[a].length;r++)if(t.properties.rating-1<r)return B[a][r]}var l=Object(s.useState)(0),d=Object(j.a)(l,2),b=d[0],f=d[1],O=Object(s.useState)(0),h=Object(j.a)(O,2),g=h[0],x=h[1],v=Object(s.useState)(""),w=Object(j.a)(v,2),y=w[0],k=w[1];function N(){x(b)}function S(){f(0),r(g,y)}function C(e){f(Number(e.target.name))}function L(){f(g)}function E(){return String(Number(t.properties.rating).toPrecision(3)).split(".")}return Object(s.useEffect)((function(){f(0),x(0),k("")}),[t]),Object(D.jsxs)("div",{className:"rater",children:[Object(D.jsxs)("div",{className:"starsAndRating ".concat(void 0===t.properties.rating&&"noRating"),children:[Object(D.jsxs)("div",{className:"stars",children:[Object(D.jsxs)("h5",{className:"starRating",children:[$e.yourRating," :"]})," ",Object(D.jsx)("span",{className:"hoverValue mp-dark",children:at(b)}),Object(D.jsx)("br",{}),Object(p.a)(Array(5)).map((function(e,t){return t+=1,Object(D.jsx)("button",{type:"button",name:t,className:"starButton",onClick:N,onMouseEnter:C,onMouseLeave:L,style:t<=(b||g)?{color:i[b]}:{color:i[0]},children:Object(D.jsx)("span",{className:"star",children:"\u2605"})},t)}))]}),void 0!==t.properties.rating&&Object(D.jsx)("div",{className:"rating",children:Object(D.jsxs)("div",{className:"ratingAmount mp-border-primary relative",style:{borderColor:u()},title:$e.rating,children:[at(E()[0]),".",Object(D.jsx)("span",{children:at(E()[1])}),Object(D.jsxs)("sub",{className:"mp-dark mp-bg-light",style:{color:u()},title:$e.marks,children:[" ( ",t.properties.amount," ) "]})]})})]}),Object(D.jsx)(Ft,{comment:y,setComment:k}),Object(D.jsxs)("div",{className:"raterBtnContainer",children:[Object(D.jsx)("button",{type:"button",onClick:function(){if(0===Number(g))return le(o,{message:$e.rateZeroModal,acceptAction:S,cancelLabel:$e.goBack});S()},children:$e.send}),!c&&Object(D.jsx)("div",{className:"subtitle",children:$e.asAnonius})]})]})},qt=function(e){var t=e.feature,r=e.name,n=e.setName;if(Object(s.useEffect)((function(){var e;(null===t||void 0===t?void 0:t.name)?n(t.name):(null===t||void 0===t||null===(e=t.properties)||void 0===e?void 0:e.name)&&n(t.properties.name),console.log("%c\u29ed","color: #d0bfff",t)}),[t,n]),!(null===t||void 0===t?void 0:t.source))return console.log("wtf feature",t),null;if("ratedFeaturesSource"===t.source)return Object(D.jsx)("div",{className:"featurer",children:t.properties.name?Object(D.jsx)("div",{className:"featureNameWrap",children:Object(D.jsx)("p",{className:"featureName mp-bg-light mp-border-primary mp-dark",children:t.properties.name})}):Object(D.jsx)(D.Fragment,{})});return"createdPoly"===t.source?Object(D.jsxs)("div",{className:"featurer",children:[Object(D.jsx)("p",{className:"featurerGreetings",children:$e.newFeature}),t.properties.name?Object(D.jsx)("div",{className:"featureNameWrap",children:Object(D.jsx)("p",{className:"featureName mp-bg-light mp-border-primary mp-dark",children:t.properties.name})}):Object(D.jsx)("div",{className:"featureNameWrap",children:Object(D.jsx)("input",{type:"text",value:r,onInput:function(e){n(e.target.value),t.properties.name=e.target.value},placeholder:$e.newFeaturePHolder,title:$e.newFeaturePHolder,className:"featureName mp-bg-light mp-border-primary mp-dark"})})]}):Object(D.jsxs)("div",{className:"featurer",children:[Object(D.jsx)("p",{className:"featurerGreetings",children:$e.firstTimeRate}),t.properties.name?Object(D.jsx)("div",{className:"featureNameWrap",children:Object(D.jsx)("p",{className:"featureName mp-bg-light mp-border-primary mp-dark",children:t.properties.name})}):Object(D.jsx)(D.Fragment,{})]})};function Bt(e){var t;t="Polygon"===e.type?[e.coordinates]:e.coordinates;var r=-90,n=-180,a=90,c=180,s=[];t.forEach((function(e){s.push(function(e){var t=[];return e.forEach((function(e,s){t.push("("),e.forEach((function(e,i){var o=Object(j.a)(e,2),u=o[0],l=o[1];u<c&&(c=u),u>n&&(n=u),l>r&&(r=l),l<a&&(a=l),t[s]+=(i?", ":"")+String(u)+" "+String(l)})),t[s]+=")"})),"("+t.join(",")+")"}(e))}));var i="MULTIPOLYGON("+s.join(", ")+")";return[[n,r],[c,a],i]}r(28);var zt=function(){var e=Object(m.c)((function(e){return e.app.theme})),t=B[e];return Object(D.jsx)("div",{className:"mapLegend mp-bg-light mp-border-secondary mp-shadow-light",children:Object(D.jsxs)("div",{className:"ratingLegend",children:[Object(D.jsxs)("div",{className:"ratingDescription",children:[Object(D.jsx)("span",{children:$e.worstRating}),Object(D.jsx)("span",{}),Object(D.jsx)("span",{}),Object(D.jsx)("span",{}),Object(D.jsx)("span",{children:$e.bestRating})]}),Object(D.jsx)("div",{className:"ratingUnitsWrap",children:t.map((function(e,t){return Object(D.jsx)("div",{className:"ratingUnit",children:Object(D.jsx)("span",{className:"ratingColor",style:{backgroundColor:e}})},e+t)}))}),Object(D.jsx)("div",{className:"ratingGradientWrap",children:Object(D.jsx)("div",{className:"ratingGradient",style:{background:"linear-gradient(90deg, ".concat(t[0],", ").concat(t[3],", ").concat(t[5],")")}})})]})})};function At(e){return _t.apply(this,arguments)}function _t(){return(_t=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("GET","reviews","reviews",null,!1,"targetId=".concat(t)),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gt(e){return Kt.apply(this,arguments)}function Kt(){return(Kt=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("POST","reviews","postReview",Object(b.a)({},t),!1),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dt(e){return Wt.apply(this,arguments)}function Wt(){return(Wt=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("POST","reviews","postFeedback",{comment:t},!1),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ut(e,t){return Ht.apply(this,arguments)}function Ht(){return(Ht=Object(c.a)(a.a.mark((function e(t,r){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g("DELETE","reviews","reviews",{timestamp:t,place:r},!0),e.next=3,n();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Jt=function(e){var t=e.feature,r=e.resetRater,n=e.updateLayers,i=e.setGeoData,o=Object(m.b)(),u=Object(m.c)((function(e){return e.app})).reviewsShown,d=Object(m.c)((function(e){return e.user.id})),f=Object(s.useState)([]),O=Object(j.a)(f,2),h=O[0],g=O[1];if(Object(s.useEffect)((function(){return Object(c.a)(a.a.mark((function e(){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("ratedFeaturesSource"===(null===t||void 0===t?void 0:t.source)){e.next=2;break}return e.abrupt("return",g([]));case 2:return e.next=4,At(t.id);case 4:if("OK"===(r=e.sent).status){e.next=7;break}return e.abrupt("return",be(o,{message:$e.requestError}));case 7:g(r.data);case 8:case"end":return e.stop()}}),e)})))(),function(){g([])}}),[null===t||void 0===t?void 0:t.source,null===t||void 0===t?void 0:t.id]),"ratedFeaturesSource"!==(null===t||void 0===t?void 0:t.source))return null;function x(e){var s=e.target.attributes.timestamp.value,u={rating:t.properties.rating,amount:t.properties.amount,grade:e.target.attributes.grade.value,id:t.id};le(o,{message:$e.removeComment+"?",acceptAction:function(){return Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ut(s,u);case 2:if("OK"===e.sent.status){e.next=5;break}return e.abrupt("return",be(o,{message:$e.requestError}));case 5:i((function(e){for(var r=0;r<e.length;r++)if(e[r].id===t.id){var n=t.properties,a=n.amount,c=n.rating;e[r].properties=Object(b.a)(Object(b.a)({},e[r].properties),{},{rating:at(+((a*c-u.grade)/(a-1)).toFixed(5)),amount:a-1});break}return e})),n(),r();case 8:case"end":return e.stop()}}),e)})))()}})}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e||!e.includes("#"))return e;for(var t=[],r="",n="",a=0;a<e.length;a++){var c=e[a];n&&"#"===c?(t.push(Object(D.jsx)("span",{children:n})),n="",r="#"):n&&a===e.length-1?t.push(Object(D.jsx)("span",{children:n+c})):"#"===c?r="#":r?P.includes(c)?(t.push(Object(D.jsx)(l.b,{to:"/tags/item/"+r.substr(1)+c,children:Object(D.jsx)("span",{className:"commentTag cursor-pointer mp-counter",children:r+c})})),r="",n+=c):a===e.length-1?t.push(Object(D.jsx)(l.b,{to:"/tags/item/"+r.substr(1)+c,children:Object(D.jsx)("span",{className:"commentTag cursor-pointer mp-counter",children:r+c})})):r+=c:n+=c}return Object(D.jsx)("div",{children:t})}return Object(D.jsxs)("div",{className:"reviewsContainer ".concat(u?"expanded":"shrinked"),children:[h.length?h.map((function(e){var t,r;return e.name||(e.name=$e.anonimus),Object(D.jsxs)("div",{className:"reviewWrap mp-border-secondary mp-shadow-light",children:[Object(D.jsx)(l.b,{to:"/friends/item/"+e.author,children:Object(D.jsx)("div",{className:"authorLogo mp-bg-primary",children:Object(D.jsx)("span",{className:"mp-dark",title:e.login,children:null===(t=String(e.name))||void 0===t||null===(r=t[0])||void 0===r?void 0:r.toUpperCase()})})}),Object(D.jsxs)("div",{className:"reviewBody",children:[Object(D.jsx)("p",{className:"author mp-primary",children:e.name}),Object(D.jsxs)("div",{className:"reviewDate mp-secondary",children:[new Date(e.timestamp).toLocaleDateString(),Boolean("anonimus"!==e.author&&e.author===d)&&Object(D.jsx)("label",{onClick:x,className:"deleteComment cursor-pointer",timestamp:e.timestamp,grade:e.grade,children:" \u2715"})]}),Object(D.jsxs)("div",{className:"reviewRating",children:[e.grade,"/5",Object(D.jsx)("span",{className:"reviewStars stars",children:Object(p.a)(Array(5)).map((function(t,r){return r+=1,Object(D.jsx)("span",{className:r<=e.grade?"mp-accent starButton":"mp-secondary starButton",children:"\u2605"},r+e.timestamp)}))})]}),Boolean(e.comment)&&Object(D.jsx)("div",{className:"reviewComment ",children:v(e.comment)})]})]},e.author+e.timestamp)})):Object(D.jsx)("div",{children:$e.noreviews},"whatever"),Object(D.jsx)("div",{className:"skipperContainer",children:Object(D.jsx)("div",{className:"skipper mp-bg-light mp-border-secondary",onClick:function(){u?o({type:J}):function(e){e({type:H})}(o)},children:u?Object(D.jsx)("span",{className:"mp-secondary",children:"\u21a5"}):Object(D.jsx)("span",{className:"mp-secondary",children:"\u21a7"})})})]})},Qt=function(){var e=Object(m.c)((function(e){return e.user})),t=Object(m.c)((function(e){return e.app})),r=Object(m.b)(),n=Object(s.useState)(null),i=Object(j.a)(n,2),o=i[0],u=i[1],l=Object(s.useState)(""),d=Object(j.a)(l,2),f=d[0],h=d[1],g=Object(s.useState)(null),x=Object(j.a)(g,2),v=x[0],w=x[1],y=Object(s.useState)(0),k=Object(j.a)(y,2),N=k[0],S=k[1],C=Object(s.useState)(0),L=Object(j.a)(C,2),E=L[0],M=L[1];function T(){S(N+1)}function I(){h(""),u(null)}function R(){return(R=Object(c.a)(a.a.mark((function t(n,c){var s,i,u,l,d,m,h,g,x,y,k,N,S,C,L,R,F,P,q,B,z,A;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(R=function(t){t.newLevel&&(be(r,{status:"complete",message:$e.nowYourLevel+" "+t.newLevel}),Qe(r,t.newLevel)),Ve(r,e.commentsn+1)},s=Bt(o.geometry),i=Object(j.a)(s,3),u=i[0],l=i[1],d=i[2],m=new O.a.LngLatBounds(u,l),h=m.getCenter(),g=h.lng,x=h.lat,y={comment:c,grade:n,targetId:o.id},k={lng:g,lat:x,id:o.id,name:o.properties.name||"",polyString:d},N=tt(g,x,16),S=N.x,C=N.y,k.x=S,k.y=C,me(r,null),L=Object(p.a)(v),"ratedFeaturesSource"!==o.source){t.next=31;break}return t.next=14,Gt({userId:e.id,review:y,place:Object(b.a)(Object(b.a)({},o.properties),{},{id:o.id,polyString:d}),userLevel:e.level,commentsNumber:e.commentsn});case 14:if("OK"===(F=t.sent).status){t.next=17;break}return t.abrupt("return",be(r,{message:$e.requestError+" #ppr1"}));case 17:R(F),P=0;case 19:if(!(P<L.length)){t.next=29;break}if(L[P].id!==o.id){t.next=26;break}return q=o.properties,B=q.amount,z=q.rating,L[P].properties?L[P].properties=Object(b.a)({},o.properties):L[P].properties={},L[P].properties.rating=at(+((B*z+y.grade)/(B+1)).toFixed(5)),L[P].properties.amount=B+1,t.abrupt("break",29);case 26:P++,t.next=19;break;case 29:t.next=38;break;case 31:return t.next=33,Gt({userId:e.id,review:y,place:k,userLevel:e.level,commentsNumber:e.commentsn});case 33:if("OK"===(A=t.sent).status){t.next=36;break}return t.abrupt("return",be(r,{message:$e.requestError+" #ppr2"}));case 36:R(A),L.push({type:"Feature",properties:{rating:n,name:f,amount:1},id:o.id,geometry:o.geometry});case 38:return t.next=40,It({user:e.id,comment:c,placeId:o.id});case 40:if("OK"===t.sent.status){t.next=43;break}return t.abrupt("return",be(r,{message:$e.requestError+" #ptg_Main_3"}));case 43:w(L),T(),"createdPoly"===o.source&&M(E+1),I();case 47:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(s.useEffect)((function(){oe(r)}),[]),Object(D.jsxs)("div",{className:t.mapHidden?"hidden":"mainWrapper",children:[Object(D.jsx)(vt,{feature:o,setFeature:u,resetRater:I,geoData:v,setGeoData:w,featureTrigger:N},E),Object(D.jsx)(zt,{}),o&&Object(D.jsxs)("div",{className:"featureContainer mp-bg-light mp-border-secondary",children:[Object(D.jsx)(qt,{feature:o,name:f,setName:h}),Object(D.jsx)(Pt,{feature:o,onSubmit:function(e,t){return R.apply(this,arguments)}}),Object(D.jsx)(Jt,{feature:o,updateLayers:T,setGeoData:w,resetRater:I}),Object(D.jsx)("div",{className:"closeFeature mp-bg-light mp-dark mp-border-secondary",onClick:I,title:$e.close,children:"\u2715"})]})]})};function Xt(e){return Yt.apply(this,arguments)}function Yt(){return(Yt=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("POST","auth","login",Object(b.a)({},t),!0),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Vt=g("GET","auth","refresh",null,!0),Zt=g("GET","auth","logout",null,!0);function $t(e,t){return er.apply(this,arguments)}function er(){return(er=Object(c.a)(a.a.mark((function e(t,r){var n,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+r},body:JSON.stringify(Object(b.a)({},t)),credentials:"include"},e.prev=1,e.next=4,fetch(h+"auth/glogin",n);case 4:return c=e.sent,e.next=7,c.json();case 7:return s=e.sent,e.abrupt("return",s);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}var tr=function(e){var t=e.message,r=void 0===t?"":t,n=e.setMessage,a=e.color,c=void 0===a?"accent":a,s=e.title,i=void 0===s?"":s;if(!r)return null;var o="responser mp-".concat(c," mp-border-").concat(c);return Object(D.jsxs)("div",{className:o,children:[Object(D.jsxs)("div",{className:"header",children:[Object(D.jsx)("h6",{children:i}),Object(D.jsx)("div",{className:"close-cross cursor-pointer mp-".concat(c),onClick:function(){n("")},children:"\u2716"})]}),Object(D.jsx)("p",{children:r})]})},rr=function(){var e=Object(m.b)(),t=Object(d.f)(),r=Object(m.c)((function(e){return e.user})),n=Object(m.c)((function(e){return e.app})),i=Object(d.g)().pathname,o=Object(s.useState)(""),u=Object(j.a)(o,2),b=u[0],p=u[1],f=Object(s.useState)(""),O=Object(j.a)(f,2),h=O[0],g=O[1],x=Object(s.useState)(""),v=Object(j.a)(x,2),w=v[0],y=v[1];function k(){return(k=Object(c.a)(a.a.mark((function r(){var n;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return y($e.loading+"..."),r.next=3,Xt({login:b,pword:h});case 3:if("WRONG"!==(n=r.sent).status){r.next=6;break}return r.abrupt("return",y($e.wrongAuth));case 6:if("OK"!==n.status){r.next=14;break}return de(e),be(e,{message:$e.greetings+", "+n.data.name,status:"complete",title:null}),y(""),r.next=12,rt(e);case 12:return t.push("/"),r.abrupt("return",He(e,n.data));case 14:y($e.errorReg+", "+$e.errCode+": "+(n.msg||n));case 15:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function N(){return(N=Object(c.a)(a.a.mark((function t(){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Zt();case 2:if("OK"!==(n=t.sent).status){t.next=9;break}return be(e,{message:$e.farewell+", "+r.name,status:"complete",title:null}),p(""),g(""),y(""),t.abrupt("return",Je(e));case 9:y($e.errorReg+", "+$e.errCode+": "+(n.msg||n));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(e){return C.apply(this,arguments)}function C(){return(C=Object(c.a)(a.a.mark((function r(n){var c,s,i;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=n.getBasicProfile(),s={name:c.getName(),avatar:c.getImageUrl(),gmail:c.getEmail()},r.next=4,$t(s,n.getAuthResponse().id_token);case 4:if("FIRSTTIME"!==(i=r.sent).status){r.next=14;break}return R.token=n.getAuthResponse().id_token,R.name=i.data.name,R.login=i.data.login,i.data.login||(R.occupiedLogin=c.getEmail().split("@")[0]),R.avatar=i.data.avatar,R.id=c.getId(),de(e),r.abrupt("return",t.push("/googleConfirm"));case 14:if("OK"!==i.status){r.next=22;break}return de(e),be(e,{message:$e.greetings+", "+i.data.name,status:"complete",title:null}),y(""),r.next=20,rt(e);case 20:return t.push("/"),r.abrupt("return",He(e,i.data));case 22:y($e.errorReg+", "+$e.errCode+": "+(i.msg||i));case 23:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function L(e){console.log("%c\u29ed failed","color: #00a3cc",e),y($e.errorReg+", "+$e.errCode+": "+JSON.stringify(e))}return Object(s.useEffect)((function(){var t=window.gapi;if(!t)return be(e,{message:$e.networkError});t.load("auth2",(function(){t.auth2.init().then((function(e){e.signOut().then((function(){t.signin2.render("google-signin-button",{width:200,height:32,longtitle:!0,onsuccess:S,onfailure:L,theme:"dark"===n.theme||"blueprint"===n.theme?"dark":"white"})}))}))}))}),[]),Object(D.jsx)("div",{children:n.isLogged?Object(D.jsxs)("div",{children:[Object(D.jsxs)("h4",{children:[$e.greetings,", ",r.name]}),Object(D.jsx)("button",{className:"primary",onClick:function(){return N.apply(this,arguments)},children:$e.logout})]}):Object(D.jsxs)("div",{children:[Object(D.jsxs)("div",{className:"/auth"!==i?"login-form login-form-bordered mp-border-secondary":"login-form",children:[Object(D.jsxs)("label",{htmlFor:"name",children:[$e.yourLogin,":"]}),Object(D.jsx)("input",{type:"text",name:"login",value:b,onInput:function(e){p(e.target.value)},autoFocus:!0}),Object(D.jsx)("br",{}),Object(D.jsxs)("label",{htmlFor:"pword",children:[$e.yourPword,":"]}),Object(D.jsx)("input",{type:"password",name:"pword",value:h,onInput:function(e){g(e.target.value)}}),Object(D.jsx)(tr,{message:w,setMessage:y}),Object(D.jsx)("button",{className:"primary mp-border-accent loginBtn",onClick:function(){return k.apply(this,arguments)},children:$e.confirm}),Object(D.jsx)("div",{id:"google-signin-button",className:"google-signin-button g-signin2 google-oauthBtn","data-onsuccess":"onSignIn"})]}),"/auth"!==i&&Object(D.jsx)("div",{className:"align-center",children:Object(D.jsx)(l.b,{to:"/auth?reg=true",onClick:function(){de(e)},children:Object(D.jsx)("button",{className:"button",children:$e.register})})})]})})};function nr(e){return ar.apply(this,arguments)}function ar(){return(ar=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("POST","users","register",Object(b.a)({},t),!0),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cr(e){return sr.apply(this,arguments)}function sr(){return(sr=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("POST","users","gregister",Object(b.a)({},t),!0),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ir(e){return or.apply(this,arguments)}function or(){return(or=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("POST","users","update",Object(b.a)({},t),!0),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ur(e){return lr.apply(this,arguments)}function lr(){return(lr=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("POST","users","updatePword",Object(b.a)({},t),!0),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dr(e){return br.apply(this,arguments)}function br(){return(br=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g("GET","settings","setLang",null,!0,"lang="+t),e.next=3,r();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pr={login:"",pword:"",name:"",question:$e.secretExample,answer:""},jr=function(){var e=Object(m.b)(),t=Object(d.f)(),r=Object(s.useState)(pr),n=Object(j.a)(r,2),i=n[0],o=n[1],u=Object(s.useState)(""),l=Object(j.a)(u,2),p=l[0],f=l[1],O=Object(s.useRef)(null),h=Object(s.useState)(!1),g=Object(j.a)(h,2),x=g[0],v=g[1];function w(e){o(Object(b.a)(Object(b.a)({},i),{},Object(Ze.a)({},e.target.name,e.target.value)))}function y(){return(y=Object(c.a)(a.a.mark((function r(){var n,c,s;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i.login&&i.pword){r.next=2;break}return r.abrupt("return",f($e.fillRequiredFields));case 2:if(!i.question||i.answer){r.next=6;break}return i.question===$e.secretExample&&v(!0),O.current.focus(),r.abrupt("return",f($e.secretValidation));case 6:if(!((null===(n=i.question)||void 0===n?void 0:n.length)>300)){r.next=8;break}return r.abrupt("return",f(($e.field+" "+$e.secretQuestion+" "+$e.tooLong).toLocaleLowerCase().capitalize()));case 8:if(!((null===(c=i.answer)||void 0===c?void 0:c.length)>255)){r.next=10;break}return r.abrupt("return",f(($e.field+" "+$e.secterAnswer+" "+$e.tooLong).toLocaleLowerCase().capitalize()));case 10:if(!(i.login.length>50)){r.next=12;break}return r.abrupt("return",f(($e.field+" "+$e.login+" "+$e.tooLong).toLocaleLowerCase().capitalize()));case 12:if(!(i.pword.length>50)){r.next=14;break}return r.abrupt("return",f(($e.field+" "+$e.password+" "+$e.tooLong).toLocaleLowerCase().capitalize()));case 14:if(!(i.name.length>140)){r.next=16;break}return r.abrupt("return",f(($e.field+" "+$e.userName+" "+$e.tooLong).toLocaleLowerCase().capitalize()));case 16:return r.next=18,nr(i);case 18:if(s=r.sent,console.log("%c\u29ed","color: #86bf60",i,s),"OK"!==s.status){r.next=27;break}f($e.successfullReg),He(e,s.data),o(pr),t.push("/"),r.next=36;break;case 27:if("EXISTING"!==s.status){r.next=31;break}return r.abrupt("return",f($e.loginOccupied+" - "+i.login));case 31:if("BANEDPWORD"!==s.status){r.next=35;break}return r.abrupt("return",f($e.bannedPwod+" - "+i.pword));case 35:f($e.errorReg+", "+$e.errCode+": "+(s.msg||s));case 36:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return Object(D.jsx)("div",{children:Object(D.jsxs)("div",{className:"register-form",children:[Object(D.jsx)("h4",{children:$e.register}),Object(D.jsxs)("label",{htmlFor:"login",children:[$e.login,":"]}),Object(D.jsx)("input",{type:"text",name:"login",value:i.login,onInput:w,autoFocus:!0,required:!0}),Object(D.jsx)("br",{}),Object(D.jsxs)("label",{htmlFor:"name",children:[$e.userName,":"]}),Object(D.jsx)("input",{type:"text",name:"name",value:i.name,onInput:w,required:!0}),Object(D.jsx)("br",{}),Object(D.jsxs)("label",{htmlFor:"pword",children:[$e.password,":"]}),Object(D.jsx)("input",{type:"password",name:"pword",value:i.pword,onInput:w,required:!0}),Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),Object(D.jsxs)("label",{htmlFor:"question",children:[$e.secretQuestion,":"]}),Object(D.jsx)("br",{}),Object(D.jsx)("textarea",{type:"text",name:"question",value:i.question,onInput:w,autoComplete:"false"}),Object(D.jsx)("p",{className:"little-hint",children:$e.secretHint}),Object(D.jsxs)("label",{htmlFor:"answer",children:[$e.secterAnswer,":"]}),Object(D.jsx)("input",{type:"text",name:"answer",value:i.answer,onInput:w,required:Boolean(i.question),ref:O,autoComplete:"false"}),Object(D.jsx)("div",{className:"register-responser",children:Object(D.jsx)(tr,{message:p,setMessage:f})}),x&&Object(D.jsx)("button",{className:"btn-replica mp-border-counter mp-primary-hover",onClick:function(){v(!1),f($e.secretReplica2),O.current.focus()},children:$e.secretReplica}),Object(D.jsx)("button",{className:"mp-border-accent",type:"button",onClick:function(){return y.apply(this,arguments)},children:$e.submit})]})})},mr=(r(41),function(){var e=Object(m.b)(),t=new URLSearchParams(Object(d.g)().search).get("reg"),r=Object(s.useState)(!0),n=Object(j.a)(r,2),a=n[0],c=n[1];return Object(s.useEffect)((function(){ue(e),t&&c(!1)}),[]),Object(D.jsx)("div",{className:"auth-container relative",children:Object(D.jsxs)("div",{className:"absolute center auth-subcontainer",children:[a?Object(D.jsx)("h3",{className:"align-center",children:$e.login}):null,Object(D.jsx)("div",{className:"auth-action-wrap mp-border-secondary",children:a?Object(D.jsx)(rr,{}):Object(D.jsx)(jr,{})}),Object(D.jsx)("div",{className:"align-center",children:a?Object(D.jsx)("button",{className:"small",onClick:function(){return c(!1)},children:$e.register}):Object(D.jsx)("button",{className:"small",onClick:function(){return c(!0)},children:$e.login})})]})})}),fr=(r(42),function(e){var t,r=e.setNavState,n=e.hideSelf,a=Object(m.c)((function(e){return e.user})),c=Object(m.c)((function(e){return e.app}));function s(){n()}return Object(D.jsxs)("div",{className:"left-menu-container",children:[Object(D.jsxs)("div",{className:"menu-user",children:[Object(D.jsx)("div",{className:"menu-avatar mp-bg-counter",children:Object(D.jsx)("div",{className:"letter mp-light",children:(null===(t=a.name)||void 0===t?void 0:t[0])||"?"})}),Object(D.jsxs)("div",{className:"menu-user-subcontainer",children:[Object(D.jsx)("div",{className:"menu-username",children:a.name||"no name"}),Object(D.jsxs)("div",{className:"menu-userlevel",children:[$e.level,": ",Object(D.jsx)("span",{className:"mp-accent",children:a.level})]})]})]}),Object(D.jsx)("div",{children:c.isLogged?Object(D.jsxs)(l.b,{to:"/editProfile",onClick:s,className:"left-menu-item mp-dark",children:[" ",$e.profile]}):Object(D.jsxs)(l.b,{to:"/auth",onClick:s,className:"left-menu-item mp-dark",children:[" ",$e.login]})}),Object(D.jsxs)("div",{onClick:function(){r(yr.theme)},className:"left-menu-item mp-accent-hover pick-theme-item",children:[$e.theme,Object(D.jsxs)("label",{className:"little-hint",children:["(",$e[c.theme],")"]})]}),Object(D.jsx)("div",{onClick:function(){r(yr.language)},className:"left-menu-item mp-accent-hover pick-theme-item",children:$e.language}),Object(D.jsx)("div",{className:"left-menu-item",children:Object(D.jsxs)(l.b,{to:"/friends",onClick:s,className:"transition mp-dark",children:[$e.friends,Boolean(a.requests.length)&&Object(D.jsx)("span",{className:"mp-accent",children:" ("+a.requests.length+")"})]})}),Object(D.jsx)("div",{className:"left-menu-item",children:Object(D.jsx)(l.b,{to:"/tags",className:"transition mp-dark",onClick:s,children:$e.tags})}),Object(D.jsx)("div",{className:"readonly",children:$e.routes}),Object(D.jsx)("div",{className:"left-menu-item",children:Object(D.jsx)(l.b,{to:"/about",className:"transition mp-dark",onClick:s,children:$e.aboutUs})})]})}),Or=function(e){var t=e.setNavState,r=Object(m.b)(),n=Object(s.useState)(),i=Object(j.a)(n,2),o=i[0],u=i[1];function l(e){return d.apply(this,arguments)}function d(){return(d=Object(c.a)(a.a.mark((function e(t){var n,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.attributes.name.value,e.next=3,dr(n);case 3:if("OK"!==(c=e.sent).status){e.next=6;break}return e.abrupt("return",window.location.reload());case 6:be(r,{message:JSON.stringify(c),title:$e.error,status:"error"});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){u(document.documentElement.lang)}),[]),Object(D.jsxs)("div",{className:"left-menu-container lang-nav",children:[Object(D.jsxs)("div",{className:"menu-user theme-menu",children:[Object(D.jsx)("div",{onClick:function(){t(yr.default)},className:"\r menu-avatar cursor-pointer \r mp-bg-accent-hover mp-light-hover\r mp-bg-primary mp-light\r transition",children:Object(D.jsx)("div",{className:"letter",children:"<"})}),Object(D.jsxs)("div",{className:"menu-user-subcontainer",children:[Object(D.jsx)("div",{className:"menu-username",children:$e.pickLanguage}),Object(D.jsxs)("div",{className:"menu-userlevel",children:[$e.language,": ",Object(D.jsx)("span",{className:"mp-accent",children:$e[o]})]})]})]}),Object(D.jsx)("div",{className:"pickTheme-container",children:Object.keys(F).map((function(e,t){return Object(D.jsx)("div",{className:"\n              pickTheme-item mp-border-secondary mp-counter-hover transition-small\n              ".concat(e===o?" current-theme mp-accent mp-border-accent events-none":"","\n              "),name:e,onClick:l,children:$e[e]},e+t)}))})]})};function hr(){var e=window.localStorage.getItem("mp/preferences");return e?JSON.parse(e):null}function gr(){hr()||window.localStorage.setItem("mp/preferences","{}")}function xr(e,t){var r=hr();r[e]=t,window.localStorage.setItem("mp/preferences",JSON.stringify(r))}var vr,wr=function(e){var t=e.setNavState,r=Object(m.c)((function(e){return e.app})),n=Object(m.b)(),a=Object(s.useState)(I.indexOf(r.theme)),c=Object(j.a)(a,2),i=c[0],o=c[1];function u(e){var t,r,a=e.target.attributes.name.value;o(a),t=n,r=I[a],I.indexOf(r)<0&&(r=I[0]),t({type:Z,theme:r}),_(I[a]),xr("theme",I[a])}return Object(D.jsxs)("div",{className:"left-menu-container",children:[Object(D.jsxs)("div",{className:"menu-user theme-menu",children:[Object(D.jsx)("div",{onClick:function(){t(yr.default)},className:"\r menu-avatar cursor-pointer \r mp-bg-accent-hover mp-light-hover\r mp-bg-primary mp-light\r transition",children:Object(D.jsx)("div",{className:"letter",children:"<"})}),Object(D.jsxs)("div",{className:"menu-user-subcontainer",children:[Object(D.jsx)("div",{className:"menu-username",children:$e.pickTheme}),Object(D.jsxs)("div",{className:"menu-userlevel",children:[$e.theme,": ",Object(D.jsx)("span",{className:"mp-accent",children:$e[I[i]]})]})]})]}),Object(D.jsx)("div",{className:"pickTheme-container",children:I.map((function(e,t){return Object(D.jsx)("div",{className:"\n              pickTheme-item ".concat(e,"-theme mp-border-secondary mp-counter-hover transition-small\n              ").concat(+t===+i?" current-theme mp-accent mp-border-accent events-none":"","\n              "),name:t,onClick:u,children:$e[e]},e+String(i))}))})]})},yr={default:"default",theme:"theme",language:"language"},kr=function(e){var t=e.leftMenu,r=e.setLeftMenu,n=Object(s.useState)(yr.default),a=Object(j.a)(n,2),c=a[0],i=a[1];function o(){r(!1)}var u="mp-bg-light mp-border-secondary";return Object(D.jsxs)("div",{id:"left-menu",className:t?"active "+u:u,children:[c===yr.default&&Object(D.jsx)(fr,{hideSelf:o,setNavState:i}),c===yr.theme&&Object(D.jsx)(wr,{hideSelf:o,setNavState:i}),c===yr.language&&Object(D.jsx)(Or,{setNavState:i}),Object(D.jsx)("div",{id:"closeLeftAtBottom",children:Object(D.jsx)("button",{onClick:o,children:"x"})})]})},Nr=(r(43),["title","titleId"]);function Sr(){return(Sr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Cr(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Lr(e,t){var r=e.title,n=e.titleId,a=Cr(e,Nr);return s.createElement("svg",Sr({fill:"current",enableBackground:"new 0 0 26 26",viewBox:"0 0 26 26",xmlSpace:"preserve",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,vr||(vr=s.createElement("g",null,s.createElement("path",{d:"M24.25,12.25H1.75C1.3359375,12.25,1,12.5859375,1,13s0.3359375,0.75,0.75,0.75h22.5   c0.4140625,0,0.75-0.3359375,0.75-0.75S24.6640625,12.25,24.25,12.25z"}),s.createElement("path",{d:"M1.75,7.75h22.5C24.6640625,7.75,25,7.4140625,25,7s-0.3359375-0.75-0.75-0.75H1.75   C1.3359375,6.25,1,6.5859375,1,7S1.3359375,7.75,1.75,7.75z"}),s.createElement("path",{d:"M24.25,18.25H1.75C1.3359375,18.25,1,18.5859375,1,19s0.3359375,0.75,0.75,0.75h22.5   c0.4140625,0,0.75-0.3359375,0.75-0.75S24.6640625,18.25,24.25,18.25z"}))))}var Er,Mr=s.forwardRef(Lr),Tr=(r.p,["title","titleId"]);function Ir(){return(Ir=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Rr(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Fr(e,t){var r=e.title,n=e.titleId,a=Rr(e,Tr);return s.createElement("svg",Ir({fill:"current",enableBackground:"new 0 0 800 800",id:"Layer_1",viewBox:"0 0 800 800",xmlSpace:"preserve",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,Er||(Er=s.createElement("g",null,s.createElement("path",{d:"M417.1,176c9.6-2.1-1.1-22.4-9.6-24.5c-6.4-1.1-18.1,9.6-17.1,16C391.5,173.9,407.5,179.2,417.1,176z"}),s.createElement("path",{d:"M398.9,53.3C208,53.3,52.3,209.1,52.3,400S208,746.7,398.9,746.7S745.6,590.9,745.6,400S589.9,53.3,398.9,53.3z M681.6,400   c0,115.2-69.3,214.4-167.5,258.1c-12.8,2.1-30.9,3.2-68.3,3.2c-42.7-1.1-53.3,13.9-64,21.3c-10.7-1.1-22.4-2.1-33.1-4.3   c-2.1-1.1-4.3-2.1-6.4-3.2c-23.5-14.9-39.5-14.9-48-12.8c-103.5-41.6-177.1-144-177.1-262.4c0-41.6,8.5-80,24.5-115.2   c17.1,62.9-24.5,66.1-24.5,115.2c0,32,21.3,85.3,53.3,134.4c36.3,54.4,83.2,101.3,100.3,97.1c30.9-9.6-70.4-24.5-7.5-139.7   c62.9-116.3-82.1-39.5-103.5-198.4c-7.5-57.6,32-40.5,60.8-83.2c21.3-33.1,64-40.5,58.7-64c17.1-8.5,35.2-14.9,54.4-19.2   c-20.3,18.1-38.4,33.1,3.2,24.5c45.9-9.6,69.3-18.1,72.5-32c25.6,1.1,49.1,4.3,72.5,11.7c-17.1-2.1-49.1-2.1-50.1,20.3   c-2.1,30.9-6.4,42.7-21.3,45.9s-18.1,7.5-18.1,13.9c1.1,19.2,19.2,23.5,49.1,0c29.9-23.5,38.4,7.5,61.9,12.8   c23.5,5.3,20.3-23.5,39.5-16c19.2,7.5,42.7,49.1-17.1,44.8c-59.7-3.2-89.6-20.3-133.3,2.1c-61.9,30.9-51.2,122.7,13.9,121.6   c53.3,0,68.3,2.1,85.3,58.7S480,512,509.9,555.7c29.9,45.9,100.3-82.1,98.1-124.8s55.5-62.9,23.5-113.1   c-32-49.1,6.4-49.1,34.1-20.3C675.2,329.6,681.6,363.7,681.6,400z"}),s.createElement("path",{d:"M602.7,523.7c14.9,5.3,53.3-74.7,36.3-67.2C620.8,464,590.9,519.5,602.7,523.7z"}))))}var Pr=s.forwardRef(Fr),qr=(r.p,function(){var e=Object(m.c)((function(e){return e.app})),t=Object(m.c)((function(e){return e.user.friends})),r=Object(d.f)(),n=Object(s.useState)(!1),a=Object(j.a)(n,2),c=a[0],i=a[1],o=Object(s.useState)($e.defaultMode),u=Object(j.a)(o,2),b=u[0],p=u[1];return Object(s.useEffect)((function(){!function(){var r=Br(e,t);p(r)}()}),[e.mode,e.friendModeId,e.tagModeTag]),Object(D.jsxs)("div",{className:"mainNavigation mp-bg-light mp-border-secondary mp-shadow-primary",children:[Object(D.jsx)(kr,{leftMenu:c,setLeftMenu:i}),Object(D.jsxs)("div",{className:"flex-wrap nav-menu-back-wrap",children:[e.mapHidden&&Object(D.jsx)("div",{id:"backToMain",className:"nav-icon",onClick:function(){i(!1),r.push("/")},title:$e.toMain,children:Object(D.jsx)(Pr,{fill:"var(--accent)"})}),Object(D.jsx)("div",{id:"openLeftMenu",className:"nav-icon",onClick:function(){i(!0)},title:$e.menu,children:Object(D.jsx)(Mr,{fill:"var(--primary)"})}),Object(D.jsxs)(l.b,{to:"/mapMode",className:"currModeLabels",children:[Object(D.jsxs)("span",{className:"mp-dark",children:[$e.mode+": "," "]}),Object(D.jsx)("span",{className:"mp-counter",children:b})]})]})]})});function Br(e,t){var r=e.mode,n=e.tagModeTag;return"watch"===r?$e.marksOf+" "+function(e,t){var r=e.find((function(e){return e.id===t.friendModeId}));return r.name+" ("+r.login+")"}(t,e):"draw"===r?$e.drawing:"drawRoute"===r?$e.drawRouteMode:"tags"===r?$e.tag+" #"+n:$e.defaultMode}var zr,Ar=function(){var e=Object(m.c)((function(e){return e.app.modal})),t=Object(m.b)(),r=void 0!==e.acceptLabel?e.acceptLabel:$e.acceptDefault,n=void 0!==e.cancelLabel?e.cancelLabel:$e.cancelDefault;function s(){return(s=Object(c.a)(a.a.mark((function r(){var n;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,null===(n=e.cancelAction)||void 0===n?void 0:n.call(e);case 2:de(t);case 3:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function i(){return(i=Object(c.a)(a.a.mark((function r(){var n;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,null===(n=e.acceptAction)||void 0===n?void 0:n.call(e);case 2:de(t);case 3:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return e?Object(D.jsx)("div",{className:"modal-dialog-wrap",children:Object(D.jsx)("div",{className:"modal-dialog mp-border-dark mp-bg-light",children:Object(D.jsxs)("div",{className:"modal-dialog-content mp-dark",children:[Object(D.jsx)("div",{className:"modal-content",children:e.message}),Boolean(e.children)&&e.children,Object(D.jsxs)("div",{className:"modal-buttons",children:[Boolean(n)&&Object(D.jsx)("button",{className:"modal-cancel",onClick:function(){return s.apply(this,arguments)},children:n}),Boolean(r)&&Object(D.jsx)("button",{className:"modal-accept",onClick:function(){return i.apply(this,arguments)},children:r})]})]})})}):null},_r={login:"",pword:"",name:"",question:"",answer:""},Gr=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.user})),r=Object(d.f)(),n=Object(s.useState)(_r),i=Object(j.a)(n,2),o=i[0],u=i[1],l=Object(s.useState)(!1),p=Object(j.a)(l,2),f=p[0],O=p[1],h=Object(s.useState)(""),g=Object(j.a)(h,2),x=g[0],v=g[1];function w(e){u(Object(b.a)(Object(b.a)({},o),{},Object(Ze.a)({},e.target.name,e.target.value)))}function y(){return(y=Object(c.a)(a.a.mark((function t(r){var n,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),o.login&&o.name){t.next=3;break}return t.abrupt("return",v($e.fillRequiredFields));case 3:if(!(o.login.length>50)){t.next=5;break}return t.abrupt("return",v(($e.field+" "+$e.login+" "+$e.tooLong).toLocaleLowerCase().capitalize()));case 5:if(!(o.pword.length>50)){t.next=7;break}return t.abrupt("return",v(($e.field+" "+$e.password+" "+$e.tooLong).toLocaleLowerCase().capitalize()));case 7:if(!(o.name.length>140)){t.next=9;break}return t.abrupt("return",v(($e.field+" "+$e.userName+" "+$e.tooLong).toLocaleLowerCase().capitalize()));case 9:if(!f){t.next=22;break}return t.next=12,ur(o);case 12:if("OK"!==(n=t.sent).status){t.next=19;break}return v($e.successfulUpdate),O(!1),t.abrupt("return",He(e,n.data));case 19:if("BANEDPWORD"!==n.status){t.next=21;break}return t.abrupt("return",v($e.bannedPwod+" - "+o.pword));case 21:return t.abrupt("return",v($e.errCode+": "+(n.msg||n)));case 22:return t.next=24,ir(o);case 24:if(c=t.sent,console.log("%c\u29ed","color: #514080",c),"OK"!==c.status){t.next=31;break}return v($e.successfulUpdate),t.abrupt("return",He(e,c.data));case 31:if("EXISTING"!==c.status){t.next=35;break}return t.abrupt("return",v($e.loginOccupied+" - "+o.login));case 35:if("PWORDCHANGE"!==c.status){t.next=41;break}return O(!0),u(Object(b.a)(Object(b.a)({},o),{},{question:c.data.question})),t.abrupt("return",v($e.secretChallenge));case 41:v($e.errCode+": "+(c.msg||c));case 42:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(){return(k=Object(c.a)(a.a.mark((function n(){var c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Zt();case 2:if("OK"!==(c=n.sent).status){n.next=9;break}return u(_r),v(""),be(e,{message:$e.farewell+", "+t.name,status:"complete",title:""}),Je(e),n.abrupt("return",r.push("/"));case 9:v($e.errCode+": "+(c.msg||c));case 10:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(s.useEffect)((function(){return t.id&&u((function(e){return Object(b.a)(Object(b.a)({},e),{},{name:t.name,login:t.login,avatar:t.avatar})})),function(){u(_r)}}),[t]),Object(s.useEffect)((function(){ue(e)}),[]),Object(D.jsx)("div",{className:"edit-profile-area relative ",children:Object(D.jsxs)("div",{className:"edit-profile-wrapper absolute center mp-border-secondary",children:[Object(D.jsxs)("form",{className:"edit-profile ",children:[Object(D.jsx)("h4",{children:$e.editProfile}),Object(D.jsxs)("label",{htmlFor:"login",children:[$e.login,":"]}),Object(D.jsx)("input",{type:"text",name:"login",value:o.login,onInput:w,autoFocus:!0,required:!0}),Object(D.jsx)("br",{}),Object(D.jsxs)("label",{htmlFor:"name",children:[$e.userName,":"]}),Object(D.jsx)("input",{type:"text",name:"name",value:o.name,onInput:w,autoFocus:!0,required:!0}),Object(D.jsx)("br",{}),Object(D.jsxs)("label",{htmlFor:"pword",children:[$e.newPassword,":"]}),Object(D.jsx)("input",{type:"password",name:"pword",value:o.pword,onInput:w}),Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),f&&Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)("label",{htmlFor:"question",children:[$e.secretQuestion,":"]}),Object(D.jsx)("br",{}),Object(D.jsx)("textarea",{type:"text",name:"question",value:o.question,onInput:w,autoComplete:"false",readOnly:!0}),Object(D.jsx)("br",{}),Object(D.jsxs)("label",{htmlFor:"answer",children:[$e.secterAnswer,":"]}),Object(D.jsx)("input",{type:"text",name:"answer",value:o.answer,onInput:w,required:Boolean(o.question),autoComplete:"false"}),Object(D.jsx)("br",{})]}),Object(D.jsx)(tr,{message:x,setMessage:v})]}),Object(D.jsx)("hr",{className:"mp-border-secondary"}),Object(D.jsxs)("div",{className:"logout-container",children:[Object(D.jsx)("button",{className:"mp-border-secondary profile-logout",onClick:function(){return k.apply(this,arguments)},children:$e.logout}),Object(D.jsx)("button",{className:"mp-border-accent",onClick:function(e){return y.apply(this,arguments)},children:$e.submit})]})]})})},Kr=function(){var e=Object(m.b)(),t=Object(d.f)(),r=Object(s.useState)(Object(b.a)({},R)),n=Object(j.a)(r,2),i=n[0],o=n[1],u=Object(s.useState)(""),l=Object(j.a)(u,2),p=l[0],f=l[1];function O(e){o(Object(b.a)(Object(b.a)({},i),{},Object(Ze.a)({},e.target.name,e.target.value)))}function h(){return(h=Object(c.a)(a.a.mark((function r(){var n,c;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(i.login.length>50)){r.next=2;break}return r.abrupt("return",f(($e.field+" "+$e.login+" "+$e.tooLong).toLocaleLowerCase().capitalize()));case 2:if(!(i.name.length>140)){r.next=4;break}return r.abrupt("return",f(($e.field+" "+$e.userName+" "+$e.tooLong).toLocaleLowerCase().capitalize()));case 4:return delete(n=Object(b.a)({},i)).occupiedLogin,r.next=8,cr(n);case 8:if(c=r.sent,console.log("%c\u29ed","color: #0088cc",c),"OK"!==c.status){r.next=19;break}f($e.successfullReg),He(e,c.data),console.log("%c\u29ed","color: #00b300",R),Object.keys(R).forEach((function(e){R.key=null})),o(R),t.push("/"),r.next=28;break;case 19:if("EXISTING"!==c.status){r.next=23;break}return r.abrupt("return",f($e.loginOccupied+" - "+i.login));case 23:if("BANEDPWORD"!==c.status){r.next=27;break}return r.abrupt("return",f($e.bannedPwod+" - "+i.pword));case 27:f($e.errorReg+", "+$e.errCode+": "+(c.msg||c));case 28:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return Object(s.useEffect)((function(){o(R)}),[]),Object(D.jsx)("div",{className:"auth-container relative",children:Object(D.jsx)("div",{className:"absolute center auth-subcontainer",children:Object(D.jsxs)("div",{className:"google-regform mp-border-secondary",children:[Object(D.jsx)("h4",{children:$e.oauthTitle}),Object(D.jsxs)("label",{htmlFor:"login",children:[$e.login,":"]}),Object(D.jsx)("input",{type:"text",name:"login",value:i.login,onInput:O,required:!0}),R.occupiedLogin&&Object(D.jsx)("p",{className:"little-hint",children:$e.login+" "+R.occupiedLogin+" "+$e.occupied}),Object(D.jsx)("br",{}),Object(D.jsxs)("label",{htmlFor:"name",children:[$e.userName,":"]}),Object(D.jsx)("input",{type:"text",name:"name",value:i.name,onInput:O,required:!0}),Object(D.jsx)("br",{}),Object(D.jsx)(tr,{message:p,setMessage:f}),Object(D.jsx)("button",{className:"mp-border-accent",type:"button",onClick:function(){return h.apply(this,arguments)},children:$e.confirm})]})})})},Dr=function(){var e=Object(m.c)((function(e){return e.app.toast})),t=Object(m.b)(),r=Object(s.useState)(null),n=Object(j.a)(r,2),a=n[0],c=n[1],i=Object(s.useRef)(null);if(Object(s.useEffect)((function(){var e=setTimeout((function(){c("opaque")}),4e3);return(null===i||void 0===i?void 0:i.current)&&(i.current.onmouseover=function(e){return c(null)}),function(){clearTimeout(e)}}),[]),!e.message)return null;var o="accent",u="dark",l="light",d="accent",b=void 0!==e.title?e.title:$e.error;return"info"===e.status?(o="counter",u="dark",l="light",d="counter",b=""):"warning"===e.status?(o="counter",u="accent",l="light",d="accent",b=void 0!==e.title?e.title:$e.warning+"!"):"complete"===e.status&&(o="counter",u="dark",l="light",d="counter",b=void 0!==e.title?e.title:$e.complete+"!"),Object(D.jsxs)("div",{className:"mp-toast mp-".concat(o," mp-bg-").concat(l," mp-border-").concat(d," cursor-pointer ").concat(a),onClick:function(){e.clickAction&&e.clickAction(),t({type:ee})},ref:i,children:[Object(D.jsx)("div",{className:"toast-header",children:b?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("h6",{children:b}),Object(D.jsx)("div",{className:"close-cross mp-".concat(u),children:"\u2716"})]}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("p",{className:"mp-".concat(u),children:e.message}),Object(D.jsx)("div",{className:"close-cross mp-".concat(o),children:"\u2716"})]})}),Boolean(b)&&Object(D.jsx)("div",{className:"toast-contetnt mp-".concat(u),children:e.message}),Object(D.jsx)("div",{className:"toast-bottom"})]},e.key)},Wr={login:"",pword:"",name:"",question:$e.secretExample,answer:""},Ur=function(){var e=Object(m.b)(),t=Object(d.f)(),r=Object(m.c)((function(e){return e.user})),n=Object(d.g)().search,i=Object(s.useState)(Wr),o=Object(j.a)(i,2),u=o[0],l=o[1],p=Object(s.useState)(""),f=Object(j.a)(p,2),O=f[0],h=f[1],g=Object(s.useRef)(null),x=Object(s.useState)(!1),v=Object(j.a)(x,2),w=v[0],y=v[1];function k(e){l(Object(b.a)(Object(b.a)({},u),{},Object(Ze.a)({},e.target.name,e.target.value)))}function N(){return(N=Object(c.a)(a.a.mark((function r(){var n,c,s;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(u.login){r.next=2;break}return r.abrupt("return",h($e.fillRequiredFields));case 2:if(!u.question||u.answer){r.next=6;break}return u.question===$e.secretExample&&y(!0),g.current.focus(),r.abrupt("return",h($e.secretValidation));case 6:if(!((null===(n=u.question)||void 0===n?void 0:n.length)>300)){r.next=8;break}return r.abrupt("return",h(($e.field+" "+$e.secretQuestion+" "+$e.tooLong).toLocaleLowerCase().capitalize()));case 8:if(!((null===(c=u.answer)||void 0===c?void 0:c.length)>255)){r.next=10;break}return r.abrupt("return",h(($e.field+" "+$e.secterAnswer+" "+$e.tooLong).toLocaleLowerCase().capitalize()));case 10:if(!(u.login.length>50)){r.next=12;break}return r.abrupt("return",h(($e.field+" "+$e.login+" "+$e.tooLong).toLocaleLowerCase().capitalize()));case 12:if(!(u.name.length>140)){r.next=14;break}return r.abrupt("return",h(($e.field+" "+$e.userName+" "+$e.tooLong).toLocaleLowerCase().capitalize()));case 14:return r.next=16,nr(u);case 16:if("OK"!==(s=r.sent).status){r.next=24;break}h($e.successfullReg),He(e,s.data),l(Wr),t.push("/"),r.next=33;break;case 24:if("EXISTING"!==s.status){r.next=28;break}return r.abrupt("return",h($e.loginOccupied+" - "+u.login));case 28:if("BANEDPWORD"!==s.status){r.next=32;break}return r.abrupt("return",h($e.bannedPwod+" - "+u.pword));case 32:h($e.errorReg+", "+$e.errCode+": "+(s.msg||s));case 33:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return Object(s.useEffect)((function(){return Object(c.a)(a.a.mark((function t(){var c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.id){t.next=5;break}return t.next=3,Zt();case 3:"OK"===t.sent.status?Je(e):h("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0442\u0438");case 5:c=new URLSearchParams(n),l(Object(b.a)(Object(b.a)({},u),{},{login:c.get("login"),name:c.get("name"),level:c.get("level")}));case 7:case"end":return t.stop()}}),t)})))(),function(){l(Wr)}}),[]),Object(D.jsx)("div",{className:"auth-container relative",children:Object(D.jsx)("div",{className:"absolute center auth-subcontainer",children:Object(D.jsx)("div",{className:"auth-action-wrap mp-border-secondary",children:Object(D.jsxs)("div",{className:"register-form",children:[Object(D.jsx)("h4",{children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435, \u0431\u0435\u0437 \u0441\u043c\u0441"}),Object(D.jsxs)("label",{htmlFor:"login",children:[$e.login,":"]}),Object(D.jsx)("input",{type:"text",name:"login",value:u.login,onInput:k,autoFocus:!0,required:!0}),Object(D.jsx)("br",{}),Object(D.jsxs)("label",{htmlFor:"name",children:[$e.userName,":"]}),Object(D.jsx)("input",{type:"text",name:"name",value:u.name,onInput:k,required:!0}),Object(D.jsx)("br",{}),Object(D.jsxs)("label",{htmlFor:"pword",children:[$e.password,":"]}),Object(D.jsx)("input",{type:"password",placeholder:"\u043f\u0430\u0440\u043e\u043b\u044c \u043d\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u0435\u043d",name:"pword",value:u.pword,onInput:k,required:!0}),Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),Object(D.jsxs)("label",{htmlFor:"question",children:[$e.secretQuestion,":"]}),Object(D.jsx)("br",{}),Object(D.jsx)("textarea",{type:"text",name:"question",value:u.question,onInput:k,autoComplete:"false"}),Object(D.jsx)("p",{className:"little-hint",children:$e.secretHint}),Object(D.jsxs)("label",{htmlFor:"answer",children:[$e.secterAnswer,":"]}),Object(D.jsx)("input",{type:"text",name:"answer",value:u.answer,onInput:k,required:Boolean(u.question),ref:g,autoComplete:"false"}),Object(D.jsx)("div",{className:"register-responser",children:Object(D.jsx)(tr,{message:O,setMessage:h})}),w&&Object(D.jsx)("button",{className:"btn-replica mp-border-counter mp-primary-hover",onClick:function(){y(!1),h($e.secretReplica2),g.current.focus()},children:$e.secretReplica}),Object(D.jsx)("button",{className:"mp-border-accent",type:"button",onClick:function(){return N.apply(this,arguments)},children:$e.submit})]})})})})},Hr=window.location.origin+"/friends/addByLink?id=",Jr=function(){var e=Object(d.f)(),t=Object(m.c)((function(e){return e.user})),r=t.id,n=t.friends,a=t.requests;function c(t){e.push("/friends/item/".concat(t))}return Object(D.jsxs)("div",{className:"friendsDefault",children:[Object(D.jsx)("h4",{children:$e.friendList}),Object(D.jsx)("div",{className:"friendList",children:Boolean(null===n||void 0===n?void 0:n.length)?n.map((function(e){var t,r;return Object(D.jsx)("div",{className:"friendContainer",children:Object(D.jsxs)("div",{className:"resultUser cursor-pointer mp-accent-hover transition-small",onClick:function(){return c(e.id)},children:[Object(D.jsx)("div",{className:"authorLogo mp-bg-secondary",children:Object(D.jsx)("span",{className:"mp-dark",title:e.login,children:null===(t=String(e.name))||void 0===t||null===(r=t[0])||void 0===r?void 0:r.toUpperCase()})}),Object(D.jsxs)("div",{className:"resultUser-creds",children:[Object(D.jsx)("p",{className:"mp-secondary",children:e.name}),Object(D.jsxs)("label",{className:"cursor-pointer",children:["(",e.login,")"]})]})]},e.id)},e.id1+e.id2)})):Object(D.jsx)("div",{className:"noFriendsCase",children:Object(D.jsx)("h5",{children:$e.sadlyNoFriends})})}),Object(D.jsx)("h4",{children:Boolean(null===a||void 0===a?void 0:a.length)&&$e.friendRequests}),Boolean(null===a||void 0===a?void 0:a.length)&&Object(D.jsx)("div",{className:"friendList",children:Boolean(null===a||void 0===a?void 0:a.length)&&a.map((function(e){var t,r;return Object(D.jsx)("div",{className:"friendContainer",children:Object(D.jsxs)("div",{className:"resultUser cursor-pointer mp-accent-hover transition-small",onClick:function(){return c(e.id)},children:[Object(D.jsx)("div",{className:"authorLogo mp-bg-secondary",children:Object(D.jsx)("span",{className:"mp-dark",title:e.login,children:null===(t=String(e.name))||void 0===t||null===(r=t[0])||void 0===r?void 0:r.toUpperCase()})}),Object(D.jsxs)("div",{className:"resultUser-creds",children:[Object(D.jsx)("p",{className:"mp-secondary",children:e.name}),Object(D.jsxs)("label",{className:"cursor-pointer",children:["(",e.login,")"]})]})]},e.id)},e.id1+e.id2)}))}),Object(D.jsxs)("div",{className:"addMeLink",children:[Object(D.jsx)("h4",{children:$e.addMeLink}),Object(D.jsx)("input",{type:"text",value:Hr+r,onFocus:function(e){e.target.select()},readOnly:!0})]}),Object(D.jsx)(l.b,{to:"/friends/addByLink",children:Object(D.jsx)("button",{className:"button",children:$e.addByLink})})]})},Qr=function(e){return e.loading?Object(D.jsx)("div",{children:"Loading anmation..."}):null},Xr=function(){var e=Object(d.h)().userId,t=Object(m.b)(),r=Object(m.c)((function(e){return e.user})),n=Object(s.useState)(null),i=Object(j.a)(n,2),o=i[0],u=i[1],p=Object(s.useState)(!0),f=Object(j.a)(p,2),O=f[0],h=f[1],g=Object(s.useState)(Object(D.jsx)("button",{className:"button",onClick:function(){return y.apply(this,arguments)},children:$e.addFriend})),x=Object(j.a)(g,2),v=x[0],w=x[1];if(Object(s.useEffect)((function(){Object(c.a)(a.a.mark((function n(){var c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.id!==e){n.next=4;break}return u(Object(b.a)({},r)),w(Object(D.jsx)(l.b,{to:"/editProfile",children:Object(D.jsx)("button",{className:"button",children:$e.profile})})),n.abrupt("return",h(!1));case 4:return n.next=6,Se(e);case 6:"OK"!==(c=n.sent).status?be(t,{message:$e.requestError}):u(c.data),h(!1);case 9:case"end":return n.stop()}}),n)})))()}),[e]),Object(s.useEffect)((function(){(null===o||void 0===o?void 0:o.friendStatus)&&("friends"===o.friendStatus?w(Object(D.jsxs)("div",{children:[Object(D.jsx)(l.b,{to:"/friends",children:Object(D.jsx)("button",{className:"button",children:$e.inFriendlist})}),Object(D.jsx)("button",{className:"button mp-border-counter",onClick:k,children:$e.removeFriend})]})):"youRequested"===o.friendStatus?w(Object(D.jsx)("button",{className:"button mp-border-secondary mp-secondary",children:$e.youRequested})):"youAsked"===o.friendStatus&&w(Object(D.jsx)("button",{className:"button mp-border-accent",onClick:S,children:$e.confirmRequest})))}),[null===o||void 0===o?void 0:o.friendStatus]),O)return Object(D.jsx)("div",{className:"profileContainer",children:Object(D.jsx)(Qr,{loading:O})});function y(){return(y=Object(c.a)(a.a.mark((function r(){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Le(e);case 2:if("OK"===r.sent.status){r.next=5;break}return r.abrupt("return",be(t,{message:$e.requestError}));case 5:w(Object(D.jsx)("button",{className:"button",children:$e.sent}));case 6:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function k(){return N.apply(this,arguments)}function N(){return(N=Object(c.a)(a.a.mark((function r(){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Me(e);case 2:if("OK"===r.sent.status){r.next=5;break}return r.abrupt("return",be(t,{message:$e.requestError}));case 5:u(Object(b.a)(Object(b.a)({},o),{},{friendStatus:"youAsked"}));case 6:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function S(){return C.apply(this,arguments)}function C(){return(C=Object(c.a)(a.a.mark((function r(){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Ie(e);case 2:if("OK"===r.sent.status){r.next=5;break}return r.abrupt("return",be(t,{message:$e.requestError}));case 5:u(Object(b.a)(Object(b.a)({},o),{},{friendStatus:"friends"}));case 6:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return o?Object(D.jsxs)("div",{className:"profileContainer",children:[Object(D.jsxs)("div",{className:"userProfile mp-border-dark",children:[Boolean(o.avatar)&&Object(D.jsx)("div",{className:"avatar",children:Object(D.jsx)("img",{src:o.avatar,alt:$e.avatar})}),Object(D.jsxs)("div",{className:"mp-primary credentials ",title:$e.userName,children:[o.name," ",Object(D.jsxs)("label",{className:"mp-dark",title:$e.login,children:["(",o.login,")"]})]}),Boolean(o.commentsn+1)&&Object(D.jsxs)("div",{className:"commentsn",children:[$e.commentsn,": ",o.commentsn]}),Object(D.jsxs)("div",{className:"level capitalize",children:[$e.level,": ",Object(D.jsx)("label",{className:"mp-dark",children:o.level})]})]}),Object(D.jsx)("div",{className:"friends-actionButton",children:v})]}):Object(D.jsx)("div",{className:"profileContainer",children:Object(D.jsx)("div",{className:"userProfile mp-border-dark",children:Object(D.jsx)("p",{children:$e.noResults})})})},Yr=function(e){var t=e.searchResults,r=new URLSearchParams(Object(d.g)().search).get("query"),n=Object(d.f)();if(!t)return null;if(!t.length)return Object(D.jsx)("div",{className:"resultsContainer",children:Object(D.jsx)("h5",{children:$e.noResults})});return Object(D.jsx)("div",{className:"resultsContainer",children:t.map((function(e){var t,a;return Object(D.jsxs)("div",{className:"resultUser cursor-pointer mp-accent-hover transition-small",onClick:function(){return t=e.id,void n.push("/friends/item/".concat(t,"?from=").concat(r));var t},children:[Object(D.jsx)("div",{className:"authorLogo mp-bg-secondary",children:Object(D.jsx)("span",{className:"mp-dark",title:e.login,children:null===(t=String(e.name))||void 0===t||null===(a=t[0])||void 0===a?void 0:a.toUpperCase()})}),Object(D.jsxs)("div",{className:"resultUser-creds",children:[Object(D.jsx)("p",{className:"mp-secondary",children:e.name}),Object(D.jsxs)("label",{className:"cursor-pointer",children:["(",e.login,")"]})]})]},e.id)}))})},Vr=["title","titleId"];function Zr(){return(Zr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function $r(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function en(e,t){var r=e.title,n=e.titleId,a=$r(e,Vr);return s.createElement("svg",Zr({fill:"current",width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},a),void 0===r?s.createElement("title",{id:n},"search"):r?s.createElement("title",{id:n},r):null,zr||(zr=s.createElement("path",{d:"M16.464 15.05l4.243 4.243a1 1 0 0 1-1.414 1.414l-4.904-4.904a1 1 0 0 1 0-1.414 5.5 5.5 0 1 0-2.404 1.407 1 1 0 1 1 .54 1.926 7.5 7.5 0 1 1 3.94-2.672z",fillRule:"nonzero"})))}var tn=s.forwardRef(en),rn=(r.p,function(e){var t=e.setSearchResults,r=Object(m.b)(),n=Object(d.f)(),i=Object(s.useState)(""),o=Object(j.a)(i,2),u=o[0],l=o[1];function b(){return p.apply(this,arguments)}function p(){return(p=Object(c.a)(a.a.mark((function e(){var c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("friends"!==(c=n.location.pathname.split("/")[1])){e.next=7;break}return e.next=4,ke(u);case 4:s=e.sent,e.next=10;break;case 7:return e.next=9,kt(u);case 9:s=e.sent;case 10:if("OK"===s.status){e.next=12;break}return e.abrupt("return",be(r,{message:$e.requestError}));case 12:t(s.data),n.push("/".concat(c,"/search?query=").concat(u));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(D.jsxs)("div",{className:"searchContainer transition",children:[Object(D.jsx)("div",{onClick:function(){n.goBack()},className:"backButton",children:Object(D.jsx)("button",{className:"button mp-primary",children:"<<"})}),Object(D.jsx)("input",{type:"text",name:"search",value:u,onInput:function(e){l(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&b()}}),Object(D.jsx)("div",{className:"searchButton relative",children:Object(D.jsxs)("button",{onClick:b,className:"button",children:["\u200b",Object(D.jsx)(tn,{fill:"var(--accent)"})]})})]})}),nn=(r(29),function(){var e=new URLSearchParams(Object(d.g)().search).get("id"),t=Object(m.b)(),r=Object(s.useState)(null),n=Object(j.a)(r,2),i=n[0],o=n[1],u=Object(s.useState)(!0),b=Object(j.a)(u,2),p=b[0],f=b[1],O=Object(s.useState)(""),h=Object(j.a)(O,2),g=h[0],x=h[1];var v=Object(s.useState)(!1),w=Object(j.a)(v,2),y=w[0],k=w[1];function N(){return S.apply(this,arguments)}function S(){return(S=Object(c.a)(a.a.mark((function e(){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe(i);case 2:if(r=e.sent,console.log("%c\u29ed","color: #00e600",r),"OK"===r.status){e.next=6;break}return e.abrupt("return",be(t,{message:$e.requestError}));case 6:be(t,{message:$e.yourFriendsNow,status:"complete"}),k(!0);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){e&&o(e)}),[]),Object(s.useEffect)((function(){Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return");case 2:return console.log("%c\u29ed id run","color: #733d00",i),e.next=5,N();case 5:f(!1);case 6:case"end":return e.stop()}}),e)})))()}),[i]),e&&p?Object(D.jsx)(Qr,{loading:p}):Object(D.jsxs)("div",{className:"addByLink",children:[Object(D.jsx)("h4",{children:$e.addByLink}),y?Object(D.jsx)("div",{children:Object(D.jsx)(l.b,{to:"/friends",children:Object(D.jsx)("button",{className:"button",children:$e.goBack})})}):Object(D.jsxs)("div",{className:"field",children:[Object(D.jsx)("label",{htmlFor:"link",children:$e.pasteAddLink}),Object(D.jsx)("input",{type:"text",value:g,onInput:function(e){var t=e.target.value;if(x(t),null===t||void 0===t?void 0:t.includes("id")){var r=new URLSearchParams(t.split("?")[1]);r.get("id")&&o(r.get("id"))}},readOnly:y})]})]})}),an=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.app})),r=Object(s.useState)(null),n=Object(j.a)(r,2),a=n[0],c=n[1];return Object(s.useEffect)((function(){ue(e)}),[]),t.isLogged?Object(D.jsxs)("div",{children:[Object(D.jsx)(rn,{setSearchResults:c}),Object(D.jsxs)(d.c,{children:[Object(D.jsx)(d.a,{exact:!0,path:"/friends",children:Object(D.jsx)(Jr,{})}),Object(D.jsx)(d.a,{path:"/friends/item/:userId",children:Object(D.jsx)(Xr,{})}),Object(D.jsx)(d.a,{path:"/friends/search",children:Object(D.jsx)(Yr,{searchResults:a})}),Object(D.jsx)(d.a,{path:"/friends/addByLink",children:Object(D.jsx)(nn,{})})]})]}):Object(D.jsx)("div",{className:"friendsNotLoggedWrap auth-container relative",children:Object(D.jsx)("div",{className:"absolute center auth-subcontainer",children:Object(D.jsxs)("div",{className:"auth-action-wrap mp-border-secondary",children:[Object(D.jsx)("p",{children:$e.loginToUseThis}),Object(D.jsx)(l.b,{to:"/auth",children:Object(D.jsx)("button",{className:"primary mp-border-accent loginBtn capitalize",children:$e.authorization})})]})})})},cn=function(){var e=Object(m.b)(),t=Object(d.f)(),r=Object(m.c)((function(e){return e.user})).friends,n=Object(m.c)((function(e){return e.app})),a=Object(s.useState)($e.defaultMode),c=Object(j.a)(a,2),i=c[0],o=c[1];return Object(s.useEffect)((function(){!function(){var e=Br(n,r);o(e)}()}),[n.mode,n.friendModeId,n.tagModeTag]),Object(s.useEffect)((function(){ue(e)}),[]),Object(D.jsxs)("div",{className:"modeSwitch",children:[Object(D.jsxs)("h5",{className:"currentMode",children:[$e.currentMode+": ",Object(D.jsx)("span",{className:"mp-counter",children:i})]}),Object(D.jsxs)("div",{className:"modeType mp-border-secondary",children:[Object(D.jsx)("h5",{className:"title",children:$e.watchModeSub1}),Object(D.jsx)("div",{className:"friendList",children:Boolean(null===r||void 0===r?void 0:r.length)?r.map((function(r){var n,a;return Object(D.jsx)("div",{className:"friendContainer",children:Object(D.jsxs)("div",{className:"resultUser cursor-pointer mp-accent-hover transition-small",onClick:function(){return n=r.id,t.push("/"),pe(e,n),void me(e,"watch");var n},children:[Object(D.jsx)("div",{className:"authorLogo mp-bg-secondary",children:Object(D.jsx)("span",{className:"mp-dark",title:r.login,children:null===(n=String(r.name))||void 0===n||null===(a=n[0])||void 0===a?void 0:a.toUpperCase()})}),Object(D.jsxs)("div",{className:"resultUser-creds",children:[Object(D.jsx)("p",{className:"mp-secondary",children:r.name}),Object(D.jsxs)("label",{className:"cursor-pointer",children:["(",r.login,")"]})]})]},r.id)},r.id1+r.id2)})):Object(D.jsxs)("div",{className:"noFriendsCase",children:[Object(D.jsx)("h5",{children:$e.watchModeSub2}),Object(D.jsx)(l.b,{to:"/friends",children:Object(D.jsx)("button",{children:$e.addFriends})})]})})]}),"draw"!==n.mode&&Object(D.jsxs)("div",{className:"modeType mp-border-secondary",children:[Object(D.jsx)("h5",{className:"title",children:$e.drawMode}),Object(D.jsx)(l.b,{to:"/",children:Object(D.jsxs)("button",{className:"button modeButton drawModeButton",onClick:function(){t.push("/"),me(e,"draw")},children:[Object(D.jsx)(bt,{fill:"var(--secondary)",className:"nav-icon"}),$e.toDrawMode]})}),Object(D.jsx)("p",{className:"subtitle",children:$e.watchModeSub3})]}),Object(D.jsx)("div",{className:"modeType mp-border-secondary",children:n.tagModeTag?Object(D.jsx)("div",{children:Object(D.jsxs)("h5",{className:"title",children:[Object(D.jsx)("span",{className:"capitalize",children:$e.tag+": "}),Object(D.jsxs)(l.b,{to:"/tags/item/"+n.tagModeTag,className:"cursor-pointer",children:[Object(D.jsx)("span",{className:"mp-secondary",children:"#"}),Object(D.jsx)("span",{className:"mp-counter mp-accent-hover",children:n.tagModeTag})]})]})}):Object(D.jsxs)("div",{children:[Object(D.jsx)("h5",{className:"title",children:$e.tags}),Object(D.jsx)(l.b,{to:"/tags",children:Object(D.jsxs)("button",{className:"button modeButton tagModeButton tagWrap",children:[Object(D.jsx)("span",{className:"bigHashtag mp-secondary",children:"#"}),Object(D.jsx)("span",{className:"tagContent",children:$e.toTags})]})}),Object(D.jsx)("p",{className:"subtitle",children:$e.mapTagModeSub})]})}),n.mode&&Object(D.jsx)("div",{className:"modeType mp-border-secondary",children:Object(D.jsx)("button",{className:"button modeButton capitalize mp-counter mp-border-counter",onClick:function(){t.push("/"),me(e,"default")},children:$e.reset})})]})},sn=function(e){var t=e.tagInfo,r=e.onClick;if(!t)return null;return Object(D.jsxs)("div",{className:"tagItem cursor-pointer mp-accent-hover transition-small mp-border-dark ",onClick:function(){r(t.tag)},children:[Object(D.jsxs)("div",{className:"mp-dark tagWrap",children:[Object(D.jsx)("span",{className:"bigHashtag",children:"# "}),Object(D.jsx)("span",{className:"tagContent mp-accent",children:t.tag})]}),Object(D.jsxs)("p",{className:"tagAmount mp-dark",children:[$e.tagsAmount,": ",Object(D.jsx)("span",{children:t.amount})]})]})},on=function(){var e=Object(m.b)(),t=Object(d.f)(),r=Object(s.useState)([]),n=Object(j.a)(r,2),i=n[0],o=n[1],u=Object(s.useState)([]),l=Object(j.a)(u,2),b=l[0],p=l[1];function f(e){t.push("/tags/item/".concat(e))}return Object(s.useEffect)((function(){Object(c.a)(a.a.mark((function t(){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Lt();case 2:if("OK"===(r=t.sent).status){t.next=5;break}return t.abrupt("return",be(e,{message:$e.requestError+" #fts1"}));case 5:o(r.data.recent),p(r.data.popular);case 7:case"end":return t.stop()}}),t)})))()}),[]),Object(D.jsxs)("div",{children:[Object(D.jsx)("h4",{className:"title",children:$e.recentTags}),Object(D.jsx)("div",{className:"tagsGroup",children:Boolean(i.length)&&i.map((function(e){return Object(D.jsx)(sn,{tagInfo:e,onClick:f},e.tag+"recent")}))}),Object(D.jsx)("h4",{className:"title",children:$e.mostPopular}),Object(D.jsx)("div",{className:"tagsGroup",children:Boolean(b.length)&&b.map((function(e){return Object(D.jsx)(sn,{tagInfo:e,onClick:f},e.tag+"popular")}))})]})},un=function(e){var t=e.searchResults,r=new URLSearchParams(Object(d.g)().search).get("query"),n=Object(d.f)(),a=Object(s.useState)([]),c=Object(j.a)(a,2),i=c[0],o=c[1];if(Object(s.useEffect)((function(){if(t){var e={};t.forEach((function(t){if(!e[t.tag])return e[t.tag]={amount:t.amount,places:[t.placeId],tag:t.tag};e[t.tag].amount+=t.amount,e[t.tag].places.push(t.placeId)})),o(Object.values(e))}}),[t]),!t)return null;if(!t.length)return Object(D.jsx)("div",{className:"resultsContainer",children:Object(D.jsx)("h5",{children:$e.noResults})});function u(e){n.push("/tags/item/".concat(e,"?from=").concat(r))}return Object(D.jsx)("div",{className:"resultsContainer",children:i.map((function(e){return Object(D.jsx)(sn,{tagInfo:e,onClick:u},e.key)}))})},ln=function(){var e=Object(m.b)(),t=Object(d.h)().tag,r=Object(d.f)(),n=Object(m.c)((function(e){return e.app.mapRef})),i=Object(s.useState)(null),o=Object(j.a)(i,2),u=o[0],p=o[1];function f(){return(f=Object(c.a)(a.a.mark((function r(){var n,c;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,St(t);case 2:if(n=r.sent,console.log("%c\u29ed","color: #00e600",n),"OK"===n.status){r.next=6;break}return r.abrupt("return",be(e,{message:$e.requestError+" #tow1"}));case 6:if(n.data.length){r.next=8;break}return r.abrupt("return");case 8:c={amount:0,places:[]},n.data.forEach((function(e){c.amount+=e.amount,c.places.push(Object(b.a)({},e))})),p(c);case 11:case"end":return r.stop()}}),r)})))).apply(this,arguments)}if(Object(s.useEffect)((function(){!function(){f.apply(this,arguments)}()}),[]),!u)return null;return Object(D.jsxs)("div",{className:"tagOverview",children:[Object(D.jsxs)("h3",{className:"title tagWrap",children:[Object(D.jsx)("span",{className:"bigHashtag",children:"#"}),Object(D.jsx)("span",{className:"tagContent mp-accent",children:t})]}),Object(D.jsxs)("p",{className:"subtitle",children:[$e.tagsAmount,": ",u.amount]}),Object(D.jsx)(l.b,{to:"/",children:Object(D.jsx)("button",{className:"button",onClick:function(){je(e,t),me(e,"tags"),r.push("/")},children:$e.watchAtMap})}),Object(D.jsx)("h4",{className:"title titlePopular",children:$e.mostPopularPlaces}),Object(D.jsx)("div",{className:"tagPlaces",children:Boolean(u.places)&&u.places.map((function(a){var c=a.placeId,s=a.amount,i=a.name,o=a.lng,u=a.lat;return Object(D.jsx)("div",{children:Object(D.jsxs)("div",{className:"placeInTag",children:[Object(D.jsx)("div",{className:"amount mp-accent",title:$e.mentionsAmount,children:s}),Object(D.jsxs)("div",{className:"placeTagInfo",children:[Object(D.jsx)("div",{className:"name",children:i}),Object(D.jsx)("button",{className:"button",onClick:function(){n.flyTo({center:[o,u],zoom:16,speed:.5}),je(e,t),me(e,"tags"),r.push("/")},children:$e.show})]})]})},c)}))})]})},dn=(r(44),function(){var e=Object(m.b)(),t=Object(s.useState)(null),r=Object(j.a)(t,2),n=r[0],a=r[1];return Object(s.useEffect)((function(){ue(e)}),[]),Object(D.jsxs)("div",{className:"tags",children:[Object(D.jsx)(rn,{setSearchResults:a}),Object(D.jsxs)(d.c,{children:[Object(D.jsx)(d.a,{exact:!0,path:"/tags",children:Object(D.jsx)(on,{})}),Object(D.jsx)(d.a,{path:"/tags/item/:tag",children:Object(D.jsx)(ln,{})}),Object(D.jsx)(d.a,{path:"/tags/search",children:Object(D.jsx)(un,{searchResults:n})})]})]})}),bn=function(){var e=Object(m.b)(),t=Object(s.useState)(""),r=Object(j.a)(t,2),n=r[0],i=r[1];function o(){return(o=Object(c.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Dt(n);case 2:if("OK"===t.sent.status){t.next=7;break}return t.abrupt("return",be(e,{message:$e.requestError+" #aboutus1"}));case 7:be(e,{message:$e.sent,status:"complete"});case 8:setTimeout((function(){i("")}),500);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(s.useEffect)((function(){ue(e)}),[]),Object(D.jsxs)("div",{className:"aboutPage relative",children:[Object(D.jsx)("p",{children:$e.aboutMain}),Object(D.jsx)("h5",{className:"mp-border-dark",children:$e.aboutFutureTitle}),Object(D.jsx)("p",{children:$e.aboutFuture}),Object(D.jsx)("br",{}),Object(D.jsxs)("p",{htmlFor:"comment",children:[$e.comment,":"]}),Object(D.jsx)("textarea",{name:"comment",rows:"3",value:n,onInput:function(e){i(e.target.value)},className:"raterComment mp-border-dark mp-dark",placeholder:$e.aboutPlaceholder}),Object(D.jsx)("br",{}),Object(D.jsx)("button",{className:"button",onClick:function(){return o.apply(this,arguments)},children:$e.submit}),Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),Object(D.jsxs)("p",{className:"version mp-counter",children:[$e.version,": alpha 3"]})]})};var pn=function(){var e,t=Object(m.b)(),r=Object(m.c)((function(e){return e.app})),n=Object(D.jsx)("div",{className:"auth-modal-containter mp-border-secondary",children:Object(D.jsx)(rr,{})});return Object(s.useEffect)((function(){r.isLogged||hr().skipLogin||le(t,{acceptLabel:null,cancelLabel:$e.skip,cancelAction:function(){xr("skipLogin",!0)},message:$e.wannaAuthorize,children:n}),Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt(t);case 2:case"end":return e.stop()}}),e)})))()}),[]),Object(D.jsxs)(l.a,{children:[Object(D.jsx)(Ar,{}),Object(D.jsx)(qr,{}),r.toast&&Object(D.jsx)(Dr,{},null===(e=r.toast)||void 0===e?void 0:e.key),Object(D.jsx)(Qt,{}),Object(D.jsxs)(d.c,{children:[Object(D.jsx)(d.a,{path:"/auth",children:Object(D.jsx)("div",{className:"routeWrapper",children:Object(D.jsx)(mr,{})})}),Object(D.jsx)(d.a,{path:"/alphaReg",children:Object(D.jsx)("div",{className:"routeWrapper",children:Object(D.jsx)(Ur,{})})}),Object(D.jsx)(d.a,{path:"/editProfile",children:Object(D.jsx)("div",{className:"routeWrapper",children:Object(D.jsx)(Gr,{})})}),Object(D.jsx)(d.a,{path:"/googleConfirm",children:Object(D.jsx)("div",{className:"routeWrapper",children:Object(D.jsx)(Kr,{})})}),Object(D.jsx)(d.a,{path:"/friends",children:Object(D.jsx)("div",{className:"routeWrapper",children:Object(D.jsx)(an,{})})}),Object(D.jsx)(d.a,{path:"/mapMode",children:Object(D.jsx)("div",{className:"routeWrapper",children:Object(D.jsx)(cn,{})})}),Object(D.jsx)(d.a,{path:"/tags",children:Object(D.jsx)("div",{className:"routeWrapper",children:Object(D.jsx)(dn,{})})}),Object(D.jsx)(d.a,{path:"/about",children:Object(D.jsx)("div",{className:"routeWrapper",children:Object(D.jsx)(bn,{})})})]})]})},jn=(r(45),r(27)),mn=Object(jn.a)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qe:return Object(b.a)(Object(b.a)({},e),t.credentials);case Be:return Object(b.a)(Object(b.a)({},e),{},{level:t.newLevel});case ze:return Object(b.a)(Object(b.a)({},e),{},{friends:Object(p.a)(t.friendsArr)});case Ae:return Object(b.a)(Object(b.a)({},e),{},{requests:Object(p.a)(t.requestsArr)});case _e:return Object(b.a)(Object(b.a)({},e),{},{commentsn:t.number});default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:return Object(b.a)(Object(b.a)({},e),{},{isLogged:!0});case U:return Object(b.a)(Object(b.a)({},e),{},{isLogged:!1});case J:return Object(b.a)(Object(b.a)({},e),{},{reviewsShown:!1});case H:return Object(b.a)(Object(b.a)({},e),{},{reviewsShown:!0});case Q:return Object(b.a)(Object(b.a)({},e),{},{mapHidden:!1});case X:return Object(b.a)(Object(b.a)({},e),{},{mapHidden:!0});case Y:return Object(b.a)(Object(b.a)({},e),{},{modal:t.modalInfo});case V:return Object(b.a)(Object(b.a)({},e),{},{modal:!1});case Z:return Object(b.a)(Object(b.a)({},e),{},{theme:t.theme});case $:var r=Math.random();return Object(b.a)(Object(b.a)({},e),{},{toast:Object(b.a)(Object(b.a)({},t.toastInfo),{},{key:r})});case ee:return Object(b.a)(Object(b.a)({},e),{},{toast:!1});case te:return Object(b.a)(Object(b.a)({},e),{},{mapKey:Number(e.mapKey)+1});case re:return Object(b.a)(Object(b.a)({},e),{},{friendModeId:t.id});case ne:return Object(b.a)(Object(b.a)({},e),{},{tagModeTag:t.tag});case ae:var n=t.mode,a=e.mode;if(!n)return Object(b.a)(Object(b.a)({},e),{},{mode:null,friendModeId:null,tagModeTag:null});if(n===a)return Object(b.a)({},e);var c=Object(b.a)(Object(b.a)({},e),{},{mode:n});return"draw"!==n&&"draw"!==a||(c.mapKey+=1),"watch"!==n&&(c.friendModeId=null),c;case"app/reset":return Object(b.a)({},se);case ce:return Object(b.a)(Object(b.a)({},e),{},{mapRef:t.mapRef});default:return e}}}),fn=Object(jn.b)(mn),On=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,47)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))};function hn(){return gn.apply(this,arguments)}function gn(){return(gn=Object(c.a)(a.a.mark((function e(){var t,r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},gr(),t=I[3],(r=hr()).theme&&I.indexOf(r.theme)>-1&&(t=r.theme),se.theme=t,G(),document.head.insertAdjacentHTML("beforeend","<style>:root{}</style>"),_(t),e.next=11,Vt();case 11:if("OK"!==(n=e.sent).status){e.next=16;break}n.data&&(Object.entries(n.data).forEach((function(e){var t=Object(j.a)(e,2),r=t[0],n=t[1];return Ke[r]=n})),se.isLogged=!0),e.next=22;break;case 16:if("REAUTH"!==n.status){e.next=20;break}return e.abrupt("return");case 20:return se.toast={message:$e.initConnectionErr},e.abrupt("return","connection_error");case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hn();case 2:u.a.render(Object(D.jsx)(i.a.StrictMode,{children:Object(D.jsx)(m.a,{store:fn,children:Object(D.jsx)(pn,{})})}),document.getElementById("root"));case 3:case"end":return e.stop()}}),e)})))(),On()}},[[46,1,2]]]);
//# sourceMappingURL=main.b5458379.chunk.js.map
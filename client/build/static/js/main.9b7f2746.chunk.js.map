{"version":3,"sources":["requests/config.js","requests/map.js","rest/config.js","rest/colors.js","Map/onLoad.js","store/app.js","Map/filters.js","Map/onClick.js","requests/friends.js","store/user.js","rest/svg/draw.svg","rest/lang.js","rest/helperFuncs.js","Map/addControl.js","Map/onMove.js","rest/svg/trash.svg","Map/Map.jsx","requests/tags.js","Map/Comment.jsx","Map/Rater.jsx","Map/Featurer.jsx","Map/formatGeodata.js","rest/svg/close5.svg","rest/svg/top.svg","Map/Legend.jsx","requests/reviews.js","Map/Reviews.jsx","Map/Main.jsx","requests/auth.js","rest/Responser.jsx","Auth/Login.jsx","requests/users.js","Auth/Register.jsx","rest/svg/profile.svg","Auth/AuthMain.jsx","rest/svg/login.svg","rest/svg/theme.svg","rest/svg/language.svg","rest/svg/friends.svg","rest/svg/tag.svg","rest/svg/route.svg","rest/svg/about.svg","rest/svg/back2.svg","navigation/left/DefNav.jsx","navigation/left/LangNav.jsx","store/localstorage.js","navigation/left/ThemeNav.jsx","rest/svg/close3.svg","rest/svg/hamburger.svg","navigation/LeftMenu.jsx","rest/svg/world2.svg","navigation/NavMain.jsx","rest/Modal.jsx","rest/svg/search.svg","Auth/EditProfile.jsx","Auth/GoogleConfirm.jsx","rest/Toast.jsx","Auth/AlphaReg.jsx","Friends/DefaultLayout.jsx","rest/Loading.jsx","Friends/Profile.jsx","Friends/Results.jsx","Friends/SearchBar.jsx","Friends/AddByLink.jsx","Friends/FriendsMain.jsx","navigation/MapMode.jsx","Tags/TagItem.jsx","Tags/FeaturedTags.jsx","Tags/Results.jsx","Tags/TagOverview.jsx","Tags/TagsMain.jsx","navigation/About.jsx","App.jsx","store/root.js","reportWebVitals.js","rest/beforeApp.js","index.js"],"names":["host","process","api","requsetMaker","method","meta","path","body","withCreds","query","options","headers","mode","credentials","JSON","stringify","url","a","fetch","response","json","res","getPlaces","minx","maxx","miny","maxy","f","getUserPlaces","id","getTagPlaces","tag","getTagPlacesTiles","data","getPlacesByTiles","getAdress","lat","lng","typesNeeded","Set","Number","window","geocoderRef","geocode","adress","results","i","length","obj","types","formatted_address","split","find","type","has","address_components","long_name","appThemes","googleCreds","login","name","avatar","token","occupiedLogin","appLanguages","ru","en","restrictedLetters","brightGreenRed","gradients","standart","blueprint","dark","colors","themeColors","primary","secondary","accent","light","counter","setColors","theme","styleRoot","document","querySelector","style","Object","entries","forEach","colName","colValue","setProperty","initializeThemeColors","styleString","mp","color","head","insertAdjacentHTML","mapOnLoad","map","geoJson","on","e","gradient","addSource","firstSymbolId","getStyle","layers","layer","addLayer","paint","LOGINUSER","LOGOUTUSER","EXPAND_COMMENTS","SHRINK_COMMENTS","CLOSE_LEGEND","SHOW_MAIN","HIDE_MAIN","SET_MODAL","CLOSE_MODAL","SWITCH_THEME","SET_TOAST","CLOSE_TOAST","RERENDERMAP","SET_FRIEND_ID","SET_TAG","SET_MODE","SET_MAPREF","initialState","isLogged","reviewsShown","legendShown","mapHidden","modal","toast","mapKey","friendModeId","tagModeTag","mapRef","setLoginStatus","d","status","showMain","hideMain","setModal","modalInfo","message","acceptLabel","cancelLabel","acceptAction","cancelAction","children","closeModal","setToast","toastInfo","clickAction","title","setMapMode","includes","setMapRef","geoJsonFromResponse","places","placeData","geometry","properties","rating","amount","source","sourceLayer","coordinates","polygon","polyFigure","x","y","processPlacesResponse","TEXT","setGeoData","tiledata","setTileData","networkError","msg","smg","localTileData","Map","key","get","set","featureList","mapOnClick","setFeature","resetRater","drawObject","lesserGeometry","feature","geo","res2","turf","union","geoFromTurf","someFeatures","querySourceFeatures","filter","splice","findFeatureClones","zoomOnEvent","zoom","lngLat","flyTo","center","features","queryRenderedFeatures","point","featuresNeeded","ratedBefore","console","log","trash","flyToFeature","featureToRate","getZoom","labelTypes","defaultZoom","getFriends","getRequests","searchUsers","input","getProfileDetails","addFriend","removeFriend","acceptRequest","addByLink","WRITECREDENTIALS","CHANGELEVEL","SETFRIENDS","SETREQUESTS","COMMENT_N","basicState","level","commentsn","friends","requests","_path","setCredentials","creds","logIntoApp","logOutOfApp","setUserLevel","newLevel","setUserFriends","friendsArr","setUserRequests","requestsArr","setCommentsNumber","number","homeLinkBtn","authLinkBtn","profile","routes","language","aboutUs","setsLinkBtn","logout","register","yourLogin","userName","yourPword","secretQuestion","secretHint","secterAnswer","secretValidation","secretReplica","secretReplica2","fillRequiredFields","secretExample","submit","confirm","greetings","firstTimeRate","placeRatingPrefix","placeAmountPrefix","singleMark","marks","push","commentPlacehol","yourRating","bestRating","worstRating","reviews","noComments","searchPHolder","newFeature","newFeaturePHolder","drawMode","toDrawMode","drawPrompt","acceptDefault","cancelDefault","rateZeroModal","toMain","menu","pickTheme","apply","password","field","tooLong","APPTEXT","getLocation","loc","localStorage","getItem","parse","getLayoutCoords","Math","floor","pow","tan","PI","cos","getFriendsInfo","dispatch","requestError","reqs","notNaN","val","mapAddControl","createBtn","deleteBtn","setDrawPrompt","draw","MapboxDraw","displayControlsDefault","controls","updateArea","display","getAll","created","centroid","_vectorTileFeature","_x","_y","onclick","changeMode","deleteAll","addControl","mapOnMove","setlayoutXY","range","setWeDataNeed","prevXY","getCenter","currentX","currentY","prev","dataWeHave","dataWeNeed","reactiveData","yOffset","xOffset","add","size","Array","from","keys","tileKey","delete","_excluded","_extends","assign","target","arguments","prototype","hasOwnProperty","call","this","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgDraw","_ref","svgRef","titleId","props","fill","enableBackground","height","viewBox","width","xmlSpace","xmlns","xmlnsXlink","ref","_g","ForwardRef","SvgTrash","preserveAspectRatio","transform","stroke","mapboxgl","accessToken","bryansk","mbStyles","MapArea","geoData","featureTrigger","app","useSelector","state","location","useLocation","useDispatch","mapContainer","useRef","useState","initPlacesCall","useEffect","current","container","MapboxGeocoder","placeholder","google","maps","Geocoder","interval","setInterval","setItem","saveLocation","clearInterval","setMapData","pathname","setTimeout","resize","className","sourceId","getSource","setData","speed","searchTags","getTagInfo","featuredTags","tagSuggestions","postTags","user","comment","placeId","tagWords","w","startsWith","tags","word","letter","item","ar","Comment","setComment","tagSuggestion","setTagSuggestion","suggestions","setSuggestions","onTagClick","toFill","attributes","value","newComm","join","focus","sugg","onClick","cols","rows","onInput","currCase","nativeEvent","Rater","onSubmit","s","hover","setHover","setRating","submitAction","onMouseEnter","onMouseLeave","ratingData","String","toPrecision","undefined","star","index","borderColor","yes","goBack","send","asAnonius","Featurer","setName","formatGeodata","multiPoly","north","east","south","west","polyPoints","polyCoords","polyArray","shapeIndex","lon","polygonMapper","multiFormatted","SvgClose5","_defs","_polyline","Legend","backgroundColor","background","getReviews","postReview","postFeedback","deleteReview","timestamp","place","SvgTop","points","Reviews","updateLayers","userId","setReviews","expandComments","deleteClick","grade","removeComment","toFixed","parseTags","text","composingTag","plain","to","substr","review","anonimus","author","toUpperCase","Date","toLocaleDateString","Boolean","noreviews","Main","setFeatureTrigger","mapTrigger","setMapTrigger","resLevelHandler","nowYourLevel","northEastest","southWestest","polyString","tempBox","LngLatBounds","targetId","newGeodata","userLevel","commentsNumber","close","loginWithCreds","refresh","loginbyGoogle","Responser","setMessage","cn","Login","history","useHistory","setLogin","pword","setPword","setMsg","loading","wrongAuth","errorReg","errCode","farewell","onOAuth","googleUser","getBasicProfile","getName","getImageUrl","gmail","getEmail","getAuthResponse","id_token","getId","onFail","gapi","load","auth2","init","then","auth","signOut","signin2","render","longtitle","onsuccess","onfailure","htmlFor","autoFocus","data-onsuccess","registerUser","registerGUser","updateUser","updateUserPword","setLanguage","lang","initCreds","question","answer","Register","setCreds","replica","setReplica","toLocaleLowerCase","capitalize","successfullReg","loginOccupied","bannedPwod","required","autoComplete","AuthMain","reg","URLSearchParams","search","isLogging","setIsLogging","SvgProfile","fillRule","SvgLogin","SvgTheme","clipRule","_path2","SvgLanguage","SvgFriends","SvgTag","SvgRoute","SvgAbout","DefNav","setNavState","hideSelf","hideMainMenu","navStates","SvgBack2","baseProfile","LangNav","setLang","reload","error","documentElement","default","pickLanguage","getPreferences","prefs","projectPrefix","initLocalStorage","setPreference","preference","ThemeNav","themeN","setThemeN","themeNumber","SvgClose3","LeftMenu","leftMenu","setLeftMenu","navState","SvgHamburger","SvgWorld2","NavMain","defaultMode","modeLabel","setModeLabel","label","getMapModeLabel","myId","myMarks","marksOf","friend","friendName","drawing","drawRouteMode","Modal","EditProfile","secretChallenge","setSecretChallenge","preventDefault","successfulUpdate","c","editProfile","newPassword","readOnly","GoogleConfirm","oauthTitle","occupied","Toast","visibility","setVisibility","t","onmouseover","clearTimeout","main","info","bg","border","warning","complete","AlphaReg","link","origin","DefaultLayout","userID","friendList","id1","id2","sadlyNoFriends","friendRequests","addMeLink","onFocus","select","Loading","Profile","useParams","curUser","store","setUser","setLoading","friendButton","setFriendButton","friendStatus","inFriendlist","youRequested","confirmRequest","addFriendReq","sent","removeFriendReq","src","alt","noResults","Results","searchResults","SvgSearch","SearchBar","setSearchResults","setInput","submitEnter","chapter","onKeyDown","AddByLink","paramId","setId","setLink","setReadOnly","yourFriendsNow","pasteAddLink","q","FriendsMain","exact","loginToUseThis","authorization","MapMode","runFriendMode","currentMode","watchModeSub1","watchModeSub2","addFriends","drawModeLevelOnly","disabled","watchModeSub3","toTags","mapTagModeSub","reset","TagItem","tagInfo","tagsAmount","FeaturedTags","recent","setRecent","popular","setPopular","recentTags","mostPopular","formatted","setFormatted","tagsObj","tagObj","values","TagOverview","setInfo","result","tagReq","watchAtMap","mostPopularPlaces","noName","mentionsAmount","show","TagsMain","About","aboutMain","aboutFutureTitle","aboutFuture","aboutPlaceholder","techInfo","techSpecs","version","App","skipLogin","skip","wannaAuthorize","rootReducer","combineReducers","act","random","prevMode","createStore","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initActions","charAt","slice","preferences","appInitialState","userInitialState","initConnectionErr","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.9b7f2746.chunk.js","sourcesContent":["if (process.env.NODE_ENV === 'production') {\r\n  var prodAdress = process.env.REACT_APP_PROD\r\n}\r\n\r\nexport const host = prodAdress || process.env.REACT_APP_LOCAL\r\nexport const api = host + 'api/'\r\n\r\n\r\nexport function requsetMaker(method = 'GET', meta = 'auth', path = 'refresh', body = {}, withCreds = true, query = '') {\r\n  const options = {\r\n    method,\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Access-Control-Allow-Origin': host\r\n    },\r\n    mode: \"cors\"\r\n  }\r\n\r\n  if (withCreds) options.credentials = 'include'\r\n  if (body) options.body = JSON.stringify({ ...body })\r\n\r\n  const url = api + meta + '/' + path + (query && '?' + query)\r\n  \r\n  return async function () {\r\n    try {\r\n      const response = await fetch(url, options)\r\n      const res = await response.json()\r\n      return res\r\n    } catch (err) {\r\n      return err\r\n    }\r\n  }\r\n}","import { requsetMaker } from './config'\r\n\r\nexport async function getPlaces(minx = 0, maxx = 99999999, miny = 0, maxy = 99999999) {\r\n  const f = requsetMaker('GET', 'maps', 'places', null, false, `minx=${minx}&miny=${miny}&maxx=${maxx}&maxy=${maxy}`)\r\n  return await f()\r\n}\r\n\r\nexport async function getUserPlaces(id) {\r\n  const f = requsetMaker('GET', 'maps', 'userPlaces', null, false, `id=${id}`)\r\n  return await f()\r\n}\r\n\r\nexport async function getTagPlaces(tag, minx = 0, maxx = 99999999, miny = 0, maxy = 99999999) {\r\n  const f = requsetMaker('GET', 'maps', 'taggedPlaces', null, false, `tag=${tag}&minx=${minx}&miny=${miny}&maxx=${maxx}&maxy=${maxy}`)\r\n  return await f()\r\n}\r\n\r\nexport async function getTagPlacesTiles(tag, data) {\r\n  const f = requsetMaker('POST', 'maps', 'taggedByTiles', { tag, data }, false)\r\n  return await f()\r\n}\r\n\r\n\r\nexport async function getPlacesByTiles(data) {\r\n  const f = requsetMaker('POST', 'maps', 'placesByTiles', { ...data }, false)\r\n  return await f()\r\n}\r\n\r\nexport async function getAdress(lat, lng) {\r\n  const typesNeeded = new Set(\r\n    ['street_address', 'natural_feature', 'airport', 'park', 'point_of_interest', \"establishment\", \"food\", \"store\"]\r\n  )\r\n  lat = Number(lat)\r\n  lng = Number(lng)\r\n\r\n  // Get decent adress from geocoder\r\n  const res = await window.geocoderRef.geocode({ 'location': { lat, lng } });\r\n\r\n  let adress = \"\"\r\n  if (res.results) {\r\n    for (let i = 0; i < res.results.length; i++) {\r\n      const obj = res.results[i];\r\n      if (obj.types[0] === 'premise') {\r\n        adress = obj.formatted_address.split(', ')[0] + ', ' + obj.formatted_address.split(', ')[1];\r\n        break\r\n      }\r\n      if (obj.types.find(type => typesNeeded.has(type))) {\r\n        adress = obj.address_components[1].long_name + ', ' + obj.address_components[0].long_name\r\n        break\r\n      }\r\n    }\r\n    // TODO error handling\r\n  }\r\n  return adress\r\n}\r\n","export const appThemes = ['standart', 'dark', 'b&w', 'blueprint']\r\n\r\nexport const projectPrefix = 'mp'\r\n\r\nexport let googleCreds = {\r\n  login: null,\r\n  name: null,\r\n  avatar: null,\r\n  token: null,\r\n  occupiedLogin: null,\r\n  id: null\r\n}\r\n\r\nexport const appLanguages = {\r\n  ru: 'ru',\r\n  en: 'en'\r\n}\r\n\r\nexport const restrictedLetters = [\r\n  '@', '!', '$', '№', '#', '%', '^', '*', '(', ')', '.', ',', '`', '|', '\\', '/'', '[', ']', '{', '}', ' '\r\n]","// Map rating colors\r\n// const draftYellowPurple = ['#e9d5b8', '#e9c5ae', '#dfb7b6', '#d59dbd', '#c379cd', '#f729f6']\r\n// const linearYellowPurpleMeak = ['#e9d1ba', '#edacc6', '#ef8fd1', '#f173db', '#f354e6', '#f729f6']\r\n// const blackToPuplre = ['#170f11', '#2e122e', '#4a1c4a', '#6f2a6f', '#993a99', '#e262c9']\r\n// const redGoldExperiment = ['#5b263c', '#a74b2f',  '#e2734a', '#d5aa83', '#e49b3b', 'gold']\r\n// const linearYellowPurpleBright = ['#eedd71', '#efc682', '#f1a69a', '#f28faa', '#f469c6', '#f729f6']\r\n// const greenRedClassics = ['#712d2d', '#a74b2f', '#e2734a', '#e1b87a', '#8bd38b', '#18a019']\r\n\r\nimport { appThemes } from \"./config\"\r\n\r\n// const lightGreenRed = ['#712d2d', '#a74b2f', '#e2734a', '#e8c337', '#abff38', '#88ff45']\r\nconst brightGreenRed = ['#cd0c0c', '#e14612', '#e1922c', '#e8c337', '#94c52f', '#0aa112']\r\nconst darkGradient = [\r\n  '#521414', '#9c330d',\r\n  '#b8740f', '#b3a700',\r\n  '#88c70a', '#00e00b'\r\n]\r\nconst paleGreenRed = [\r\n  '#422424', '#723e36',\r\n  '#866b3c', '#afb766',\r\n  '#96ce7e', '#5fb961'\r\n]\r\nconst dynamicGreenRed = [\r\n  '#422424', '#723e36',\r\n  '#866b3c', '#afb766',\r\n  '#6bc41c', '#149f04'\r\n]\r\n\r\n\r\nexport const gradient = brightGreenRed\r\n\r\nexport const gradients = {\r\n  standart: brightGreenRed,\r\n  blueprint: dynamicGreenRed,\r\n  dark: darkGradient,\r\n  'b&w': paleGreenRed\r\n}\r\n\r\n\r\n// const colors = {\r\n//   primary: 'primary',\r\n//   secondary: 'secondary',\r\n//   accent: 'accent',\r\n//   light: 'light',\r\n//   dark: 'dark',\r\n//   counter: 'counter',\r\n// }\r\nconst colors = [\r\n  'primary',\r\n  'secondary',\r\n  'accent',\r\n  'light',\r\n  'dark',\r\n  'counter',\r\n  // 'comply'?\r\n]\r\n\r\nexport const themeColors = {\r\n  standart: {\r\n    primary: \"#5e7ba1\",\r\n    secondary: \"#99a6b8\",\r\n    accent: \"#c78605\",\r\n    light: \"#f2f2f2\",\r\n    dark: \"#575757\",\r\n    counter: \"#2f396f\",\r\n  },\r\n  dark: {\r\n    primary: '#d93fa1',\r\n    secondary: '#843f92',\r\n    accent: '#dab11b',\r\n    light: '#262626',\r\n    dark: '#d8d8d8',\r\n    counter: '#35d5e3',\r\n    // comply: '#0383da'\r\n  },\r\n  \r\n  // olddark: {\r\n  //   primary: '#b68de7',\r\n  //   secondary: '#755a96',\r\n  //   accent: '#03DAC6',\r\n  //   light: '#383736',\r\n  //   dark: '#d8d8d8',\r\n  //   counter: '#e4d737',\r\n  //   // comply: '#0383da'\r\n  // },\r\n  'b&w': {\r\n    primary: '#8c8c8c',\r\n    secondary: '#999999',\r\n    accent: '#000000',\r\n    light: '#ffffff',\r\n    dark: '#575757',\r\n    counter: '#454545',\r\n  },\r\n  blueprint: {\r\n    'primary': '#e49bd3',\r\n    'secondary': '#c9abca',\r\n    'accent': '#e9eb7d',\r\n    'light': '#34568b',\r\n    'dark': '#ffffff',\r\n    'counter': '#9affd5',\r\n  }\r\n}\r\n\r\nexport function setColors(theme = appThemes[0]) {\r\n  const styleRoot = document.querySelector(\":root\").style\r\n  Object.entries(themeColors[theme]).forEach(([colName, colValue]) => styleRoot.setProperty('--' + colName, colValue))\r\n}\r\n\r\nexport function initializeThemeColors() {\r\n  let styleString = \"\"\r\n  const mp = '.mp'\r\n\r\n  colors.forEach(color => {\r\n    styleString += `\r\n    ${mp}-${color}{color: var(--${color})}\r\n    ${mp}-${color}-hover:hover{color: var(--${color})}\r\n\r\n    ${mp}-bg-${color}{background-color: var(--${color})}\r\n    ${mp}-bg-${color}-hover:hover{background-color: var(--${color})}\r\n\r\n    ${mp}-border-${color}{border-color: var(--${color})}\r\n    ${mp}-shadow-${color}{ box-shadow: var(--${color}) 2px 2px 4px }\r\n    `\r\n  })\r\n\r\n\r\n  document.head.insertAdjacentHTML(\"beforeend\", `<style>${styleString}</style>`)\r\n}","import { gradients, themeColors } from \"../rest/colors\";\r\n\r\nexport function mapOnLoad(map, geoJson, theme) {\r\n  map.on('load', function (e) {\r\n    const gradient = gradients[theme]\r\n\r\n    // Define a source before using it to create a new layer\r\n    map.addSource('ratedFeaturesSource', {\r\n      type: 'geojson',\r\n      data: {\r\n        \"type\": \"FeatureCollection\",\r\n        \"features\": geoJson\r\n      },\r\n    });\r\n    map.addSource('selectedFeatureSrc', {\r\n      type: 'geojson',\r\n      data: {\r\n        \"type\": \"FeatureCollection\",\r\n        \"features\": []\r\n      },\r\n    });\r\n\r\n\r\n    // Draw data on map\r\n\r\n    // __draw our layer underneath labels\r\n    const layers = map.getStyle().layers;\r\n    const firstSymbolId = layers.find(layer => layer.type === 'symbol').id;\r\n\r\n    map.addLayer({\r\n      'id': 'ratedFeatures',\r\n      'source': 'ratedFeaturesSource',\r\n      // 'source-layer': 'building',\r\n      'minzoom': 11,\r\n      'type': 'fill',\r\n      paint: {\r\n        // TODO opacity formula\r\n        // 'fill-opacity': [\r\n        //   \"interpolate\", [\"linear\"], ['get', 'amount'],\r\n\r\n        //   0, 0,\r\n        //   1, 0.3,\r\n        //   2, 0.4,\r\n        //   3, 0.5,\r\n        //   4, 0.6,\r\n        //   5, 0.7,\r\n        //   10, 0.8,\r\n        //   15, 0.9\r\n        // ],\r\n        'fill-opacity': [\r\n          \"interpolate\", [\"linear\"], ['get', 'amount'],\r\n\r\n          0, 0,\r\n          1, 0.4,\r\n          2, 0.5,\r\n          5, 0.9,\r\n        ],\r\n        // 'fill-opacity': 0.9,\r\n\r\n        'fill-color': [\r\n          \"interpolate\", [\"linear\"], ['get', 'rating'],\r\n\r\n          0, gradient[0],\r\n          1, gradient[1],\r\n          2, gradient[2],\r\n          3, gradient[3],\r\n          4, gradient[4],\r\n          5, gradient[5]\r\n          // 1, '#eee2cc',\r\n          // 5, gradient[5]\r\n        ]\r\n      }\r\n    }, firstSymbolId)\r\n\r\n    map.addLayer({\r\n      'id': 'selectedFeature',\r\n      'source': 'selectedFeatureSrc',\r\n      'minzoom': 13,\r\n      'type': 'fill',\r\n      paint: {\r\n        'fill-opacity': 0.9,\r\n        'fill-color': themeColors[theme].accent,\r\n        'fill-outline-color': themeColors[theme].counter\r\n      }\r\n    }, firstSymbolId)\r\n\r\n  })\r\n}","import { appThemes } from \"../rest/config\"\r\n\r\n/* #region Name consts  */\r\n\r\nconst LOGINUSER = 'app/log_in'\r\nconst LOGOUTUSER = 'app/log_out'\r\nconst EXPAND_COMMENTS = 'app/expand_comms'\r\nconst SHRINK_COMMENTS = 'app/shrink_comms'\r\nconst CLOSE_LEGEND = 'app/close_legend'\r\nconst SHOW_MAIN = 'app/show_main'\r\nconst HIDE_MAIN = 'app/hide_main'\r\nconst SET_MODAL = 'app/set_modal'\r\nconst CLOSE_MODAL = 'app/close_modal'\r\nconst SWITCH_THEME = 'app/switch_theme'\r\nconst SET_TOAST = 'app/set_toast'\r\nconst CLOSE_TOAST = 'app/close_toast'\r\nconst RERENDERMAP = 'app/rerender_map'\r\nconst SET_FRIEND_ID = 'app/friend_id'\r\nconst SET_TAG = 'app/set_tag'\r\nconst SET_MODE = 'app/set_mode'\r\nconst SET_MAPREF = 'app/set_mapref'\r\n\r\n/* #endregion */\r\n\r\n\r\n/* #region  Init State */\r\n\r\nexport const initialState = {\r\n  isLogged: false,\r\n  reviewsShown: true,\r\n  legendShown: true,\r\n  mapHidden: false,\r\n  modal: false,\r\n  // modal: {\r\n  //   message: 'sada',\r\n  //   acceptLabel: 'YES',\r\n  //   cancelLabel: 'NO',\r\n  //   acceptAction: () => { },\r\n  //   cancelAction: () => { }\r\n  // },\r\n  theme: appThemes[0],\r\n  toast: false,\r\n  // toast: {\r\n  //   message: 'some msg',\r\n  //   clickAction: () => { },\r\n  //   status: 'error', // also 'warning', 'info', 'complete',\r\n  //   title: ''\r\n  // }\r\n  mapKey: 1000,\r\n  mode: null, // special modes: 'watch', 'draw', 'drawRoute', 'tags', '?withRoutes'\r\n  friendModeId: null,\r\n  tagModeTag: null,\r\n  mapRef: null\r\n}\r\n\r\n/* #endregion */\r\n\r\n// Reducer\r\n\r\nexport function appReducer(state = initialState, act) {\r\n  switch (act.type) {\r\n    case LOGINUSER: {\r\n      return {\r\n        ...state, isLogged: true\r\n      }\r\n    }\r\n    case LOGOUTUSER: {\r\n      return {\r\n        ...state, isLogged: false\r\n      }\r\n    }\r\n    case SHRINK_COMMENTS: {\r\n      return {\r\n        ...state, reviewsShown: false\r\n      }\r\n    }\r\n    case EXPAND_COMMENTS: {\r\n      return {\r\n        ...state, reviewsShown: true\r\n      }\r\n    }\r\n    case CLOSE_LEGEND: {\r\n      return {\r\n        ...state, legendShown: false\r\n      }\r\n    }\r\n    case SHOW_MAIN: {\r\n      return {\r\n        ...state, mapHidden: false\r\n      }\r\n    }\r\n    case HIDE_MAIN: {\r\n      return {\r\n        ...state, mapHidden: true\r\n      }\r\n    }\r\n    case SET_MODAL: {\r\n      return {\r\n        ...state, modal: act.modalInfo\r\n      }\r\n    }\r\n    case CLOSE_MODAL: {\r\n      return {\r\n        ...state, modal: false\r\n      }\r\n    }\r\n    case SWITCH_THEME: {\r\n      return {\r\n        ...state, theme: act.theme\r\n      }\r\n    }\r\n    case SET_TOAST: {\r\n      const key = Math.random()\r\n      return {\r\n        ...state, toast: { ...act.toastInfo, key }\r\n      }\r\n    }\r\n    case CLOSE_TOAST: {\r\n      return {\r\n        ...state, toast: false\r\n      }\r\n    }\r\n    case RERENDERMAP: {\r\n      return {\r\n        ...state, mapKey: Number(state.mapKey) + 1\r\n      }\r\n    }\r\n    case SET_FRIEND_ID: {\r\n      return {\r\n        ...state, friendModeId: act.id\r\n      }\r\n    }\r\n    case SET_TAG: {\r\n      return {\r\n        ...state,\r\n        tagModeTag: act.tag\r\n      }\r\n    }\r\n    case SET_MODE: {\r\n      const mode = act.mode\r\n      const prevMode = state.mode\r\n      if (!mode) return { ...state, mode: null, friendModeId: null, tagModeTag: null }\r\n      \r\n      if (mode === prevMode) return { ...state }\r\n\r\n      const res = {\r\n        ...state, mode\r\n      }\r\n      if (mode === 'draw' || prevMode === 'draw') res.mapKey += 1\r\n      if (mode !== 'watch') res.friendModeId = null\r\n      return res\r\n    }\r\n    case 'app/reset': {\r\n      return {\r\n        ...initialState\r\n      }\r\n    }\r\n    case SET_MAPREF: {\r\n      return {\r\n        ...state, mapRef: act.mapRef\r\n      }\r\n    }\r\n\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\n/* #region  Actions */\r\n\r\nexport const setLoginStatus = (d, status = false) => {\r\n  if (status) d({ type: LOGINUSER })\r\n  else d({ type: LOGOUTUSER })\r\n}\r\n\r\nexport const expandComments = (d) => {\r\n  d({ type: EXPAND_COMMENTS })\r\n}\r\n\r\nexport const shrinkComments = (d) => {\r\n  d({ type: SHRINK_COMMENTS })\r\n}\r\n\r\nexport const closeMapLegend = (d) => {\r\n  d({ type: CLOSE_LEGEND })\r\n}\r\n\r\nexport const showMain = (d) => {\r\n  d({ type: SHOW_MAIN })\r\n}\r\n\r\nexport const hideMain = (d) => {\r\n  d({ type: HIDE_MAIN })\r\n}\r\n\r\nexport const setModal = (d, modalInfo = {\r\n  message: '',\r\n  acceptLabel: '',\r\n  cancelLabel: '',\r\n  acceptAction() { },\r\n  cancelAction() { },\r\n  children: <></>\r\n}) => {\r\n  d({ type: SET_MODAL, modalInfo })\r\n}\r\n\r\nexport const closeModal = (d) => {\r\n  d({ type: CLOSE_MODAL })\r\n}\r\n\r\nexport const switchTheme = (d, theme) => {\r\n  if (appThemes.indexOf(theme) < 0) theme = appThemes[0]\r\n  d({ type: SWITCH_THEME, theme })\r\n}\r\n\r\nexport const setToast = (d, toastInfo = {\r\n  message: '',\r\n  clickAction() { },\r\n  status: 'error', // also 'warning', 'info', 'complete',\r\n  title: ''\r\n}) => {\r\n  d({ type: SET_TOAST, toastInfo })\r\n}\r\n\r\nexport const closeToast = (d) => {\r\n  d({ type: CLOSE_TOAST })\r\n}\r\n\r\nexport const rerenderMap = (d) => {\r\n  d({ type: RERENDERMAP })\r\n}\r\n\r\nexport const friendModeId = (d, id) => {\r\n  d({ type: SET_FRIEND_ID, id })\r\n}\r\n\r\nexport const tagModeTag = (d, tag) => {\r\n  d({ type: SET_TAG, tag })\r\n}\r\n\r\nexport const setMapMode = (d, mode) => {\r\n  const modes = ['watch', 'draw', 'drawRoute', 'tags', '?withRoutes']\r\n  if (!modes.includes(mode)) mode = null\r\n  d({ type: SET_MODE, mode })\r\n  // rerenderMap(d)\r\n}\r\n\r\nexport const resetAppState = (d) => d({ type: 'app/reset' })\r\n\r\nexport const setMapRef = (d, mapRef) => d({ type: SET_MAPREF, mapRef })\r\n\r\n/* #endregion */\r\n","import { setToast } from \"../store/app\"\r\n\r\nexport function geoJsonFromResponse(places) {\r\n  if (!places?.length) return []\r\n\r\n  const geoJson = places.map(placeData => {\r\n    const res = {\r\n      type: 'Feature',\r\n      geometry: {\r\n        type: \"MultiPolygon\",\r\n      },\r\n      id: placeData.id,\r\n      properties: {\r\n        rating: Number(placeData.rating),\r\n        amount: placeData.amount,\r\n        name: placeData.name,\r\n        lng: placeData.lng,\r\n        lat: placeData.lat,\r\n        // x: placeData.x,\r\n        // y: placeData.y\r\n      },\r\n      source: \"composite\",\r\n      sourceLayer: \"building\",\r\n    }\r\n    // if (placeData?.polygon?.length > 1) res.geometry.type = \"MultiPolygon\"\r\n\r\n    // Case multypolygon\r\n    res.geometry.coordinates = placeData?.polygon?.map(polygon => polygon.map(polyFigure => {\r\n      return polyFigure.map(polygon => [polygon.x, polygon.y])\r\n    }))\r\n    return res\r\n    // some async problem, althought setstate has no promise so ;)\r\n    // setTileData(prevState => {\r\n    //   console.log('%c⧭', 'color: #00e600', prevState);\r\n    //   if (prevState.has(key)) prevState.get(key).push(res)\r\n    //   else prevState.set(key, [res])\r\n    //   console.log('%c⧭', 'color: #0c550c', prevState);\r\n    // })\r\n  })\r\n  return geoJson\r\n}\r\n\r\n\r\nexport function processPlacesResponse(res, d, TEXT, setGeoData, tiledata, setTileData) {\r\n  if (res.status !== 'OK') return setToast(d, { title: TEXT.networkError, message: typeof res.msg === 'object' ? JSON.stringify(res.msg) : res.msg || JSON.stringify(res.smg) })\r\n  // Pass array of places upwards, to mapbox\r\n  const geoJson = geoJsonFromResponse(res.data)\r\n  setGeoData(geoJson)\r\n  // Update current tile data\r\n\r\n  const localTileData = new Map([...tiledata])\r\n\r\n  res.data.forEach(placeData => {\r\n    const res = {\r\n      type: 'Feature',\r\n      geometry: {\r\n        type: \"MultiPolygon\",\r\n      },\r\n      id: placeData.id,\r\n      properties: {\r\n        rating: Number(placeData.rating),\r\n        amount: placeData.amount,\r\n        name: placeData.name,\r\n        lng: placeData.lng,\r\n        lat: placeData.lat,\r\n        // x: placeData.x,\r\n        // y: placeData.y\r\n      },\r\n      source: \"composite\",\r\n      sourceLayer: \"building\",\r\n    }\r\n\r\n    const key = 'x' + placeData.x + 'y' + placeData.y\r\n    if (localTileData.has(key)) localTileData.get(key).set(placeData.id, res)\r\n    else {\r\n      const featureList = new Map()\r\n      featureList.set(placeData.id, res)\r\n      localTileData.set(key, featureList)\r\n    }\r\n  })\r\n\r\n  setTileData(localTileData)\r\n\r\n  return geoJson\r\n}","import { getAdress } from \"../requests/map\"\r\nimport { flyToFeature } from \"./Map\"\r\n\r\nexport function mapOnClick(map, setFeature, resetRater, drawObject) {\r\n  function geoFromTurf(geo) {\r\n    if (!geo[1]) return geo[0]\r\n    let res2 = window.turf.union(geo[0], geo[1])\r\n    if (geo[2]) for (let i = 2; i < geo.length; i++) {\r\n      res2 = window.turf.union(res2, geo[i])\r\n    }\r\n\r\n    return res2.geometry\r\n  }\r\n  function findFeatureClones(feature) {\r\n    const someFeatures = map.querySourceFeatures(\"composite\",\r\n      {\r\n        filter: [\"any\", [\"==\", [\"id\"], feature.id]],\r\n        sourceLayer: feature.sourceLayer\r\n      }\r\n    )\r\n    someFeatures.splice(someFeatures.length / 2)\r\n    return someFeatures.map(f => f.geometry)\r\n  }\r\n  function lesserGeometry(feature) {\r\n    const features = findFeatureClones(feature) || []\r\n    return geoFromTurf(features)\r\n  }\r\n\r\n  map.on('click', async function (e) {\r\n    function zoomOnEvent(zoom) {\r\n      const { lng, lat } = e.lngLat\r\n      map.flyTo({ center: [lng, lat], zoom: zoom });\r\n    }\r\n    // if (map.getZoom() < 16) zoomOnEvent(16)\r\n\r\n    const features = map.queryRenderedFeatures(e.point);\r\n    const featuresNeeded = new Set(['building', 'landuse'])\r\n\r\n    // Case next timer\r\n    const ratedBefore = features.find(feature => feature.source === 'ratedFeaturesSource')\r\n    if (ratedBefore) {\r\n      console.log('found rated feature', ratedBefore);\r\n      drawObject?.trash()\r\n\r\n\r\n      flyToFeature(map, ratedBefore)\r\n      setFeature(ratedBefore)\r\n      return;\r\n    }\r\n\r\n    // Case first timer\r\n    const featureToRate = features.find(feature => featuresNeeded.has(feature.sourceLayer))\r\n    if (featureToRate?.id) {\r\n      console.log('found feature', featureToRate);\r\n      drawObject?.trash()\r\n\r\n\r\n      const zoom = map.getZoom()\r\n      const [lng, lat] = flyToFeature(map, featureToRate, zoom < 16 ? 16 : zoom) //TODO make some sort of buffer \r\n      const geometry = lesserGeometry(featureToRate)\r\n\r\n      featureToRate.properties.name = await getAdress(lat, lng)\r\n\r\n      setFeature({ ...featureToRate, geometry })\r\n      return;\r\n\r\n    } else if (featureToRate) {\r\n      console.log('interesting, but no id', featureToRate);\r\n      drawObject?.trash()\r\n\r\n      zoomOnEvent(map.getZoom() + 1)\r\n      setFeature(null)\r\n      return;\r\n    }\r\n    else {\r\n      if (features?.[0]?.source === 'mapbox-gl-draw-hot') return;\r\n      console.log('no interesting features', features);\r\n\r\n\r\n      const labelTypes = new Set(['natural_label', 'place_label', 'poi_label', 'housenum_label', 'airport_label'])\r\n      const labelFeature = features.find(feature => labelTypes.has(feature.sourceLayer))\r\n      if (labelFeature) {\r\n        const defaultZoom = map.getZoom() + 1\r\n        defaultZoom < 16 && zoomOnEvent(defaultZoom)\r\n      }\r\n      resetRater()\r\n      return;\r\n    }\r\n  });\r\n}","import { requsetMaker } from \"./config\"\r\n\r\nexport async function getFriends() {\r\n  const f = requsetMaker('GET', 'friends', 'all', null, true)\r\n  return await f()\r\n}\r\n\r\nexport async function getRequests() {\r\n  const f = requsetMaker('GET', 'friends', 'requests', null, true)\r\n  return await f()\r\n}\r\n\r\nexport async function searchUsers(input) {\r\n  const f = requsetMaker('GET', 'friends', 'search', null, true, 'input=' + input)\r\n  return await f()\r\n}\r\n\r\nexport async function getProfileDetails(id) {\r\n  const f = requsetMaker('GET', 'friends', 'details', null, true, 'id=' + id)\r\n  return await f()\r\n}\r\n\r\n// Make friend request\r\nexport async function addFriend(id) {\r\n  const f = requsetMaker('GET', 'friends', 'add', null, true, 'id=' + id)\r\n  return await f()\r\n}\r\n\r\nexport async function removeFriend(id) {\r\n  const f = requsetMaker('GET', 'friends', 'remove', null, true, 'id=' + id)\r\n  return await f()\r\n}\r\n\r\nexport async function acceptRequest(id) {\r\n  const f = requsetMaker('GET', 'friends', 'accept', null, true, 'id=' + id)\r\n  return await f()\r\n}\r\n\r\nexport async function addByLink(id) {\r\n  const f = requsetMaker('GET', 'friends', 'addByLink', null, true, 'id=' + id)\r\n  return await f()  \r\n}\r\n","import { friendModeId, setLoginStatus, setMapMode } from './app'\r\n// Name consts\r\nconst WRITECREDENTIALS = 'user/set_credentials'\r\nconst CHANGELEVEL = 'user/set_level'\r\nconst SETFRIENDS = 'user/set_friends'\r\nconst SETREQUESTS = 'user/set_requests'\r\nconst COMMENT_N = 'user/comments_number'\r\n\r\n// Reducer\r\nconst basicState = {\r\n  name: 'anonimus',\r\n  login: '',\r\n  level: 0,\r\n  id: 'anonimus',\r\n  commentsn: 0,\r\n  avatar: null,\r\n  friends: [],\r\n  requests: []\r\n}\r\nexport let initialState = { ...basicState }\r\n\r\nexport function userReducer(state = initialState, act) {\r\n  switch (act.type) {\r\n    case WRITECREDENTIALS: {\r\n      return {\r\n        ...state, ...act.credentials\r\n      }\r\n    }\r\n    case CHANGELEVEL: {\r\n      return {\r\n        ...state, level: act.newLevel\r\n      }\r\n    }\r\n    case SETFRIENDS: {\r\n      return {\r\n        ...state, friends: [...act.friendsArr]\r\n      }\r\n    }\r\n    case SETREQUESTS: {\r\n      return {\r\n        ...state, requests: [...act.requestsArr]\r\n      }\r\n    }\r\n    case COMMENT_N: {\r\n      return {\r\n        ...state, commentsn: act.number\r\n      }\r\n    }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\n// Actions\r\nexport const setCredentials = (d, creds) => {\r\n  d({ type: WRITECREDENTIALS, credentials: { ...creds } })\r\n}\r\nexport const logIntoApp = (d, creds) => {\r\n  setCredentials(d, creds)\r\n  setLoginStatus(d, true)\r\n}\r\nexport const logOutOfApp = (d) => {\r\n  friendModeId(d, null)\r\n  setMapMode(d, 'default')\r\n  setCredentials(d, basicState)\r\n  setLoginStatus(d, false)\r\n}\r\n\r\nexport const setUserLevel = (d, level) => {\r\n  d({ type: CHANGELEVEL, newLevel: Number(level) })\r\n}\r\n\r\nexport const setUserFriends = (d, friends = []) => {\r\n  d({ type: SETFRIENDS, friendsArr: friends })\r\n}\r\nexport const setUserRequests = (d, requests = []) => {\r\n  d({ type: SETREQUESTS, requestsArr: requests })\r\n}\r\n\r\n\r\nexport const setCommentsNumber = (d, number) => d({ type: COMMENT_N, number })","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgDraw(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    fill: \"current\",\n    enableBackground: \"new 0 0 512 512\",\n    height: \"512px\",\n    id: \"Layer_1\",\n    viewBox: \"0 0 512 512\",\n    width: \"512px\",\n    xmlSpace: \"preserve\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M493.278,154.515l-22.625,22.641L334.871,41.39l22.625-22.641c25-25,65.531-25,90.531,0l45.25,45.266  C518.246,89,518.246,129.515,493.278,154.515z M176.465,426.031c-6.25,6.25-6.25,16.375,0,22.625c6.25,6.281,16.375,6.281,22.625,0  l248.938-248.875l-22.656-22.641L176.465,426.031z M63.309,312.906c-6.25,6.25-6.25,16.375,0,22.625s16.375,6.25,22.625,0  L334.871,86.64l-22.625-22.625L63.309,312.906z M357.465,109.25L108.559,358.156c-12.5,12.469-12.469,32.75,0,45.25  c12.5,12.5,32.75,12.563,45.281-0.031l248.906-248.859L357.465,109.25z M153.778,471.219c-7.656-7.656-11.344-17.375-12.719-27.375  c-3.25,0.5-6.531,0.969-9.875,0.969c-17.094,0-33.156-6.688-45.25-18.781c-12.094-12.125-18.75-28.156-18.75-45.25  c0-3.125,0.469-6.156,0.906-9.188c-10.344-1.406-19.906-5.938-27.406-13.438c-0.719-0.719-0.969-1.688-1.625-2.469L-0.004,512  l155.906-39.031C155.215,472.344,154.434,471.875,153.778,471.219z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgDraw);\nexport default __webpack_public_path__ + \"static/media/draw.1baff023.svg\";\nexport { ForwardRef as ReactComponent };","\r\n// const basicLanguage = {\r\n//   homeLinkBtn: \"Home\",\r\n//   authLinkBtn: \"Authorize\",\r\n//   setsLinkBtn: \"Settings\",\r\n//   login: \"Login\",\r\n//   register: 'Register',\r\n//   yourName: 'Your name',\r\n//   submit: 'Submit',\r\n//   confirm: 'Confirm',\r\n//   greetings: 'Hello there',\r\n//   firstTimeRate: 'You have an honor to be first to rate this place!',\r\n//   placeRatingPrefix: 'This place has rating of',\r\n//   placeAmountPrefix: 'Rated',\r\n//   placeAmountNumberEnds1: 'time',\r\n//   placeAmountNPostfix: 's',\r\n//   push: 'Push',\r\n//   commentPlacehol: 'any comments?'\r\n// }\r\n\r\nimport { appThemes } from \"./config\"\r\n\r\n\r\nconst ru = {\r\n  ru: 'русский',\r\n  en: 'английский',\r\n  homeLinkBtn: \"Главная\",\r\n  authLinkBtn: \"Логин\",\r\n  profile: \"Профиль\",\r\n  theme: \"Тема\",\r\n  friends: \"Друзья\",\r\n  routes: \"Маршруты\",\r\n  language: \"Язык\",\r\n  aboutUs: \"О проекте\",\r\n  setsLinkBtn: \"Настройки\",\r\n  login: \"Логин\",\r\n  logout: 'Выйти',\r\n  register: 'Регистрация',\r\n  yourLogin: 'Ваш логин',\r\n  userName: 'Имя пользователя',\r\n  yourPword: 'Ваш пароль',\r\n  secretQuestion: 'Секретный вопрос',\r\n  secretHint: 'Для восстановления пароля',\r\n  secterAnswer: 'Ответ на секрет',\r\n  secretValidation: 'Вы указали вопрос, укажите и ответ',\r\n  secretReplica: 'Но это не я написал вопрос!',\r\n  secretReplica2: 'А ответ нам всё равно нужен',\r\n  fillRequiredFields: 'Заполните необходимые поля',\r\n  secretExample: 'Имя, которое вы тайно ненавидите',\r\n  submit: 'Отправить',\r\n  confirm: 'Подтвердить',\r\n  greetings: 'Привет',\r\n  firstTimeRate: 'Вам выпала честь первым оценить это место!',\r\n  placeRatingPrefix: 'Общий рейтинг',\r\n  placeAmountPrefix: 'Это место оценили',\r\n  singleMark: 'оценка',\r\n  marks: 'оценок',\r\n  push: 'Нажать',\r\n  commentPlacehol: 'есть комментарии?',\r\n  rating: 'Рейтинг',\r\n  yourRating: 'Ваша оценка',\r\n  bestRating: 'Замечательно',\r\n  worstRating: 'Ужасно',\r\n  reviews: 'Отзывы',\r\n  noComments: 'Без комментариев',\r\n  searchPHolder: 'Найти',\r\n  newFeature: 'Новый объект на карте',\r\n  newFeaturePHolder: 'Адрес или название места',\r\n  drawMode: 'Режим рисования',\r\n  toDrawMode: 'К режиму рисования',\r\n  drawPrompt: 'Завершите создание, дважды нажав на последнюю точку полигона',\r\n  level: 'уровень',\r\n  acceptDefault: 'принять',\r\n  cancelDefault: 'отклонить',\r\n  rateZeroModal: 'Действительно поставить оценку 0?',\r\n  toMain: 'На главную',\r\n  menu: 'Меню',\r\n  pickTheme: 'Выберете тему',\r\n  apply: 'Применить',\r\n  password: 'Пароль',\r\n  field: 'поле',\r\n  tooLong: 'слишком длинное',\r\n  [appThemes[0]]: 'Стандартная',\r\n  [appThemes[1]]: 'Тёмная',\r\n  [appThemes[2]]: 'Black&White',\r\n  [appThemes[3]]: 'Чертёжная',\r\n  successfullReg: 'Успешная регистрация!', \r\n  errorReg: 'Возникла ошибка при регистрации', \r\n  errCode: 'код ошибки',\r\n  loginOccupied: 'Логин уже занят',\r\n  wrongAuth: 'Неверные данные для входа',\r\n  editProfile: 'Редактирование профиля',\r\n  successfulUpdate: 'Успешное обновление',\r\n  secretChallenge: 'Вам нужно ответить на секретный вопрос, чтобы изменить пароль',\r\n  loading: 'Загрузка',\r\n  oauthTitle: 'Регистрация через google аккаунт',\r\n  occupied: 'Занят',\r\n  bannedPwod: 'этот пароль недоступен', \r\n  error: 'ошибка',\r\n  warning: 'внимание',\r\n  complete: 'выполнено',\r\n  initConnectionErr: 'Ошибка при подкючении к серверу, авторизация не удалась. Пожалуйста, сообщите об ошибке',\r\n  networkError: 'ошибка подключения к сети',\r\n  wannaAuthorize: 'Хотите авторизоваться?',\r\n  skip: 'пропустить',\r\n  farewell: 'До встречи',\r\n  pickLanguage: 'Выберете язык',\r\n  requestError: 'ошибка при запросе, возможны проблемы с интернетом', \r\n  anonimus: 'Анон',\r\n  removeComment: 'Удалить комментарий',\r\n  friendList: 'Список друзей',\r\n  sadlyNoFriends: 'Печально, друзей у вас нет',\r\n  addFriends: 'добавить друзей',\r\n  noResults: 'Нет результатов',\r\n  // TODO\r\n  loginToUseThis: 'Авторизуйтесь чтобы увидеть своих друзей, их оценки (и в будущем - маршруты), и добавлять новых друзей',\r\n  authorization: 'авторизация',\r\n  avatar: 'аватар',\r\n  commentsn: 'Количество комментариев',\r\n  addFriend: 'Добавить в друзья',\r\n  removeFriend: 'Убрать из друзей',\r\n  inFriendlist: 'В списке друзей',\r\n  sent: 'Отправлено',\r\n  youRequested: 'Вы оставили запрос',\r\n  confirmRequest: 'Принять запрос',\r\n  addMeLink: 'Ссылка для добавления вас в друзья',\r\n  addByLink: 'Добавить по ссылке',\r\n  pasteAddLink: 'Вставьте ссылку для добавления',\r\n  yourFriendsNow: 'Теперь вы друзья',\r\n  goBack: 'Назад',\r\n  friendRequests: 'Предложения дружбы',\r\n  currentMode: 'Текущий режим',\r\n  watchModeSub1: 'Оценки отдельного друга',\r\n  watchModeSub2: 'Добавьте друзей, чтобы увидеть их оценки отдельно',\r\n  watchModeSub3: 'Отмечайте недостающие здания. В режиме рисования клики на обычные здания могут не работать',\r\n  default: 'обычный',\r\n  reset: 'сбросить',\r\n  asAnonius: 'как аноним',\r\n  send: 'Отправить',\r\n  signWithGoogle: 'Войти через Google',\r\n  defaultMode: 'обычный',\r\n  drawRouteMode: 'рисование маршрута',\r\n  drawing: 'рисование',\r\n  mode: 'режим',\r\n  marksOf: 'оценки',\r\n  close: 'Закрыть',\r\n  tags: 'Тэги',\r\n  tagsAmount: 'к-во тэгов',\r\n  watchAtMap: 'посмотреть на карте',\r\n  recentTags: 'Новые тэги',\r\n  mostPopularPlaces: 'Самые популярные места',\r\n  mostPopular: 'Самые популярные',\r\n  newPassword: 'Новый пароль',\r\n  tag: 'тэг',\r\n  mentionsAmount: 'Колчество упоминаний',\r\n  show: 'Показать',\r\n  mapTagModeSub: 'Посмотрите карту по отдельному #тэгу',\r\n  toTags: 'К тэгам',\r\n  standartMode: 'Обычный режим',\r\n  nowYourLevel: 'Теперь ваш уровень',\r\n  aboutPlaceholder: 'Комментарий и, если необходимо, контакт для обратной связи',\r\n  aboutMain: `Привет, спасибо за внимание к проекту! \r\n  В сущности он создан для двух вещей - найти самые яркие места города и делиться своими оценками с друзьями`,\r\n  comment: 'Комментарий',\r\n  aboutFutureTitle: 'О будущем проекта',\r\n  aboutFuture: `Прежде всего я планирую добавить 'маршруты', которыми тоже можно будет делиться и случайно встречать \r\n  чужие маршруты на карте. Придумать название тоже было бы неплохо. \r\n  В комментарии вы можете оставить предложения или впечатления о сайте, либо свяжитесь со мной \r\n  напрямую через ilyaizrailyan@gmail.com или @ilyaizr в какой-нибудь соц сети`,\r\n  version: 'версия',\r\n  myMarks: 'мои оценки',\r\n  // alpha 3\r\n  noName: 'без названия'\r\n}\r\n\r\nexport const TEXT = window.APPTEXT || ru","import { getFriends, getRequests } from \"../requests/friends\"\r\nimport { setToast } from \"../store/app\"\r\nimport { setUserFriends, setUserRequests } from \"../store/user\"\r\nimport { TEXT } from \"./lang\"\r\n\r\nexport function saveLocation({ lng, lat }) {\r\n  window.localStorage.setItem('lastLocation', JSON.stringify({ lng, lat }))\r\n}\r\n\r\nexport function getLocation() {\r\n  let loc = window.localStorage.getItem('lastLocation')\r\n  if (!loc) return {}\r\n  loc = JSON.parse(loc)\r\n  const { lng, lat } = loc\r\n  return { lng, lat }\r\n}\r\n\r\nexport function getLayoutCoords(lng, lat, zoom) {\r\n  const x = Math.floor((lng + 180) / 360 * Math.pow(2, zoom))\r\n  const y = Math.floor((1 - Math.log(Math.tan(lat * Math.PI / 180) + 1 / Math.cos(lat * Math.PI / 180)) / Math.PI) / 2 * Math.pow(2, zoom))\r\n  return { x, y }\r\n}\r\n\r\nexport async function getFriendsInfo(dispatch) {\r\n  const res = await getFriends()\r\n  if (res.status !== 'OK' && res.status !== 'REAUTH') return setToast(dispatch, { message: TEXT.requestError + ' #gFII1' });\r\n  setUserFriends(dispatch, res.data)\r\n\r\n  const reqs = await getRequests()\r\n  if (res.status !== 'OK' && res.status !== 'REAUTH') return setToast(dispatch, { message: TEXT.requestError + ' #gFII2'});\r\n  setUserRequests(dispatch, reqs.data)\r\n}\r\n\r\nexport function notNaN(val) {\r\n  if (!val && typeof val === 'number' && val !== 0) return 0\r\n  return val\r\n}","import { getAdress } from \"../requests/map\";\r\n// eslint-disable-line no-unused-vars\r\n\r\nexport function mapAddControl(map, setFeature, createBtn, deleteBtn, setDrawPrompt, resetRater) {\r\n\r\n  const draw = new window.MapboxDraw({\r\n    displayControlsDefault: false,\r\n    controls: {\r\n      // polygon: true,\r\n      // trash: true\r\n    },\r\n    // defaultMode: 'draw_polygon'\r\n  });\r\n  \r\n  // Create custom controls\r\n  createBtn.onclick = function () {\r\n    draw.changeMode('draw_polygon')\r\n    deleteBtn.style.display = 'block'\r\n    setDrawPrompt(true)\r\n  }\r\n  deleteBtn.onclick = function () {\r\n    draw.deleteAll()\r\n    resetRater()\r\n    setDrawPrompt(false)\r\n    createBtn.style.display = 'block'\r\n    deleteBtn.style.display = 'none'\r\n  }\r\n\r\n  map.addControl(draw);\r\n  createBtn.style.display = 'block'\r\n  deleteBtn.style.display = 'none'\r\n\r\n\r\n  map.on('draw.create', updateArea);\r\n  map.on('draw.update', updateArea);\r\n  // map.on('draw.delete', afterDelete);\r\n  // map.on('draw.selectionchange', afterUnfocus);\r\n  // function afterDelete() {\r\n  // }\r\n  // function afterUnfocus() {\r\n  //   console.log('%c⧭', 'color: #cc7033', 'afterUnfocus');\r\n  // }\r\n\r\n  async function updateArea(e) {    \r\n    setDrawPrompt(false)\r\n    createBtn.style.display = 'none'\r\n\r\n    // console.log('%c⧭', 'color: #8c0038', 'update area func');\r\n\r\n    const data = draw.getAll();\r\n\r\n    if (data.features.length > 0) {\r\n      // TODO if area > 30_000 show error notification, also check for too little area. Also chek if nothing inside\r\n      // const area = window.turf.area(data);\r\n      // restrict to area to 2 decimal points\r\n      // const rounded_area = Math.round(area * 100) / 100;\r\n      // console.log('%c⧭', 'color: #99adcc', rounded_area);\r\n      const feature = { ...data.features[0] }\r\n      feature.properties.amount = 0\r\n      feature.properties.created = true\r\n      feature.source = 'createdPoly'\r\n      const [lng, lat] = window.turf.centroid(feature.geometry).geometry.coordinates\r\n      const zoom = map.getZoom()\r\n      // Vector tile feature calculations\r\n      feature._vectorTileFeature = {\r\n        _x: Math.floor((lng + 180) / 360 * Math.pow(2, zoom)),\r\n        _y: Math.floor((1 - Math.log(Math.tan(lat * Math.PI / 180) + 1 / Math.cos(lat * Math.PI / 180)) / Math.PI) / 2 * Math.pow(2, zoom))\r\n      }\r\n\r\n      feature.properties.name = await getAdress(lat, lng)\r\n      console.log('%c⧭', 'color: #917399', feature.properties.name);\r\n      setFeature(feature)\r\n    }\r\n    // if (e.type !== 'draw.delete')\r\n  }\r\n\r\n  return draw\r\n}","import { getLayoutCoords } from \"../rest/helperFuncs\";\r\n\r\nexport function mapOnMove(map, setlayoutXY, range, setWeDataNeed, setTileData) {\r\n  map.on('moveend', function (e) {\r\n    const { lng, lat } = map.getCenter()\r\n    // const zoom = map.getZoom()\r\n    const { x: currentX, y: currentY } = getLayoutCoords(lng, lat, 16)\r\n    let prevXY\r\n    setlayoutXY(prev => {\r\n      prevXY = prev\r\n      return { x: currentX, y: currentY }\r\n    })\r\n\r\n    // Check changes\r\n    if (!prevXY || (prevXY.x === currentX && prevXY.y === currentY)) return;\r\n    // console.log('%c⧭ prevx:', 'color: #00bf00', prevXY);\r\n    // console.log('%c⧭ newx', 'color: #0088cc', currentX);\r\n    // console.log('%c⧭ newy', 'color: #0088cc', currentY);\r\n\r\n    // Case something changed\r\n\r\n    // local variables\r\n    const dataWeNeed = new Set([])\r\n    let dataWeHave\r\n\r\n    setTileData(reactiveData => {\r\n      dataWeHave = reactiveData\r\n\r\n      // Go from top row to bottom\r\n      for (let yOffset = range; yOffset > -range - 1; yOffset--) {\r\n        // From left to right (although in Mapbox y starts from top - North)\r\n        for (let xOffset = -range; xOffset < range + 1; xOffset++) {\r\n          const key = 'x' + (currentX + xOffset) + 'y' + (currentY + yOffset)\r\n          if (dataWeHave.has(key)) continue\r\n          // Add data\r\n          dataWeNeed.add(key)\r\n        }\r\n      }\r\n\r\n      // clean if needed\r\n      if (dataWeNeed.size > 10)\r\n\r\n        Array.from(dataWeHave.keys()).forEach(tileKey => {\r\n          // console.log('%c⧭ tileKey is', 'color: #9c66cc', tileKey);\r\n          // console.log('%c⧭ DWN is', 'color: #00a3cc', dataWeNeed);\r\n          // console.log('%c⧭ DWN has', 'color: #00e600', dataWeNeed.has(tileKey));\r\n          if (dataWeNeed.has(tileKey)) {\r\n            return console.log('%c⧭ it had tilekey', 'color: #e50000', tileKey);\r\n          }\r\n          dataWeHave.delete(tileKey)\r\n        })\r\n\r\n      return reactiveData\r\n    })\r\n\r\n    setWeDataNeed(dataWeNeed)\r\n  })\r\n}","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgTrash(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    fill: \"current\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"980.000000pt\",\n    height: \"952.000000pt\",\n    viewBox: \"0 0 980.000000 952.000000\",\n    preserveAspectRatio: \"xMidYMid meet\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(0.000000,952.000000) scale(0.100000,-0.100000)\",\n    fill: \"#000000\",\n    stroke: \"none\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M3665 9513 c-274 -38 -540 -237 -651 -489 -64 -145 -67 -168 -72 -551 l-4 -353 -1347 0 c-1535 0 -1416 7 -1507 -84 -79 -80 -102 -173 -68 -286 22 -74 100 -152 174 -174 49 -15 492 -16 4711 -16 4301 0 4661 1 4708 17 66 21 125 72 159 137 22 42 27 63 26 126 0 113 -50 197 -148 248 l-51 27 -1367 3 -1368 2 0 309 c0 232 -4 330 -15 396 -30 169 -106 314 -230 440 -129 132 -291 217 -465 244 -62 10 -2414 14 -2485 4z m2483 -588 c59 -32 91 -66 125 -129 21 -39 22 -53 25 -358 l3 -318 -1401 0 -1401 0 3 318 3 317 27 51 c36 69 100 121 178 145 14 4 556 7 1205 6 l1180 -2 53 -30z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1726 7264 c-34 -11 -64 -31 -102 -68 -93 -94 -84 236 -84 -3160 0 -3275 -3 -3089 56 -3265 29 -86 91 -214 136 -279 138 -201 353 -361 584 -437 174 -57 69 -55 2584 -55 1482 0 2340 4 2385 10 292 42 549 187 729 412 76 94 153 237 191 354 58 176 55 8 55 3265 0 3390 9 3062 -84 3155 -114 113 -278 113 -392 0 -93 -93 -84 233 -84 -3141 0 -2072 -3 -2999 -11 -3041 -35 -194 -186 -361 -389 -430 -53 -18 -135 -19 -2405 -19 l-2350 0 -59 22 c-150 57 -263 157 -326 286 -21 45 -43 109 -49 141 -8 42 -11 969 -11 3041 0 3374 9 3048 -84 3141 -80 79 -178 102 -290 68z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M3406 6144 c-34 -11 -64 -31 -102 -68 -92 -93 -84 110 -84 -2156 0 -2265 -8 -2063 84 -2156 113 -112 278 -112 391 1 93 92 85 -114 85 2154 0 2266 8 2064 -84 2157 -80 79 -178 102 -290 68z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M4806 6144 c-34 -11 -64 -31 -102 -68 -92 -93 -84 110 -84 -2156 0 -2265 -8 -2063 84 -2156 113 -112 278 -112 391 1 93 92 85 -114 85 2154 0 2266 8 2064 -84 2157 -80 79 -178 102 -290 68z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M6206 6144 c-34 -11 -64 -31 -102 -68 -92 -93 -84 110 -84 -2156 0 -2265 -8 -2063 84 -2156 113 -112 278 -112 391 1 93 92 85 -114 85 2154 0 2266 8 2064 -84 2157 -80 79 -178 102 -290 68z\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgTrash);\nexport default __webpack_public_path__ + \"static/media/trash.2cac10ed.svg\";\nexport { ForwardRef as ReactComponent };","import { useEffect, useRef, useState } from 'react'\r\nimport mapboxgl from '!mapbox-gl'; // eslint-disable-line import/no-webpack-loader-syntax\r\nimport { getPlaces, getPlacesByTiles, getTagPlaces, getTagPlacesTiles, getUserPlaces } from '../requests/map';\r\nimport { mapOnLoad } from './onLoad';\r\nimport { geoJsonFromResponse, processPlacesResponse } from './filters';\r\nimport { mapOnClick } from './onClick';\r\nimport { getLayoutCoords, getLocation, saveLocation } from '../rest/helperFuncs';\r\nimport { TEXT } from '../rest/lang';\r\nimport { mapAddControl } from './addControl';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { hideMain, setMapRef, setToast, showMain } from '../store/app';\r\nimport { mapOnMove } from './onMove';\r\nimport { ReactComponent as DrawIcon } from '../rest/svg/draw.svg'\r\nimport { ReactComponent as TrashIcon } from '../rest/svg/trash.svg'\r\n\r\n// Settings\r\nmapboxgl.accessToken = process.env.REACT_APP_MAPBOX_T;\r\nconst range = 3\r\nconst zoom = 16\r\nconst bryansk = {\r\n  lng: 34.354, lat: 53.235\r\n}\r\nconst mbStyles = {\r\n  standart: 'mapbox://styles/ilyaizr/ckq2l808k0ifn17o0x0yl9qi4',\r\n  dark: 'mapbox://styles/ilyaizr/cktd77j8u12ch18swzrqikqor',\r\n  'b&w': 'mapbox://styles/ilyaizr/ckpk75aca0hbg17ouqvzsda51', //todo, basic map\r\n  blueprint: 'mapbox://styles/ilyaizr/cksp4jldx0b1z17mog8wzg0jm'  //blueprint with less colors\r\n}\r\n\r\nexport const MapArea = ({ feature, setFeature, resetRater, geoData, setGeoData, featureTrigger }) => {\r\n  const app = useSelector(state => state.app)\r\n  const location = useLocation()\r\n  const d = useDispatch()\r\n  const mapContainer = useRef(null);\r\n\r\n  const map = useRef(null);\r\n  const createBtn = useRef(null);\r\n  const deleteBtn = useRef(null);\r\n  const [drawPrompt, setDrawPrompt] = useState(false);\r\n  // Map places data\r\n  const [, setlayoutXY] = useState({ x: null, y: null });\r\n  const [tiledata, setTileData] = useState(new Map())\r\n  const [dataWeNeed, setWeDataNeed] = useState(new Set());\r\n\r\n  useEffect(() => {\r\n    (async function () {\r\n      if (app.mode === 'watch') return;\r\n      if (app.mode === 'tags' && dataWeNeed.size) {\r\n        const res = await getTagPlacesTiles(app.tagModeTag, [...dataWeNeed])\r\n        return processPlacesResponse(res, d, TEXT, setGeoData, tiledata, setTileData)\r\n      }\r\n      if (dataWeNeed.size) {\r\n        const res = await getPlacesByTiles([...dataWeNeed])\r\n        processPlacesResponse(res, d, TEXT, setGeoData, tiledata, setTileData)\r\n      }\r\n    })()\r\n    // eslint-disable-next-line \r\n  }, [dataWeNeed]);\r\n\r\n  // const [zoom, setZoom] = useState(16);\r\n\r\n\r\n  // Init map\r\n  useEffect(() => {\r\n\r\n    // turns-off draw mode in development\r\n    // if (map.current && process.env.NODE_ENV === 'development') return;  // initialize map only once, dev environment optimization\r\n    setFeature(null);\r\n    (async function () {\r\n      const geoJson = await initPlacesCall()\r\n      const { lng, lat } = getLocation()\r\n\r\n      map.current = new mapboxgl.Map({\r\n        container: mapContainer.current,\r\n        style: mbStyles[app.theme],   //  blueprint\r\n        // center: [-122.447303, 37.753574],  // palo alto\r\n        center: [lng || 34.354, lat || 53.235], // bryansk\r\n        zoom\r\n      });\r\n      setMapRef(d, map.current)\r\n\r\n      // Add search\r\n      if (app.mode !== 'draw') map.current.addControl(\r\n        new window.MapboxGeocoder({\r\n          accessToken: process.env.REACT_APP_MAPBOX_T,\r\n          mapboxgl: mapboxgl,\r\n          placeholder: TEXT.searchPHolder\r\n        })\r\n      );\r\n\r\n      if (app.mode === 'draw')\r\n        var drawObject = mapAddControl(map.current, setFeature, createBtn.current, deleteBtn.current, setDrawPrompt, resetRater)\r\n      // console.log('%c⧭', 'color: #5200cc', p.sty);\r\n      mapOnLoad(map.current, geoJson, app.theme)\r\n      mapOnClick(map.current, setFeature, resetRater, drawObject || null)\r\n      mapOnMove(map.current, setlayoutXY, range, setWeDataNeed, setTileData)\r\n      if (window.google?.maps?.Geocoder) window.geocoderRef = new window.google.maps.Geocoder()\r\n    })();\r\n\r\n\r\n    const interval = setInterval(() => {\r\n      const loc = map.current?.getCenter?.()\r\n      if (loc) saveLocation(loc)\r\n    }, 10000);\r\n\r\n    return () => clearInterval(interval)\r\n\r\n    // eslint-disable-next-line\r\n  }, [app.theme, app.mapKey]);\r\n\r\n\r\n  // Dynamic geodata\r\n  useEffect(() => {\r\n    if (!map.current) return; // wait for map to initialize\r\n    setMapData(map.current, geoData, 'ratedFeaturesSource')\r\n    // eslint-disable-next-line\r\n  }, [featureTrigger, geoData]);\r\n\r\n\r\n  // Mark selected feature\r\n  useEffect(() => {\r\n    if (!map.current) return; // wait for map to initialize\r\n\r\n    setMapData(map.current, [feature || {}], 'selectedFeatureSrc')\r\n    // eslint-disable-next-line\r\n  }, [feature]);\r\n\r\n\r\n  // map hider, helps to awoid extra call to Mapbox\r\n  useEffect(() => {\r\n    if (location.pathname !== '/') hideMain(d)\r\n    else {\r\n      showMain(d)\r\n      // Fix map shrinking. I'm sorry, it only works this wayzz\r\n      setTimeout(() => {\r\n        map.current?.resize()\r\n      }, 0);\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [location.pathname]);\r\n\r\n\r\n  // user maphMode\r\n  useEffect(() => {\r\n    if (!map.current) return; // wait for map to initialize\r\n\r\n    (async function () {\r\n      await initPlacesCall()\r\n    })()\r\n    // eslint-disable-next-line\r\n  }, [app.mode, app.friendModeId, app.tagModeTag]);\r\n\r\n\r\n  async function initPlacesCall() {\r\n    let geoJson\r\n    const { lng, lat } = getLocation()\r\n    // const zoom = map.getZoom()\r\n    const { x, y } = getLayoutCoords(lng || bryansk.lng, lat || bryansk.lat, zoom)\r\n    setlayoutXY({ x, y })\r\n\r\n    if (app.mode === 'watch') {\r\n      const res = await getUserPlaces(app.friendModeId)\r\n      if (res.status !== 'OK') return setToast(d, { title: TEXT.networkError, message: res.msg + '#mp1' || JSON.stringify(res) })\r\n      geoJson = geoJsonFromResponse(res.data)\r\n    } else if (app.mode === 'tags') {\r\n      const res = await getTagPlaces(app.tagModeTag, x - range, x + range, y - range, y + range)\r\n      if (res.status !== 'OK') return setToast(d, { title: TEXT.networkError, message: res.msg + '#mp2' || JSON.stringify(res) })\r\n      geoJson = geoJsonFromResponse(res.data)\r\n    } else {\r\n      const res = await getPlaces(x - range, x + range, y - range, y + range)\r\n      return processPlacesResponse(res, d, TEXT, setGeoData, tiledata, setTileData)\r\n    }\r\n\r\n    setGeoData(geoJson)\r\n    return geoJson\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div ref={mapContainer} className={app.mapHidden ? \"map-container hidden\" : \"map-container\"} />\r\n\r\n      {/* Add button */}\r\n      {(app.mode === 'draw') &&\r\n        <button id=\"createBtn\" ref={createBtn} className=\"mp-bg-light mp-border-accent controlButton\">\r\n          <DrawIcon fill=\"var(--accent)\" className=\"nav-icon\" />\r\n        </button>}\r\n\r\n      {/* Delete button */}\r\n      {(app.mode === 'draw') &&\r\n        <button id=\"deleteBtn\" ref={deleteBtn} className=\"mp-bg-light mp-border-accent controlButton\">\r\n          <TrashIcon fill=\"var(--accent)\" className=\"nav-icon\" />\r\n        </button>}\r\n\r\n      {/* Helper prompt */}\r\n      {(drawPrompt && app.mode === 'draw') && <div className=\"controlPrompt mp-border-secondary mp-bg-light\">\r\n        <h6>{TEXT.drawMode}</h6>\r\n        <p>{TEXT.drawPrompt}</p>\r\n      </div>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function setMapData(map, geoData, sourceId) {\r\n  map.getSource(sourceId)?.setData({\r\n    \"type\": \"FeatureCollection\",\r\n    \"features\": geoData\r\n  })\r\n}\r\n\r\nexport function flyToFeature(map, feature, zoom = 16, speed = 0.5) {\r\n  const [lng, lat] = window.turf.centroid(feature.geometry).geometry.coordinates\r\n  map.flyTo({ center: [lng - 0.0015, lat + 0.0005], zoom, speed });\r\n  return [lng, lat]\r\n}","import { restrictedLetters } from \"../rest/config\"\r\nimport { requsetMaker } from \"./config\"\r\n\r\nexport async function searchTags(input) {\r\n  const f = requsetMaker('GET', 'tags', 'search', null, false, 'input=' + input)\r\n  return await f()\r\n}\r\n\r\nexport async function getTagInfo(tag) {\r\n  const f = requsetMaker('GET', 'tags', 'getTag', null, false, 'tag=' + tag)\r\n  return await f()\r\n}\r\n\r\nexport async function featuredTags() {\r\n  const f = requsetMaker('GET', 'tags', 'featuredTags', null, false)\r\n  return await f()\r\n}\r\n\r\nexport async function tagSuggestions(input) {\r\n  const f = requsetMaker('GET', 'tags', 'tagSuggestions', null, false, 'input=' + input)\r\n  return await f()\r\n}\r\n\r\nexport async function postTags({ user, comment, placeId }) {\r\n  const tagWords = comment.split(' ').filter(w => w?.startsWith('#'))\r\n  let tags = []\r\n  tagWords.forEach(tag => {\r\n    let word = ''\r\n    for (let i = 1; i < tag.length; i++) {\r\n      const letter = tag[i]\r\n      if (restrictedLetters.includes(letter)) break\r\n      word += letter\r\n    }\r\n    if (word) tags.push(word)\r\n  })\r\n\r\n  if (!tags.length) return { status: 'OK' }\r\n  tags = tags.filter((item, i, ar) => ar.indexOf(item) === i)\r\n\r\n  const f = requsetMaker('POST', 'tags', 'postTags', { user, placeId, tags }, false)\r\n  return await f()\r\n}","import { useEffect, useRef, useState } from 'react'\r\nimport { useDispatch } from 'react-redux';\r\nimport { tagSuggestions } from '../requests/tags';\r\nimport { restrictedLetters } from '../rest/config';\r\nimport { TEXT } from '../rest/lang';\r\nimport { setToast } from '../store/app';\r\n\r\nexport const Comment = ({ comment, setComment }) => {\r\n  const dispatch = useDispatch()\r\n\r\n  const ref = useRef(null)\r\n  const [tagSuggestion, setTagSuggestion] = useState(null)\r\n  const [suggestions, setSuggestions] = useState([]);\r\n\r\n  function onInput(e) {\r\n    setComment(e.target.value);\r\n    const currCase = e.nativeEvent.data\r\n\r\n    if (currCase === '#') setTagSuggestion('')\r\n    else if (!currCase || restrictedLetters.includes(currCase)) setTagSuggestion(null)\r\n    else if (typeof tagSuggestion === 'string') setTagSuggestion(tagSuggestion + currCase)\r\n  }\r\n\r\n  function onTagClick(e) {\r\n    const toFill = e.target.attributes.value.value\r\n    const newComm = comment.split('#')\r\n    newComm[newComm.length - 1] = toFill\r\n    setComment(newComm.join('#'))\r\n    setTagSuggestion(null)\r\n    ref.current.focus()\r\n  }\r\n\r\n  useEffect(() => {\r\n    // todo add delay to reqs\r\n    // todo max 3 tags\r\n    (async function () {\r\n      if (typeof tagSuggestion !== 'string') return;\r\n\r\n      const res = await tagSuggestions(tagSuggestion)\r\n      if (res.status !== 'OK') return setToast(dispatch, { message: TEXT.requestError + ' #com1' });\r\n      setSuggestions(res.data)\r\n    })()\r\n\r\n    // eslint-disable-next-line \r\n  }, [tagSuggestion])\r\n\r\n\r\n  return (\r\n    <div>\r\n      {typeof tagSuggestion === 'string' && <div className=\"suggContainer mp-border-dark\">\r\n        {suggestions.map(sugg => <span\r\n          className=\"sugg mp-accent mp-dark-hover mp-border-secondary cursor-pointer\" key={sugg.tag} value={sugg.tag} onClick={onTagClick}\r\n        >\r\n          <span className=\"mp-secondary\">#</span>{sugg.tag}\r\n        </span>)\r\n        }\r\n      </div>}\r\n      <textarea\r\n        name=\"comment\" cols=\"25\" rows=\"2\"\r\n        value={comment} onInput={onInput}\r\n        className=\"raterComment mp-border-dark\"\r\n        placeholder={TEXT.commentPlacehol}\r\n        ref={ref}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n","import { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { gradients } from '../rest/colors';\r\nimport { notNaN } from '../rest/helperFuncs';\r\nimport { TEXT } from '../rest/lang';\r\nimport { setModal } from '../store/app';\r\nimport { Comment } from './Comment';\r\n\r\nexport const Rater = ({ feature, onSubmit }) => {\r\n  const { theme, isLogged } = useSelector(s => s.app)\r\n  const gradient = gradients[theme]\r\n  const dispatch = useDispatch()\r\n\r\n  function color() {\r\n    if (!feature?.properties?.rating) return gradients[theme][0]\r\n    for (let i = 0; i < gradients[theme].length; i++) {\r\n      if (feature.properties.rating - 1 < i) return gradients[theme][i]\r\n    }\r\n  }\r\n\r\n  const [hover, setHover] = useState(0);\r\n  const [rating, setRating] = useState(0);\r\n  const [comment, setComment] = useState('');\r\n\r\n  function onClick() {\r\n    setRating(hover)\r\n  }\r\n  function onSub() {\r\n    if (Number(rating) === 0) return setModal(dispatch, {\r\n      message: TEXT.rateZeroModal,\r\n      acceptAction: submitAction,\r\n      acceptLabel: TEXT.yes,\r\n      cancelLabel: TEXT.goBack,\r\n    })\r\n    submitAction()\r\n  }\r\n  function submitAction() {\r\n    setHover(0)\r\n    onSubmit(rating, comment)\r\n  }\r\n  function onMouseEnter(e) {\r\n    setHover(Number(e.target.name))\r\n  }\r\n  function onMouseLeave() {\r\n    setHover(rating)\r\n  }\r\n  function ratingData() {\r\n    return String(Number(feature.properties.rating).toPrecision(3)).split('.')\r\n  }\r\n\r\n  useEffect(() => {\r\n    setHover(0)\r\n    setRating(0)\r\n    setComment('')    \r\n  }, [feature])\r\n\r\n  // TODO make stars with rating gradient\r\n  return (\r\n    <div className=\"rater\">\r\n      <div className={`starsAndRating ${feature.properties.rating === undefined && 'noRating'}`}>\r\n\r\n        <div className=\"stars\">\r\n          <h5 className=\"starRating\">{TEXT.yourRating} :</h5> <span className=\"hoverValue mp-dark\">{notNaN(hover)}</span>\r\n          <br />\r\n          {[...Array(5)].map((star, index) => {\r\n            index += 1;\r\n            return (\r\n              <button\r\n                type=\"button\"\r\n                key={index}\r\n                name={index}\r\n                className=\"starButton\"\r\n                onClick={onClick}\r\n                onMouseEnter={onMouseEnter}\r\n                onMouseLeave={onMouseLeave}\r\n                style={index <= (hover || rating) ? { color: gradient[hover] } : { color: gradient[0] }}\r\n              >\r\n                <span className=\"star\">&#9733;</span>\r\n              </button>\r\n            );\r\n          })}\r\n\r\n        </div>\r\n\r\n        {feature.properties.rating !== undefined && <div className=\"rating\">\r\n          <div className=\"ratingAmount mp-border-primary relative\" style={{ borderColor: color() }} title={TEXT.rating}>\r\n            {notNaN(ratingData()[0])}.<span >{notNaN(ratingData()[1])}</span>\r\n            <sub className=\"mp-dark mp-bg-light\" style={{ color: color() }} title={TEXT.marks}> ( {feature.properties.amount} ) </sub>\r\n          </div>\r\n        </div>}\r\n      </div>\r\n\r\n      <Comment comment={comment} setComment={setComment} />\r\n\r\n      <div className=\"raterBtnContainer\">\r\n        <button type=\"button\" onClick={onSub}>{TEXT.send}</button>\r\n        {!isLogged &&\r\n          <div className=\"subtitle\">{TEXT.asAnonius}</div>\r\n        }\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect } from 'react'\r\n// import { useSelector } from 'react-redux';\r\n// import { gradients } from '../rest/colors';\r\nimport { TEXT } from \"../rest/lang\";\r\n\r\nexport const Featurer = ({ feature, name, setName }) => {\r\n\r\n  // const { theme } = useSelector(s => s.app)\r\n\r\n  // function color() {\r\n  //   if (!feature?.properties?.rating) return gradients[theme][0]\r\n  //   for (let i = 0; i < gradients[theme].length; i++) {\r\n  //     if (feature.properties.rating <= i) return gradients[theme][i]\r\n  //   }\r\n  // }\r\n\r\n  useEffect(() => {\r\n    if (feature?.name) setName(feature.name)\r\n    else if (feature?.properties?.name) setName(feature.properties.name)\r\n\r\n    console.log('%c⧭', 'color: #d0bfff', feature);\r\n  }, [feature, setName])\r\n\r\n  if (!feature?.source) {\r\n    console.log('wtf feature', feature);\r\n    return null\r\n  }\r\n  // Case rated before\r\n  if (feature.source === 'ratedFeaturesSource') return (\r\n    <div className=\"featurer\">\r\n      {feature.properties.name ?\r\n        <div className=\"featureNameWrap\">\r\n          <p className=\"featureName mp-bg-light mp-border-primary mp-dark\">{feature.properties.name}</p>\r\n        </div>\r\n        : <></>}\r\n    </div>\r\n  )\r\n  // Case created  \r\n  function onInput(e) {\r\n    setName(e.target.value)\r\n    feature.properties.name = e.target.value\r\n  }\r\n  if (feature.source === 'createdPoly') return (\r\n    <div className=\"featurer\">\r\n      <p className=\"featurerGreetings\">\r\n        {TEXT.newFeature}\r\n      </p>\r\n\r\n\r\n      {feature.properties.name ?\r\n        <div className=\"featureNameWrap\">\r\n          <p className=\"featureName mp-bg-light mp-border-primary mp-dark\">{feature.properties.name}</p>\r\n        </div>\r\n        : <div className=\"featureNameWrap\">\r\n          <input\r\n            type=\"text\" value={name} onInput={onInput}\r\n            placeholder={TEXT.newFeaturePHolder} title={TEXT.newFeaturePHolder}\r\n            className=\"featureName mp-bg-light mp-border-primary mp-dark\"\r\n          />\r\n        </div>}\r\n    </div>\r\n  )\r\n  // Case new feature\r\n  return (\r\n    <div className=\"featurer\">\r\n      <p className=\"featurerGreetings\">\r\n        {TEXT.firstTimeRate}\r\n      </p>\r\n      {feature.properties.name ?\r\n        <div className=\"featureNameWrap\">\r\n          <p className=\"featureName mp-bg-light mp-border-primary mp-dark\">{feature.properties.name}</p>\r\n        </div>\r\n        : <></>}\r\n    </div>\r\n  )\r\n}\r\n","export function formatGeodata(geometry) {\r\n  // Treat everyone as multiPoly\r\n  let multiPoly\r\n  if (geometry.type === 'Polygon') {\r\n    multiPoly = [geometry.coordinates]\r\n  }\r\n  else multiPoly = geometry.coordinates\r\n\r\n  let north = -90\r\n  let east = -180\r\n  let south = 90\r\n  let west = 180\r\n\r\n  // 'MULTIPOLYGON('\r\n  const polyPoints = []\r\n\r\n  multiPoly.forEach((polyCoords) => {\r\n    polyPoints.push( polygonMapper(polyCoords))\r\n  })\r\n  const multiFormatted = 'MULTIPOLYGON(' + polyPoints.join(', ') + ')'\r\n\r\n  function polygonMapper(polyCoords) {\r\n    const polyArray = []\r\n    polyCoords.forEach((coordinates, shapeIndex) => {\r\n      polyArray.push('(')\r\n      // Map through each poly entity\r\n      coordinates.forEach(([lon, lat], i) => {\r\n        //    Find medium lon and lat\r\n        // Lesser longitude = more western\r\n        if (lon < west) west = lon\r\n        if (lon > east) east = lon\r\n        // Lesser latitude - more southern\r\n        if (lat > north) north = lat\r\n        if (lat < south) south = lat\r\n\r\n        // Store polydata\r\n        polyArray[shapeIndex] += (i ? ', ' : '') + String(lon) + ' ' + String(lat)\r\n      })\r\n      polyArray[shapeIndex] += ')'\r\n    })\r\n\r\n    return '(' + polyArray.join(',') + ')'\r\n  }\r\n\r\n\r\n  return [\r\n    [east, north],\r\n    [west, south],\r\n    multiFormatted\r\n  ]\r\n}\r\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgClose5(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    fill: \"#current\",\n    id: \"Layer_1\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 50 50\",\n    enableBackground: \"new 0 0 50 50\",\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M9.016,40.837c0.195,0.195,0.451,0.292,0.707,0.292c0.256,0,0.512-0.098,0.708-0.293l14.292-14.309 l14.292,14.309c0.195,0.196,0.451,0.293,0.708,0.293c0.256,0,0.512-0.098,0.707-0.292c0.391-0.39,0.391-1.023,0.001-1.414 L26.153,25.129L40.43,10.836c0.39-0.391,0.39-1.024-0.001-1.414c-0.392-0.391-1.024-0.391-1.414,0.001L24.722,23.732L10.43,9.423 c-0.391-0.391-1.024-0.391-1.414-0.001c-0.391,0.39-0.391,1.023-0.001,1.414l14.276,14.293L9.015,39.423 C8.625,39.813,8.625,40.447,9.016,40.837z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgClose5);\nexport default __webpack_public_path__ + \"static/media/close5.914d7c96.svg\";\nexport { ForwardRef as ReactComponent };","var _defs, _polyline;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgTop(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    fill: \"current\",\n    \"data-name\": \"Layer 1\",\n    id: \"Layer_1\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", null)), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _polyline || (_polyline = /*#__PURE__*/React.createElement(\"polyline\", {\n    className: \"Graphic-Style\",\n    \"data-name\": \"<Path>\",\n    id: \"_Path_\",\n    points: \"3.41 16.34 12.1 7.66 20.59 16.14\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgTop);\nexport default __webpack_public_path__ + \"static/media/top.e6d76230.svg\";\nexport { ForwardRef as ReactComponent };","import { useDispatch, useSelector } from 'react-redux'\r\nimport { gradients } from '../rest/colors'\r\nimport { TEXT } from '../rest/lang'\r\nimport { ReactComponent as CloseIcon } from '../rest/svg/close5.svg';\r\nimport { closeMapLegend } from '../store/app';\r\n\r\nexport const Legend = () => {\r\n  const theme = useSelector(s => s.app.theme)\r\n  const gradient = gradients[theme]\r\n  const dispatch = useDispatch()\r\n\r\n  function closeLegend() {\r\n    closeMapLegend(dispatch)\r\n  }\r\n\r\n  return (\r\n    <div className=\"mapLegend mp-bg-light mp-border-secondary mp-shadow-light\">\r\n      <div className=\"ratingLegend\">\r\n        <div className=\"ratingDescription\">\r\n          <span>{TEXT.worstRating}</span>\r\n          <span>{TEXT.bestRating}</span>\r\n        </div>\r\n        <div className=\"ratingUnitsWrap\">\r\n          {gradient.map((color, i) => {\r\n            return (\r\n              <div className=\"ratingUnit\" key={color + i}>\r\n                <span className=\"ratingColor\" style={{ backgroundColor: color }}></span>\r\n              </div>\r\n            )\r\n          })}\r\n        </div>\r\n        <div className=\"ratingGradientWrap\">\r\n          <div className=\"ratingGradient\" style={{ background: `linear-gradient(90deg, ${gradient[0]}, ${gradient[3]}, ${gradient[5]})` }}></div>\r\n        </div>\r\n      </div>\r\n      <div className=\"close-legend-wrap mp-border-secondary mp-bg-light\" onClick={closeLegend}>\r\n        <CloseIcon fill=\"var(--dark)\" className=\"close-legend\" />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { requsetMaker } from './config'\r\n\r\nexport async function getReviews(placeId) {\r\n  const f = requsetMaker('GET', 'reviews', 'reviews', null, false, `targetId=${placeId}`)\r\n  return await f()\r\n}\r\n\r\n\r\nexport async function postInitReview(data) {\r\n  const f = requsetMaker('POST', 'reviews', 'postInitReview', { ...data }, false)\r\n  return await f()\r\n}\r\n\r\n\r\nexport async function postNextReview(data) {\r\n  const f = requsetMaker('POST', 'reviews', 'postNextReview', { ...data }, false)\r\n  return await f()\r\n}\r\n\r\n\r\nexport async function postReview(data) {\r\n  const f = requsetMaker('POST', 'reviews', 'postReview', { ...data }, false)\r\n  return await f()\r\n}\r\n\r\nexport async function postFeedback(comment) {\r\n  const f = requsetMaker('POST', 'reviews', 'postFeedback', { comment }, false)\r\n  return await f()\r\n}\r\n\r\nexport async function deleteReview(timestamp, place) {\r\n  const f = requsetMaker('DELETE', 'reviews', 'reviews', { timestamp, place }, true)\r\n  return await f()\r\n}","import { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { deleteReview, getReviews } from '../requests/reviews';\r\nimport { restrictedLetters } from '../rest/config';\r\nimport { notNaN } from '../rest/helperFuncs';\r\nimport { TEXT } from '../rest/lang';\r\nimport { expandComments, setModal, setToast, shrinkComments } from '../store/app';\r\nimport { ReactComponent as TopIcon } from '../rest/svg/top.svg'\r\n\r\nexport const Reviews = ({ feature, resetRater, updateLayers, setGeoData }) => {\r\n  const dispatch = useDispatch()\r\n  const { reviewsShown } = useSelector(state => state.app)\r\n  const userId = useSelector(state => state.user.id)\r\n\r\n  const [reviews, setReviews] = useState([])\r\n\r\n  useEffect(() => {\r\n    (async function () {\r\n      if (feature?.source !== 'ratedFeaturesSource') return setReviews([])\r\n\r\n      const res = await getReviews(feature.id)\r\n      if (res.status !== 'OK') return setToast(dispatch, { message: TEXT.requestError + ' #revEr2' });\r\n      setReviews(res.data)\r\n    })()\r\n    // Cleanup. Do we need it?\r\n    return () => {\r\n      setReviews([])\r\n    }\r\n    /* eslint-disable */\r\n  }, [feature?.source, feature?.id])\r\n  /* eslint-enable */\r\n\r\n  if (feature?.source !== 'ratedFeaturesSource') return null\r\n\r\n  function onClick() {\r\n    reviewsShown ? shrinkComments(dispatch) : expandComments(dispatch)\r\n  }\r\n\r\n  function deleteClick(e) {\r\n    const timestamp = e.target.attributes.timestamp.value\r\n    const place = {\r\n      rating: feature.properties.rating,\r\n      amount: feature.properties.amount,\r\n      grade: e.target.attributes.grade.value,\r\n      id: feature.id\r\n    }\r\n\r\n    setModal(dispatch, {\r\n      message: TEXT.removeComment + '?',\r\n      async acceptAction() {\r\n        const res = await deleteReview(timestamp, place)\r\n        if (res.status !== 'OK') return setToast(dispatch, { message: TEXT.requestError + ' revEr1' })\r\n\r\n        setGeoData(geoData => {\r\n          // Mutate geoData\r\n          for (let i = 0; i < geoData.length; i++) {\r\n            if (geoData[i].id === feature.id) {\r\n              const { amount, rating } = feature.properties\r\n              geoData[i].properties = {\r\n                ...geoData[i].properties,\r\n                rating: notNaN(+((amount * rating - place.grade) / (amount - 1)).toFixed(5)),  //toFixed - 5 numbers after point\r\n                amount: amount - 1\r\n              }\r\n              break;\r\n            }\r\n          } return geoData\r\n        })\r\n        updateLayers()\r\n        resetRater()\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n\r\n  function parseTags(text = \"\") {\r\n    if (!text || !text.includes('#')) return text\r\n\r\n    let res = []\r\n    let composingTag = \"\"\r\n    let plain = \"\"\r\n\r\n    for (let i = 0; i < text.length; i++) {\r\n      const letter = text[i]\r\n      if (plain && letter === '#') {\r\n        res.push(<span>{plain}</span>)\r\n        plain = \"\"\r\n        composingTag = '#'\r\n      }\r\n      else if (plain && i === text.length - 1) res.push(<span>{plain + letter}</span>)\r\n      else if (letter === '#') composingTag = '#'\r\n\r\n      else if (!composingTag) plain += letter\r\n      else if (restrictedLetters.includes(letter)) {\r\n        res.push(<Link to={\"/tags/item/\" + composingTag.substr(1) + letter}>\r\n          <span className=\"commentTag cursor-pointer mp-counter\">{composingTag + letter}</span>\r\n        </Link>)\r\n        composingTag = \"\"\r\n        plain += letter\r\n      } else if (i === text.length - 1) {\r\n        // last letter is in tag\r\n        res.push(<Link to={\"/tags/item/\" + composingTag.substr(1) + letter}>\r\n          <span className=\"commentTag cursor-pointer mp-counter\">{composingTag + letter}</span>\r\n        </Link>)\r\n      } else composingTag += letter\r\n    }\r\n    return <div>{res}</div>\r\n  }\r\n  return (\r\n    <div className={`reviewsContainer ${reviewsShown ? 'expanded' : 'shrinked'}`}>\r\n      {reviews.length ? reviews.map(review => {\r\n        if (!review.name) review.name = TEXT.anonimus\r\n        return (\r\n          <div className=\"reviewWrap mp-border-secondary mp-shadow-light\" key={review.author + review.timestamp}>\r\n            <Link to={\"/friends/item/\" + review.author}>\r\n              <div className=\"authorLogo mp-bg-primary\">\r\n                <span className=\"mp-dark\" title={review.login}>{String(review.name)?.[0]?.toUpperCase()}</span>\r\n              </div>\r\n            </Link>\r\n            <div className=\"reviewBody\">\r\n              <p className=\"author mp-primary\">{review.name}</p>\r\n              <div className=\"reviewDate mp-secondary\">\r\n                {new Date(review.timestamp).toLocaleDateString()}\r\n                {Boolean(review.author !== 'anonimus' && review.author === userId) &&\r\n                  <label\r\n                    onClick={deleteClick} className=\"deleteComment cursor-pointer\" timestamp={review.timestamp} grade={review.grade}\r\n                  > ✕\r\n                  </label>\r\n                }\r\n              </div>\r\n              <div className=\"reviewRating\">{review.grade}/5\r\n                <span className=\"reviewStars stars\">\r\n                  {[...Array(5)].map((star, index) => {\r\n                    index += 1;\r\n                    return (\r\n                      <span key={index + review.timestamp}\r\n                        className={index <= (review.grade) ? \"mp-accent starButton\" : \"mp-secondary starButton\"}\r\n                      >&#9733;\r\n                      </span>\r\n                    );\r\n                  })}\r\n                </span>\r\n              </div>\r\n              {Boolean(review.comment) && <div className=\"reviewComment \">{parseTags(review.comment)}</div>}\r\n            </div>\r\n          </div>\r\n        )\r\n      }) :\r\n        <div key={'whatever'}>{TEXT.noreviews}</div>\r\n      }\r\n\r\n      <div className=\"skipperContainer\">\r\n        <div className=\"skipper mp-bg-light mp-border-secondary\" >\r\n          {reviewsShown ?\r\n\r\n            <TopIcon fill=\"var(--secondary)\" className=\"nav-icon\" onClick={onClick}/>\r\n            :\r\n            <span className=\"mp-secondary\" onClick={onClick}>&#8615;</span>\r\n          }\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport mapboxgl from '!mapbox-gl'; // eslint-disable-line import/no-webpack-loader-syntax\r\nimport { MapArea } from './Map'\r\nimport { Rater } from './Rater'\r\nimport { Featurer } from './Featurer';\r\nimport { formatGeodata } from './formatGeodata'\r\nimport './Maps.css'\r\nimport { Legend } from './Legend';\r\nimport { Reviews } from './Reviews';\r\nimport { getLayoutCoords, notNaN } from '../rest/helperFuncs';\r\nimport { setMapMode, setToast, showMain } from '../store/app';\r\nimport { TEXT } from '../rest/lang';\r\nimport { postTags } from '../requests/tags';\r\nimport { postReview } from '../requests/reviews';\r\nimport { setCommentsNumber, setUserLevel } from '../store/user';\r\nimport { ReactComponent as CloseIcon } from '../rest/svg/close5.svg';\r\n\r\n\r\nexport const Main = () => {\r\n  // Store\r\n  const user = useSelector(state => state.user)\r\n  const app = useSelector(state => state.app)\r\n  const dispatch = useDispatch()\r\n\r\n  const [feature, setFeature] = useState(null);\r\n  // Featurer\r\n  const [name, setName] = useState('')\r\n  // Map\r\n  const [geoData, setGeoData] = useState(null)\r\n  const [featureTrigger, setFeatureTrigger] = useState(0);\r\n  const [mapTrigger, setMapTrigger] = useState(0);\r\n  function updateLayers() {\r\n    setFeatureTrigger(featureTrigger + 1)\r\n  }\r\n\r\n  function resetRater() {\r\n    setName('')\r\n    setFeature(null)\r\n  }\r\n\r\n  async function onSubmit(rating, comment) {\r\n    // Calculations\r\n    const [northEastest, southWestest, polyString] = formatGeodata(feature.geometry)\r\n    const tempBox = new mapboxgl.LngLatBounds(northEastest, southWestest)\r\n    const { lng, lat } = tempBox.getCenter()\r\n\r\n\r\n    // Data to store\r\n    const review = {\r\n      comment,\r\n      grade: rating,\r\n      targetId: feature.id,\r\n    }\r\n    const place = {\r\n      lng, lat,\r\n      id: feature.id,\r\n      name: feature.properties.name || \"\",\r\n      polyString\r\n    }\r\n    const { x, y } = getLayoutCoords(lng, lat, 16)\r\n    place.x = x\r\n    place.y = y\r\n\r\n    // Go out from mapMode\r\n    setMapMode(dispatch, null)\r\n\r\n    let newGeodata = [...geoData]\r\n\r\n    function resLevelHandler(res) {\r\n      console.log('%c⧭', 'color: #e5de73', res);\r\n      if (res.newLevel) {\r\n        setToast(dispatch, { status: 'complete', message: TEXT.nowYourLevel + ' ' + res.newLevel })\r\n        setUserLevel(dispatch, res.newLevel)\r\n      }\r\n      setCommentsNumber(dispatch, user.commentsn + 1)\r\n    }\r\n\r\n    // Case next review\r\n    if (feature.source === 'ratedFeaturesSource') {\r\n      const res = await postReview({\r\n        userId: user.id, review, place: { ...feature.properties, id: feature.id, polyString },\r\n        userLevel: user.level, commentsNumber: user.commentsn\r\n      })\r\n      if (res.status !== 'OK') return setToast(dispatch, { message: TEXT.requestError + ' #ppr1' })\r\n      resLevelHandler(res)\r\n\r\n      // Mutate geoData\r\n      for (let i = 0; i < newGeodata.length; i++) {\r\n        if (newGeodata[i].id === feature.id) {\r\n          const { amount, rating } = feature.properties\r\n          if (newGeodata[i].properties) newGeodata[i].properties = { ...feature.properties }\r\n          else newGeodata[i].properties = {}\r\n          newGeodata[i].properties.rating = notNaN(+((amount * rating + review.grade) / (amount + 1)).toFixed(5))  //toFixed - 5 numbers after point\r\n          newGeodata[i].properties.amount = amount + 1\r\n          break;\r\n        }\r\n      }\r\n    } else {\r\n      // Case first time\r\n\r\n      const res = await postReview({\r\n        userId: user.id, review, place, userLevel: user.level, commentsNumber: user.commentsn\r\n      })\r\n      // return;\r\n      if (res.status !== 'OK') return setToast(dispatch, { message: TEXT.requestError + ' #ppr2' })\r\n      resLevelHandler(res)\r\n\r\n      newGeodata.push({\r\n        type: 'Feature',\r\n        properties: { rating, name, amount: 1 },\r\n        id: feature.id,\r\n        // geometry: {...feature.geometry}\r\n        geometry: feature.geometry\r\n      })\r\n\r\n    }\r\n\r\n    // Common block\r\n\r\n    const tagReq = await postTags({ user: user.id, comment, placeId: feature.id })\r\n    if (tagReq.status !== 'OK') return setToast(dispatch, { message: TEXT.requestError + ' #ptg_Main_3' })\r\n\r\n    setGeoData(newGeodata)\r\n    updateLayers()\r\n\r\n    // end\r\n    if (feature.source === 'createdPoly') setMapTrigger(mapTrigger + 1)\r\n\r\n    // finally restore init features\r\n    resetRater()\r\n  }\r\n\r\n  useEffect(() => {\r\n    showMain(dispatch)\r\n    // eslint-disable-next-line\r\n  }, [])\r\n\r\n  return (\r\n    <div className={app.mapHidden ? \"hidden\" : \"mainWrapper\"}>\r\n      <MapArea\r\n        feature={feature} setFeature={setFeature}\r\n        resetRater={resetRater}\r\n        geoData={geoData} setGeoData={setGeoData}\r\n        featureTrigger={featureTrigger}\r\n        key={mapTrigger}\r\n      />\r\n      {\r\n        app.legendShown && <Legend />\r\n      }\r\n      {feature &&\r\n        <div className=\"featureContainer mp-bg-light mp-border-secondary\">\r\n          <Featurer feature={feature} name={name} setName={setName} />\r\n          <Rater feature={feature} onSubmit={onSubmit} />\r\n          <Reviews feature={feature} updateLayers={updateLayers} setGeoData={setGeoData} resetRater={resetRater} />\r\n          <div className=\"closeFeature mp-bg-light mp-dark mp-border-secondary\" onClick={resetRater} title={TEXT.close}>\r\n\r\n            <CloseIcon fill=\"var(--dark)\" className=\"close-legend\" />\r\n          </div>\r\n        </div>\r\n      }\r\n\r\n      <div className=\"bottom\"></div>\r\n    </div>\r\n  )\r\n}\r\n","import { api, requsetMaker } from './config'\r\n\r\nexport async function loginWithCreds(creds) {\r\n  const f = requsetMaker('POST', 'auth', 'login', { ...creds }, true)\r\n  return await f()\r\n}\r\n\r\nexport const refresh = requsetMaker('GET', 'auth', 'refresh', null, true)\r\n\r\nexport const logout = requsetMaker('GET', 'auth', 'logout', null, true)\r\n\r\nexport async function loginbyGoogle(creds, token) {\r\n  const options = {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': 'Bearer ' + token\r\n    },\r\n    body: JSON.stringify({ ...creds }),\r\n    credentials: 'include'\r\n  }\r\n  try {\r\n    const response = await fetch(api + 'auth/glogin', options)\r\n    const res = await response.json()\r\n    return res\r\n  } catch (err) {\r\n    return err\r\n  }\r\n}\r\n","import React from 'react'\r\n\r\nexport const Responser = ({ message = '', setMessage, color = 'accent', title = '' }) => {\r\n  function onClick() {\r\n    setMessage('')\r\n  }\r\n\r\n  if (!message) return null\r\n\r\n  const cn = `responser mp-${color} mp-border-${color}`\r\n\r\n  return (\r\n    <div className={cn}>\r\n      <div className=\"header\">\r\n        <h6>{title}</h6>\r\n        <div className={`close-cross cursor-pointer mp-${color}`} onClick={onClick}>&#10006;</div>\r\n      \r\n      </div>\r\n      <p>{message}</p>\r\n    </div>\r\n  )\r\n}\r\n","import { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Link, useHistory, useLocation } from 'react-router-dom';\r\nimport { loginbyGoogle, loginWithCreds, logout } from '../requests/auth';\r\nimport { googleCreds } from '../rest/config';\r\nimport { TEXT } from '../rest/lang';\r\nimport { Responser } from '../rest/Responser';\r\nimport { closeModal, setToast } from '../store/app';\r\nimport { logIntoApp, logOutOfApp } from '../store/user';\r\nimport { getFriendsInfo } from '../rest/helperFuncs'\r\n\r\nexport const Login = () => {\r\n  const dispatch = useDispatch()\r\n  const history = useHistory()\r\n  const user = useSelector(state => state.user)\r\n  const app = useSelector(state => state.app)\r\n  const loc = useLocation().pathname\r\n\r\n  const [login, setLogin] = useState('')\r\n  const [pword, setPword] = useState('')\r\n  const [msg, setMsg] = useState('')\r\n\r\n  useEffect(() => {\r\n    const { gapi } = window\r\n    if (!gapi) return setToast(dispatch, {\r\n      message: TEXT.networkError\r\n    })\r\n\r\n    gapi.load('auth2', () => {\r\n      gapi.auth2.init().then((auth) => {\r\n        auth.signOut().then(() => {\r\n          gapi.signin2.render('google-signin-button', {\r\n            width: 200,\r\n            height: 32,\r\n            longtitle: true,\r\n            onsuccess: onOAuth,\r\n            onfailure: onFail,\r\n            theme: (app.theme === 'dark' || app.theme === 'blueprint') ? 'dark' : 'white'\r\n          });\r\n        });\r\n      });\r\n\r\n    });\r\n    // eslint-disable-next-line\r\n  }, [])\r\n\r\n\r\n  function onInput(e) {\r\n    setLogin(e.target.value)\r\n  }\r\n  function onPword(e) {\r\n    setPword(e.target.value)\r\n  }\r\n  async function onSubmit() {\r\n    setMsg(TEXT.loading + '...')\r\n    const res = await loginWithCreds({ login, pword })\r\n    if (res.status === 'WRONG') {\r\n      return setMsg(TEXT.wrongAuth)\r\n    }\r\n    if (res.status === 'OK') {\r\n      closeModal(dispatch)\r\n      setToast(dispatch, {\r\n        message: TEXT.greetings + ', ' + res.data.name,\r\n        status: 'complete',\r\n        title: null\r\n      })\r\n      setMsg('')\r\n      await getFriendsInfo(dispatch)\r\n      history.push('/')\r\n      return logIntoApp(dispatch, res.data)\r\n    }\r\n    setMsg(TEXT.errorReg + ', ' + TEXT.errCode + ': ' + (res.msg || res))\r\n\r\n    // window.localStorage.setItem('usernameTemp', login)\r\n  }\r\n  async function logOut() {\r\n    const res = await logout()\r\n    if (res.status === 'OK') {\r\n      setToast(dispatch, {\r\n        message: TEXT.farewell + ', ' + user.name,\r\n        status: 'complete',\r\n        title: null\r\n      })\r\n      setLogin('')\r\n      setPword('')\r\n      setMsg('')\r\n      return logOutOfApp(dispatch)\r\n    }\r\n    setMsg(TEXT.errorReg + ', ' + TEXT.errCode + ': ' + (res.msg || res))\r\n  }\r\n\r\n\r\n  async function onOAuth(googleUser) {\r\n    var profile = googleUser.getBasicProfile();\r\n    // console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.\r\n    // console.log('Name: ' + profile.getName());\r\n    // console.log('Image URL: ' + profile.getImageUrl());\r\n    // console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.\r\n    const data = {\r\n      name: profile.getName(),\r\n      avatar: profile.getImageUrl(),\r\n      gmail: profile.getEmail()\r\n    }\r\n    const res = await loginbyGoogle(data, googleUser.getAuthResponse().id_token)\r\n\r\n    if (res.status === 'FIRSTTIME') {\r\n      googleCreds.token = googleUser.getAuthResponse().id_token\r\n      googleCreds.name = res.data.name\r\n      googleCreds.login = res.data.login\r\n      if (!res.data.login) googleCreds.occupiedLogin = profile.getEmail().split('@')[0]\r\n      googleCreds.avatar = res.data.avatar\r\n      googleCreds.id = profile.getId()\r\n      closeModal(dispatch)\r\n      return history.push('/googleConfirm')\r\n    }\r\n    if (res.status === 'OK') {\r\n      closeModal(dispatch)\r\n      setToast(dispatch, {\r\n        message: TEXT.greetings + ', ' + res.data.name,\r\n        status: 'complete',\r\n        title: null\r\n      })\r\n      setMsg('')\r\n      await getFriendsInfo(dispatch)\r\n      history.push('/')\r\n      return logIntoApp(dispatch, res.data)\r\n    }\r\n    setMsg(TEXT.errorReg + ', ' + TEXT.errCode + ': ' + (res.msg || res))\r\n  }\r\n  function onFail(a) {\r\n    console.log('%c⧭ failed', 'color: #00a3cc', a);\r\n    setMsg(TEXT.errorReg + ', ' + TEXT.errCode + ': ' + JSON.stringify(a))\r\n  }\r\n\r\n  function onInitReg() {\r\n    closeModal(dispatch)\r\n  }\r\n\r\n  return (\r\n    <div>{\r\n      app.isLogged ? <div>\r\n        <h4>{TEXT.greetings}, {user.name}</h4>\r\n\r\n        <button className=\"primary\" onClick={logOut}>{TEXT.logout}</button>\r\n      </div>\r\n        :\r\n        <div>\r\n          <div className={loc !== '/auth' ? 'login-form login-form-bordered mp-border-secondary' : 'login-form'}>\r\n            <label htmlFor=\"name\">{TEXT.yourLogin}:</label>\r\n            <input type=\"text\" name=\"login\" value={login} onInput={onInput} autoFocus />\r\n            <br />\r\n            <label htmlFor=\"pword\">{TEXT.yourPword}:</label>\r\n            <input type=\"password\" name=\"pword\" value={pword} onInput={onPword} />\r\n\r\n            <Responser message={msg} setMessage={setMsg} />\r\n\r\n            <button className=\"primary mp-border-accent loginBtn\" onClick={onSubmit}>{TEXT.confirm}</button>\r\n            {/* <button className=\"mp-border-secondary oauthBtn\" onClick={oauth}>{'Google'}</button> */}\r\n            <div id=\"google-signin-button\"\r\n              className=\"google-signin-button g-signin2 google-oauthBtn\" data-onsuccess=\"onSignIn\"></div>\r\n          </div>\r\n          {loc !== '/auth' &&\r\n            <div className=\"align-center\">\r\n              <Link to=\"/auth?reg=true\" onClick={onInitReg}>\r\n                <button className=\"button\">{TEXT.register}</button>\r\n              </Link>\r\n            </div>}\r\n\r\n        </div>\r\n    }\r\n    </div>\r\n  )\r\n}\r\n","import { requsetMaker } from \"./config\"\r\n\r\nexport async function registerUser(data) {\r\n  const f = requsetMaker('POST', 'users', 'register', { ...data }, true)\r\n  return await f()\r\n}\r\n\r\nexport async function registerGUser(data) {\r\n  const f = requsetMaker('POST', 'users', 'gregister', { ...data }, true)\r\n  return await f()\r\n}\r\n\r\nexport async function updateUser(data) {\r\n  const f = requsetMaker('POST', 'users', 'update', { ...data }, true)\r\n  return await f()\r\n}\r\n\r\nexport async function updateUserPword(data) {\r\n  const f = requsetMaker('POST', 'users', 'updatePword', { ...data }, true)\r\n  return await f()\r\n}\r\n\r\nexport async function setLanguage(lang) {\r\n  const f = requsetMaker('GET', 'settings', 'setLang', null, true, 'lang=' + lang)\r\n  return await f()\r\n}\r\n","import { useRef, useState } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { registerUser } from '../requests/users'\r\nimport { TEXT } from '../rest/lang'\r\nimport { Responser } from '../rest/Responser'\r\nimport { logIntoApp } from '../store/user'\r\nconst initCreds = { login: '', pword: '', name: '', question: TEXT.secretExample, answer: '' }\r\n\r\nexport const Register = () => {\r\n  const dispatch = useDispatch()\r\n  const history = useHistory()\r\n\r\n  const [creds, setCreds] = useState(initCreds)\r\n  const [msg, setMsg] = useState('')\r\n  const ref = useRef(null)\r\n  const [replica, setReplica] = useState(false);\r\n\r\n  function onInput(e) {\r\n    setCreds({ ...creds, [e.target.name]: e.target.value })\r\n  }\r\n  function onReplica() {\r\n    setReplica(false)\r\n    setMsg(TEXT.secretReplica2)\r\n    ref.current.focus()\r\n  }\r\n\r\n  async function onSubmit() {\r\n    if (!creds.login || !creds.pword) return setMsg(TEXT.fillRequiredFields)\r\n    if (creds.question && !creds.answer) {\r\n      if (creds.question === TEXT.secretExample) setReplica(true)\r\n      ref.current.focus()\r\n      return setMsg(TEXT.secretValidation)\r\n    }\r\n\r\n    // Validation\r\n    if (creds.question?.length > 300) return setMsg((TEXT.field + ' ' + TEXT.secretQuestion + ' ' + TEXT.tooLong).toLocaleLowerCase().capitalize())\r\n    if (creds.answer?.length > 255) return setMsg((TEXT.field + ' ' + TEXT.secterAnswer + ' ' + TEXT.tooLong).toLocaleLowerCase().capitalize())\r\n    if (creds.login.length > 50) return setMsg((TEXT.field + ' ' + TEXT.login + ' ' + TEXT.tooLong).toLocaleLowerCase().capitalize())\r\n    if (creds.pword.length > 50) return setMsg((TEXT.field + ' ' + TEXT.password + ' ' + TEXT.tooLong).toLocaleLowerCase().capitalize())\r\n    if (creds.name.length > 140) return setMsg((TEXT.field + ' ' + TEXT.userName + ' ' + TEXT.tooLong).toLocaleLowerCase().capitalize())\r\n\r\n\r\n    const res = await registerUser(creds)\r\n    console.log('%c⧭', 'color: #86bf60', creds, res);\r\n    if (res.status === 'OK') {\r\n      setMsg(TEXT.successfullReg)\r\n      logIntoApp(dispatch, res.data)\r\n      setCreds(initCreds)\r\n      history.push('/')\r\n    }\r\n    else if (res.status === 'EXISTING') {\r\n      return setMsg(TEXT.loginOccupied + ' - ' + creds.login)\r\n    }\r\n    else if (res.status === 'BANEDPWORD') {\r\n      return setMsg(TEXT.bannedPwod + ' - ' + creds.pword)\r\n    }\r\n    else {\r\n      setMsg(TEXT.errorReg + ', ' + TEXT.errCode + ': ' + (res.msg || res))\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"register-form\">\r\n        <h4>{TEXT.register}</h4>\r\n        <label htmlFor=\"login\">{TEXT.login}:</label>\r\n        <input type=\"text\" name=\"login\" value={creds.login} onInput={onInput} autoFocus required />\r\n        <br />\r\n        <label htmlFor=\"name\">{TEXT.userName}:</label>\r\n        <input type=\"text\" name=\"name\" value={creds.name} onInput={onInput} required />\r\n        <br />\r\n        <label htmlFor=\"pword\">{TEXT.password}:</label>\r\n        <input type=\"password\" name=\"pword\" value={creds.pword} onInput={onInput} required />\r\n        <br />\r\n        <br />\r\n        <label htmlFor=\"question\">{TEXT.secretQuestion}:</label>\r\n        <br />\r\n        <textarea type=\"text\" name=\"question\" value={creds.question} onInput={onInput} autoComplete=\"false\"/>\r\n        <p className=\"little-hint\">{TEXT.secretHint}</p>\r\n\r\n        <label htmlFor=\"answer\">{TEXT.secterAnswer}:</label>\r\n        <input type=\"text\" name=\"answer\" value={creds.answer} onInput={onInput} required={Boolean(creds.question)} ref={ref} autoComplete=\"false\" />\r\n        <div className=\"register-responser\">\r\n          <Responser message={msg} setMessage={setMsg} />\r\n        </div>\r\n        {replica &&\r\n          <button className=\"btn-replica mp-border-counter mp-primary-hover\" onClick={onReplica}>{TEXT.secretReplica}</button>}\r\n        <button className=\"mp-border-accent\" type=\"button\" onClick={onSubmit}>{TEXT.submit}</button>\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}\r\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgProfile(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"edit\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M14.793 11.793a1 1 0 0 1 1.414 1.414l-7.5 7.5A1 1 0 0 1 8 21H4a1 1 0 0 1-1-1v-4a1 1 0 0 1 .293-.707l13-13a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1 0 1.414l-3 3a1 1 0 0 1-1.414 0l-2-2a1 1 0 1 1 1.414-1.414L18 8.586 19.586 7 17 4.414l-12 12V19h2.586l7.207-7.207z\",\n    fill: \"current\",\n    fillRule: \"nonzero\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgProfile);\nexport default __webpack_public_path__ + \"static/media/profile.bfe367c6.svg\";\nexport { ForwardRef as ReactComponent };","import { useState } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { useEffect } from \"react\";\r\nimport { hideMain } from \"../store/app\";\r\nimport { TEXT } from '../rest/lang'\r\nimport { Login } from './Login'\r\nimport { Register } from './Register'\r\nimport './Auth.css'\r\nimport { useLocation } from 'react-router-dom';\r\n\r\nexport const AuthMain = () => {\r\n  const dispatch = useDispatch()\r\n  const reg = new URLSearchParams(useLocation().search).get('reg')\r\n  \r\n  const [isLogging, setIsLogging] = useState(true)\r\n  \r\n  useEffect(() => {\r\n    hideMain(dispatch)    \r\n    if (reg) setIsLogging(false)\r\n    // eslint-disable-next-line\r\n  }, [])\r\n  \r\n  return (\r\n    <div className=\"auth-container relative\">\r\n      <div className=\"absolute center auth-subcontainer\">\r\n\r\n      {isLogging ? <h3 className=\"align-center\">{TEXT.login}</h3> : null}\r\n      {/* TODO uptop label is good when form is borderless, else put header inside borders like in reg component */}\r\n\r\n        <div className=\"auth-action-wrap mp-border-secondary\">\r\n          {isLogging ? <Login /> : <Register />}\r\n        </div>\r\n        <div className=\"align-center\">\r\n          {!isLogging ?\r\n            <button className=\"small\" onClick={() => setIsLogging(true)}>{TEXT.login}</button> :\r\n            <button className=\"small\" onClick={() => setIsLogging(false)}>{TEXT.register}</button>\r\n          }\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"bottom\"></div>\r\n    </div>\r\n  )\r\n}\r\n/* eslint-disable */\r\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLogin(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 1024 1024\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M532.528 661.408c-12.512 12.496-12.513 32.752-.001 45.248 6.256 6.256 14.432 9.376 22.624 9.376s16.368-3.12 22.624-9.376l189.008-194L577.775 318.64c-12.496-12.496-32.752-12.496-45.248 0-12.512 12.496-12.512 32.752 0 45.248l115.744 115.76H31.839c-17.68 0-32 14.336-32 32s14.32 32 32 32h618.448zM960.159 0h-576c-35.36 0-64.017 28.656-64.017 64v288h64.432V103.024c0-21.376 17.344-38.72 38.72-38.72h496.704c21.408 0 38.72 17.344 38.72 38.72l1.007 818.288c0 21.376-17.311 38.72-38.72 38.72H423.31c-21.376 0-38.72-17.344-38.72-38.72V670.944l-64.432.08V960c0 35.344 28.656 64 64.017 64h576c35.344 0 64-28.656 64-64V64c-.016-35.344-28.672-64-64.016-64z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLogin);\nexport default __webpack_public_path__ + \"static/media/login.28d9e439.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgTheme(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    fill: \"current\",\n    enableBackground: \"new 0 0 30 30\",\n    height: \"30px\",\n    id: \"square_icons\",\n    viewBox: \"0 0 30 30\",\n    width: \"30px\",\n    xmlSpace: \"preserve\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    clipRule: \"evenodd\",\n    d: \"M15,0.1C6.8,0.1,0.1,6.8,0.1,15c0,8.2,6.7,14.9,14.9,14.9  S29.9,23.2,29.9,15C29.9,6.8,23.2,0.1,15,0.1z M15,26.9C8.4,26.9,3.1,21.6,3.1,15C3.1,8.4,8.4,3.1,15,3.1c6.6,0,11.9,5.3,11.9,11.9  C26.9,21.6,21.6,26.9,15,26.9z M16,6.1c0,9.5,0,8.6,0,17.9c3.2,0,8-4,8-8.9C23.9,10.1,19.9,6.1,16,6.1z\",\n    fillRule: \"evenodd\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgTheme);\nexport default __webpack_public_path__ + \"static/media/theme.da164d7a.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLanguage(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 48,\n    height: 48,\n    viewBox: \"0 0 48 48\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 0h48v48H0z\",\n    fill: \"none\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M25.74 30.15l-5.08-5.02.06-.06c3.48-3.88 5.96-8.34 7.42-13.06H34V8H20V4h-4v4H2v3.98h22.34C22.99 15.84 20.88 19.5 18 22.7c-1.86-2.07-3.4-4.32-4.62-6.7h-4c1.46 3.26 3.46 6.34 5.96 9.12L5.17 35.17 8 38l10-10 6.22 6.22 1.52-4.07zM37 20h-4l-9 24h4l2.25-6h9.5L42 44h4l-9-24zm-5.25 14L35 25.33 38.25 34h-6.5z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLanguage);\nexport default __webpack_public_path__ + \"static/media/language.56fb4521.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgFriends(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 16 16\",\n    className: \"bi bi-people\",\n    fill: \"currentColor\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M15 14s1 0 1-1-1-4-5-4-5 3-5 4 1 1 1 1h8zm-7.978-1h7.956a.274.274 0 0 0 .014-.002l.008-.002c-.002-.264-.167-1.03-.76-1.72C13.688 10.629 12.718 10 11 10c-1.717 0-2.687.63-3.24 1.276-.593.69-.759 1.457-.76 1.72a1.05 1.05 0 0 0 .022.004zM11 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm3-2a3 3 0 1 1-6 0 3 3 0 0 1 6 0zM6.936 9.28a5.88 5.88 0 0 0-1.23-.247A7.35 7.35 0 0 0 5 9c-4 0-5 3-5 4 0 .667.333 1 1 1h4.216A2.238 2.238 0 0 1 5 13c0-1.01.377-2.042 1.09-2.904.243-.294.526-.569.846-.816zM4.92 10c-1.668.02-2.615.64-3.16 1.276C1.163 11.97 1 12.739 1 13h3c0-1.045.323-2.086.92-3zM1.5 5.5a3 3 0 1 1 6 0 3 3 0 0 1-6 0zm3-2a2 2 0 1 0 0 4 2 2 0 0 0 0-4z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgFriends);\nexport default __webpack_public_path__ + \"static/media/friends.25aca8e6.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgTag(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Layer_1\",\n    style: {\n      enableBackground: \"new 0 0 30 30\"\n    },\n    viewBox: \"0 0 30 30\",\n    xmlSpace: \"preserve\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M23,3h-6c-0.512,0-1.024,0.195-1.414,0.586l-12,12c-0.781,0.781-0.781,2.047,0,2.828l8,8c0.781,0.781,2.047,0.781,2.828,0  c0.391-0.391,11.609-11.609,12-12C26.805,14.024,27,13.512,27,13V7C27,4.791,25.209,3,23,3z M23,9c-1.105,0-2-0.895-2-2  c0-1.105,0.895-2,2-2s2,0.895,2,2C25,8.105,24.105,9,23,9z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgTag);\nexport default __webpack_public_path__ + \"static/media/tag.a21b21b9.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgRoute(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"trip-route-travel-dot-connection-relationship\",\n    style: {\n      enableBackground: \"new 0 0 15 13\"\n    },\n    viewBox: \"0 0 15 13\",\n    xmlSpace: \"preserve\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13.5,10c-0.651,0-1.201,0.419-1.408,1H3c-1.103,0-2-0.897-2-2s0.897-2,2-2h9c1.654,0,3-1.346,3-3s-1.346-3-3-3H2.908  C2.701,0.419,2.151,0,1.5,0C0.673,0,0,0.673,0,1.5S0.673,3,1.5,3c0.651,0,1.201-0.419,1.408-1H12c1.103,0,2,0.897,2,2s-0.897,2-2,2  H3C1.346,6,0,7.346,0,9s1.346,3,3,3h9.092c0.207,0.581,0.757,1,1.408,1c0.827,0,1.5-0.673,1.5-1.5S14.327,10,13.5,10z M1.5,2  C1.224,2,1,1.776,1,1.5S1.224,1,1.5,1S2,1.224,2,1.5S1.776,2,1.5,2z M13.5,12c-0.276,0-0.5-0.224-0.5-0.5s0.224-0.5,0.5-0.5  s0.5,0.224,0.5,0.5S13.776,12,13.5,12z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgRoute);\nexport default __webpack_public_path__ + \"static/media/route.bc72c1bb.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgAbout(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"info\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 12a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0-2a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm8 2a8 8 0 1 0-16 0c0 3.092 1.708 5.77 4.438 7.101a1 1 0 0 1-.876 1.798C4.15 19.236 2 15.864 2 12 2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10a1 1 0 0 1-1-1v-7.001a1 1 0 1 1 2 0v5.94A8.001 8.001 0 0 0 20 12z\",\n    fill: \"current\",\n    fillRule: \"nonzero\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgAbout);\nexport default __webpack_public_path__ + \"static/media/about.df681513.svg\";\nexport { ForwardRef as ReactComponent };","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgBack2(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    fill: \"current\",\n    baseProfile: \"tiny\",\n    height: \"24px\",\n    id: \"Layer_1\",\n    viewBox: \"0 0 24 24\",\n    width: \"24px\",\n    xmlSpace: \"preserve\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M19.164,19.547c-1.641-2.5-3.669-3.285-6.164-3.484v1.437c0,0.534-0.208,1.036-0.586,1.414   c-0.756,0.756-2.077,0.751-2.823,0.005l-6.293-6.207C3.107,12.523,3,12.268,3,11.999s0.107-0.524,0.298-0.712l6.288-6.203   c0.754-0.755,2.073-0.756,2.829,0.001C12.792,5.463,13,5.965,13,6.499v1.704c4.619,0.933,8,4.997,8,9.796v1   c0,0.442-0.29,0.832-0.714,0.958c-0.095,0.027-0.19,0.042-0.286,0.042C19.669,19.999,19.354,19.834,19.164,19.547z M12.023,14.011   c2.207,0.056,4.638,0.394,6.758,2.121c-0.768-3.216-3.477-5.702-6.893-6.08C11.384,9.996,11,10,11,10V6.503l-5.576,5.496l5.576,5.5   V14C11,14,11.738,14.01,12.023,14.011z\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgBack2);\nexport default __webpack_public_path__ + \"static/media/back2.7c0d3aac.svg\";\nexport { ForwardRef as ReactComponent };","import { useSelector } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport { TEXT } from '../../rest/lang'\r\nimport { navStates } from '../LeftMenu'\r\n// icons\r\nimport { ReactComponent as ProfileIcon } from '../../rest/svg/profile.svg'\r\nimport { ReactComponent as LoginIcon } from '../../rest/svg/login.svg'\r\nimport { ReactComponent as ThemeIcon } from '../../rest/svg/theme.svg'\r\nimport { ReactComponent as LangIcon } from '../../rest/svg/language.svg'\r\nimport { ReactComponent as FriendsIcon } from '../../rest/svg/friends.svg'\r\nimport { ReactComponent as TagIcon } from '../../rest/svg/tag.svg'\r\nimport { ReactComponent as RouteIcon } from '../../rest/svg/route.svg'\r\nimport { ReactComponent as AboutIcon } from '../../rest/svg/about.svg'\r\n\r\nexport const DefNav = ({ setNavState, hideSelf }) => {\r\n\r\n  const user = useSelector(state => state.user)\r\n  const app = useSelector(state => state.app)\r\n\r\n  function hideMainMenu() {\r\n    hideSelf()\r\n  }\r\n  function pickTheme() {\r\n    setNavState(navStates.theme)\r\n  }\r\n  function pickLang() {\r\n    setNavState(navStates.language)\r\n  }\r\n\r\n\r\n  return (\r\n    <div className=\"left-menu-container\">\r\n\r\n      <div className=\"menu-user\">\r\n        <div className=\"menu-avatar mp-bg-counter\">\r\n          <div className=\"letter mp-light\">{user.name?.[0] || \"?\"}</div>\r\n        </div>\r\n        <div className=\"menu-user-subcontainer\">\r\n          <div className=\"menu-username\">{user.name || 'no name'}</div>\r\n          <div className=\"menu-userlevel\">{TEXT.level}: <span className=\"mp-accent\">{user.level}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"menu-items-container\">\r\n        <div>\r\n          {app.isLogged ?\r\n            <Link to=\"/editProfile\" onClick={hideMainMenu} className=\"left-menu-item mp-accent-hover pick-theme-item\">\r\n              <ProfileIcon fill=\"var(--dark)\" className=\"navIcon\" />\r\n              <span className=\"menu-text\">{TEXT.profile}</span>\r\n            </Link> :\r\n            <Link to=\"/auth\" onClick={hideMainMenu} className=\"left-menu-item mp-accent-hover pick-theme-item\">\r\n              <LoginIcon fill=\"var(--dark)\" className=\"navIcon\" />\r\n              <span className=\"menu-text\">{TEXT.login}</span>\r\n            </Link>\r\n          }\r\n        </div>\r\n\r\n        <div onClick={pickTheme} className=\"left-menu-item mp-accent-hover pick-theme-item\">\r\n          <ThemeIcon fill=\"var(--dark)\" className=\"navIcon\" />\r\n          <span className=\"menu-text\">{TEXT.theme}</span>\r\n          <label className=\"little-hint\">({TEXT[app.theme]})</label>\r\n        </div>\r\n\r\n        <div onClick={pickLang} className=\"left-menu-item mp-accent-hover pick-theme-item\">\r\n          <LangIcon fill=\"var(--dark)\" className=\"navIcon\" />\r\n          <span className=\"menu-text\">{TEXT.language}</span>\r\n        </div>\r\n\r\n        <Link to=\"/friends\" onClick={hideMainMenu} className=\"left-menu-item mp-accent-hover pick-theme-item\">\r\n          <FriendsIcon fill=\"var(--dark)\" className=\"navIcon\" />\r\n          <span className=\"menu-text\">{TEXT.friends}</span>\r\n          {Boolean(user.requests.length) &&\r\n            <span className=\"mp-accent\">{' (' + user.requests.length + ')'}</span>\r\n          }\r\n        </Link>\r\n\r\n        <Link to=\"/tags\" className=\"left-menu-item mp-accent-hover pick-theme-item\" onClick={hideMainMenu}>\r\n          <TagIcon fill=\"var(--dark)\" className=\"navIcon\" />\r\n          <span className=\"menu-text\">{TEXT.tags}</span>\r\n        </Link>\r\n\r\n        <div className=\"readonly\">\r\n          <RouteIcon fill=\"var(--dark)\" className=\"navIcon\" />\r\n          <span className=\"menu-text\">{TEXT.routes}</span>\r\n        </div>\r\n\r\n        <Link to=\"/about\" className=\"left-menu-item mp-accent-hover pick-theme-item\" onClick={hideMainMenu}>\r\n          <AboutIcon fill=\"var(--dark)\" className=\"navIcon\" />\r\n          <span className=\"menu-text\">{TEXT.aboutUs}</span>\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { useEffect, useState } from 'react'\r\nimport { useDispatch } from 'react-redux';\r\nimport { setLanguage } from '../../requests/users';\r\nimport { appLanguages } from '../../rest/config';\r\nimport { TEXT } from '../../rest/lang';\r\nimport { setToast } from '../../store/app';\r\nimport { navStates } from '../LeftMenu';\r\nimport { ReactComponent as BackIcon } from '../../rest/svg/back2.svg';\r\n\r\nexport const LangNav = ({ setNavState }) => {\r\n  const d = useDispatch()\r\n\r\n  const [lang, setLang] = useState();\r\n\r\n  async function onClick(e) {\r\n    const lang = e.target.attributes.name.value\r\n    const res = await setLanguage(lang)\r\n    if (res.status === 'OK') return window.location.reload();\r\n    setToast(d, {\r\n      message: JSON.stringify(res),\r\n      title: TEXT.error,\r\n      status: 'error',\r\n    })\r\n  }\r\n\r\n  useEffect(() => {\r\n    setLang(document.documentElement.lang)\r\n    console.log('%c⧭', 'color: #7f7700', document.documentElement.lang);\r\n  }, [])\r\n\r\n  function onBack() {\r\n    setNavState(navStates.default)\r\n  }\r\n\r\n  return (\r\n    <div className=\"left-menu-container lang-nav\">\r\n\r\n      {/* Avatar area */}\r\n      <div className=\"menu-user theme-menu\">\r\n        <div onClick={onBack} className=\"\r\n          back-icon-container cursor-pointer \r\n          transition\"\r\n        >\r\n          <BackIcon fill=\"var(--accent)\" className=\"nav-icon\"/>\r\n        </div>\r\n        <div className=\"menu-user-subcontainer\">\r\n          <div className=\"menu-username\">{TEXT.pickLanguage}</div>\r\n          <div className=\"menu-userlevel\">{TEXT.language}: <span className=\"mp-accent\">{TEXT[lang]}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"pickTheme-container\">\r\n        {Object.keys(appLanguages).map((lng, i) => {\r\n          return (\r\n            <div\r\n              className={`\r\n              pickTheme-item mp-border-secondary mp-counter-hover transition-small\r\n              ${lng === lang ? ' current-theme mp-accent mp-border-accent events-none' : ''}\r\n              `}\r\n              name={lng}\r\n              onClick={onClick}\r\n              key={lng + i}\r\n            >\r\n              {TEXT[lng]}\r\n            </div>\r\n          )\r\n        })}\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}\r\n","import { projectPrefix } from \"../rest/config\";\r\n\r\nexport function getPreferences() {\r\n  const prefs = window.localStorage.getItem(projectPrefix + '/preferences')\r\n  if (prefs) return JSON.parse(prefs)\r\n  return null\r\n}\r\n\r\nexport function initLocalStorage() {\r\n  if (!getPreferences()) window.localStorage.setItem(projectPrefix + '/preferences', '{}')\r\n}\r\n\r\nexport function setPreference(preference, value) {\r\n  const prefs = getPreferences()\r\n  prefs[preference] = value\r\n  window.localStorage.setItem(projectPrefix + '/preferences', JSON.stringify(prefs))\r\n}","import { useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { setColors } from '../../rest/colors';\r\nimport { appThemes } from '../../rest/config';\r\nimport { TEXT } from '../../rest/lang';\r\nimport { switchTheme } from '../../store/app';\r\nimport { setPreference } from '../../store/localstorage';\r\nimport { navStates } from '../LeftMenu';\r\nimport { ReactComponent as BackIcon } from '../../rest/svg/back2.svg';\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nexport const ThemeNav = ({ setNavState, hideSelf }) => {\r\n  const app = useSelector(state => state.app)\r\n  const dispatch = useDispatch()\r\n  const history = useHistory()\r\n\r\n  const [themeN, setThemeN] = useState(appThemes.indexOf(app.theme));\r\n\r\n  function onClick(e) {\r\n    const themeNumber = e.target.attributes.name.value\r\n    setThemeN(themeNumber)\r\n    switchTheme(dispatch, appThemes[themeNumber])\r\n    setColors(appThemes[themeNumber])\r\n    setPreference('theme', appThemes[themeNumber])\r\n    hideSelf()\r\n    history.push('/')\r\n  }\r\n  function onBack() {\r\n    setNavState(navStates.default)\r\n  }\r\n\r\n  return (\r\n    <div className=\"left-menu-container\">\r\n\r\n      {/* Avatar area */}\r\n      <div className=\"menu-user theme-menu\">\r\n        <div onClick={onBack} className=\"\r\n          back-icon-container cursor-pointer \r\n          transition\"\r\n        >\r\n          <BackIcon fill=\"var(--accent)\" className=\"nav-icon\"/>\r\n        </div>\r\n        <div className=\"menu-user-subcontainer\">\r\n          <div className=\"menu-username\">{TEXT.pickTheme}</div>\r\n          <div className=\"menu-userlevel\">{TEXT.theme}: <span className=\"mp-accent\">{TEXT[appThemes[themeN]]}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"pickTheme-container\">\r\n        {appThemes.map((theme, i) => {\r\n          return (\r\n            <div\r\n              className={`\r\n              pickTheme-item ${theme}-theme mp-border-secondary mp-counter-hover transition-small\r\n              ${+i === +themeN ? ' current-theme mp-accent mp-border-accent events-none' : ''}\r\n              `}\r\n              name={i}\r\n              onClick={onClick}\r\n              key={theme + String(themeN)}\r\n            >\r\n              {TEXT[theme]}\r\n            </div>\r\n          )\r\n        })}\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}\r\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgClose3(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    enableBackground: \"new 0 0 128 128\",\n    height: \"128px\",\n    id: \"Layer_1\",\n    viewBox: \"0 0 128 128\",\n    width: \"128px\",\n    xmlSpace: \"preserve\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M81.646,64l22.248-22.249c3.48-3.48,3.474-9.131-0.019-12.623l-5.006-5.005  c-3.489-3.49-9.142-3.499-12.622-0.019L64,46.354L41.753,24.106c-3.484-3.483-9.133-3.472-12.624,0.018l-5.005,5.005  c-3.491,3.492-3.501,9.14-0.018,12.623L46.354,64L24.108,86.246c-3.483,3.484-3.472,9.133,0.018,12.623l5.005,5.006  c3.492,3.492,9.14,3.502,12.623,0.018L64,81.647l22.247,22.246c3.48,3.481,9.131,3.475,12.622-0.019l5.006-5.006  c3.489-3.489,3.498-9.142,0.019-12.622L81.646,64z\",\n    fill: \"current\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgClose3);\nexport default __webpack_public_path__ + \"static/media/close3.49ea1194.svg\";\nexport { ForwardRef as ReactComponent };","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgHamburger(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    fill: \"current\",\n    enableBackground: \"new 0 0 26 26\",\n    viewBox: \"0 0 26 26\",\n    xmlSpace: \"preserve\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M24.25,12.25H1.75C1.3359375,12.25,1,12.5859375,1,13s0.3359375,0.75,0.75,0.75h22.5   c0.4140625,0,0.75-0.3359375,0.75-0.75S24.6640625,12.25,24.25,12.25z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1.75,7.75h22.5C24.6640625,7.75,25,7.4140625,25,7s-0.3359375-0.75-0.75-0.75H1.75   C1.3359375,6.25,1,6.5859375,1,7S1.3359375,7.75,1.75,7.75z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M24.25,18.25H1.75C1.3359375,18.25,1,18.5859375,1,19s0.3359375,0.75,0.75,0.75h22.5   c0.4140625,0,0.75-0.3359375,0.75-0.75S24.6640625,18.25,24.25,18.25z\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgHamburger);\nexport default __webpack_public_path__ + \"static/media/hamburger.64800f2d.svg\";\nexport { ForwardRef as ReactComponent };","import { useState } from \"react\"\r\nimport { DefNav } from \"./left/DefNav\"\r\nimport { LangNav } from \"./left/LangNav\"\r\nimport { ThemeNav } from \"./left/ThemeNav\"\r\nimport { ReactComponent as CloseIcon } from '../rest/svg/close3.svg';\r\nimport { TEXT } from \"../rest/lang\";\r\nexport const navStates = { default: 'default', theme: 'theme', language: 'language' }\r\n\r\nexport const LeftMenu = ({ leftMenu, setLeftMenu }) => {\r\n  const [navState, setNavState] = useState(navStates.default) // also 'theme' and 'language'\r\n\r\n  function hideSelf() {\r\n    setLeftMenu(false)\r\n  }\r\n\r\n  const cn = \"mp-bg-light mp-border-secondary\"\r\n\r\n  return (\r\n    <div id=\"left-menu\" className={leftMenu ? \"active \" + cn : cn}>\r\n\r\n      {navState === navStates.default && <DefNav hideSelf={hideSelf} setNavState={setNavState} />}\r\n      {navState === navStates.theme && <ThemeNav hideSelf={hideSelf} setNavState={setNavState} />}\r\n      {navState === navStates.language && <LangNav setNavState={setNavState} />}\r\n\r\n      <div id=\"closeLeftAtBottom\" onClick={hideSelf} className=\"cursor-pointer\" title={TEXT.close}>\r\n        <CloseIcon fill=\"var(--dark)\" className=\"nav-icon\" />\r\n        <CloseIcon fill=\"var(--dark)\" className=\"nav-icon\" />\r\n        <CloseIcon fill=\"var(--dark)\" className=\"nav-icon\" />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgWorld2(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    fill: \"current\",\n    enableBackground: \"new 0 0 800 800\",\n    id: \"Layer_1\",\n    viewBox: \"0 0 800 800\",\n    xmlSpace: \"preserve\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M417.1,176c9.6-2.1-1.1-22.4-9.6-24.5c-6.4-1.1-18.1,9.6-17.1,16C391.5,173.9,407.5,179.2,417.1,176z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M398.9,53.3C208,53.3,52.3,209.1,52.3,400S208,746.7,398.9,746.7S745.6,590.9,745.6,400S589.9,53.3,398.9,53.3z M681.6,400   c0,115.2-69.3,214.4-167.5,258.1c-12.8,2.1-30.9,3.2-68.3,3.2c-42.7-1.1-53.3,13.9-64,21.3c-10.7-1.1-22.4-2.1-33.1-4.3   c-2.1-1.1-4.3-2.1-6.4-3.2c-23.5-14.9-39.5-14.9-48-12.8c-103.5-41.6-177.1-144-177.1-262.4c0-41.6,8.5-80,24.5-115.2   c17.1,62.9-24.5,66.1-24.5,115.2c0,32,21.3,85.3,53.3,134.4c36.3,54.4,83.2,101.3,100.3,97.1c30.9-9.6-70.4-24.5-7.5-139.7   c62.9-116.3-82.1-39.5-103.5-198.4c-7.5-57.6,32-40.5,60.8-83.2c21.3-33.1,64-40.5,58.7-64c17.1-8.5,35.2-14.9,54.4-19.2   c-20.3,18.1-38.4,33.1,3.2,24.5c45.9-9.6,69.3-18.1,72.5-32c25.6,1.1,49.1,4.3,72.5,11.7c-17.1-2.1-49.1-2.1-50.1,20.3   c-2.1,30.9-6.4,42.7-21.3,45.9s-18.1,7.5-18.1,13.9c1.1,19.2,19.2,23.5,49.1,0c29.9-23.5,38.4,7.5,61.9,12.8   c23.5,5.3,20.3-23.5,39.5-16c19.2,7.5,42.7,49.1-17.1,44.8c-59.7-3.2-89.6-20.3-133.3,2.1c-61.9,30.9-51.2,122.7,13.9,121.6   c53.3,0,68.3,2.1,85.3,58.7S480,512,509.9,555.7c29.9,45.9,100.3-82.1,98.1-124.8s55.5-62.9,23.5-113.1   c-32-49.1,6.4-49.1,34.1-20.3C675.2,329.6,681.6,363.7,681.6,400z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M602.7,523.7c14.9,5.3,53.3-74.7,36.3-67.2C620.8,464,590.9,519.5,602.7,523.7z\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgWorld2);\nexport default __webpack_public_path__ + \"static/media/world2.a2a29618.svg\";\nexport { ForwardRef as ReactComponent };","import { useEffect, useState } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport { TEXT } from '../rest/lang'\r\nimport { LeftMenu } from './LeftMenu'\r\nimport './Nav.css'\r\nimport { ReactComponent as Hamburger } from '../rest/svg/hamburger.svg';\r\nimport { ReactComponent as WoldIcon } from '../rest/svg/world2.svg';\r\n\r\nexport const NavMain = () => {\r\n  const app = useSelector(state => state.app)\r\n  const { friends, id } = useSelector(state => state.user)\r\n  const history = useHistory()\r\n\r\n  const [leftMenu, setLeftMenu] = useState(false)\r\n  const [modeLabel, setModeLabel] = useState(TEXT.defaultMode)\r\n\r\n  function showLeftMenu() {\r\n    setLeftMenu(true)\r\n  }\r\n  function backToMain() {\r\n    setLeftMenu(false)\r\n    history.push('/')\r\n  }\r\n\r\n  useEffect(() => {\r\n    (function () {\r\n      const label = getMapModeLabel(app, friends, id)\r\n      return setModeLabel(label)\r\n    })()\r\n    // eslint-disable-next-line\r\n  }, [app.mode, app.friendModeId, app.tagModeTag])\r\n\r\n  return (\r\n    <div className=\"mainNavigation mp-bg-light mp-border-secondary mp-shadow-primary\">\r\n      <LeftMenu leftMenu={leftMenu} setLeftMenu={setLeftMenu} />\r\n      <div className=\"flex-wrap nav-menu-back-wrap\">\r\n        {app.mapHidden &&\r\n          <div id=\"backToMain\" className=\"nav-icon\" onClick={backToMain} title={TEXT.toMain}>\r\n            <WoldIcon fill=\"var(--accent)\" />\r\n          </div>\r\n        }\r\n        <div id=\"openLeftMenu\" className=\"nav-icon\" onClick={showLeftMenu} title={TEXT.menu}>\r\n          <Hamburger fill=\"var(--primary)\" />\r\n        </div>\r\n        <Link to=\"/mapMode\" className=\"currModeLabels\">\r\n          <span className=\"mp-dark\">{TEXT.mode + ': '} </span><span className=\"mp-counter\">\r\n            {modeLabel}\r\n          </span>\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function getMapModeLabel(app, friends, myId) {\r\n  const { mode, tagModeTag, friendModeId } = app\r\n  if (mode === 'watch' && friendModeId === myId) return TEXT.myMarks\r\n  if (mode === 'watch') return TEXT.marksOf + ' ' + friendName(friends, app)\r\n  if (mode === 'draw') return TEXT.drawing\r\n  if (mode === 'drawRoute') return TEXT.drawRouteMode\r\n  if (mode === 'tags') return TEXT.tag + ' #' + tagModeTag\r\n  return TEXT.defaultMode\r\n}\r\n\r\nexport function friendName(friends, app) {\r\n  const friend = friends.find(friend => friend.id === app.friendModeId)\r\n  return friend.name + ' (' + friend.login + ')'\r\n}","import { useDispatch, useSelector } from 'react-redux'\r\nimport { closeModal } from '../store/app'\r\nimport { TEXT } from './lang'\r\n\r\nexport const Modal = () => {\r\n  const data = useSelector(state => state.app.modal)\r\n  const dispatch = useDispatch()\r\n  const acceptLabel = data.acceptLabel !== undefined ? data.acceptLabel : TEXT.acceptDefault\r\n  const cancelLabel = data.cancelLabel !== undefined ? data.cancelLabel : TEXT.cancelDefault\r\n\r\n  async function cancel() {\r\n    await data.cancelAction?.()\r\n    closeModal(dispatch)\r\n  }\r\n  async function accept() {\r\n    await data.acceptAction?.()\r\n    closeModal(dispatch)\r\n  }\r\n\r\n  if (!data) return null;\r\n  return (\r\n    <div className=\"modal-dialog-wrap\">\r\n      <div className=\"modal-dialog mp-border-dark mp-bg-light\">\r\n        <div className=\"modal-dialog-content mp-dark\">\r\n          <div className=\"modal-content\">{data.message}</div>\r\n          {Boolean(data.children) && data.children}\r\n          <div className=\"modal-buttons\">\r\n            {Boolean(cancelLabel) &&\r\n              <button className=\"modal-cancel\" onClick={cancel}>{cancelLabel}</button>}\r\n            {Boolean(acceptLabel) &&\r\n              <button className=\"modal-accept\" onClick={accept}>{acceptLabel}</button>}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSearch(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    fill: \"current\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"search\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16.464 15.05l4.243 4.243a1 1 0 0 1-1.414 1.414l-4.904-4.904a1 1 0 0 1 0-1.414 5.5 5.5 0 1 0-2.404 1.407 1 1 0 1 1 .54 1.926 7.5 7.5 0 1 1 3.94-2.672z\",\n    fillRule: \"nonzero\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSearch);\nexport default __webpack_public_path__ + \"static/media/search.b20d06df.svg\";\nexport { ForwardRef as ReactComponent };","import { useEffect, useState } from \"react\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { useHistory } from \"react-router-dom\"\r\nimport { logout } from \"../requests/auth\"\r\nimport { updateUser, updateUserPword } from \"../requests/users\"\r\nimport { TEXT } from \"../rest/lang\"\r\nimport { Responser } from \"../rest/Responser\"\r\nimport { hideMain, setToast } from \"../store/app\"\r\nimport { logIntoApp, logOutOfApp } from \"../store/user\"\r\nconst initCreds = { login: '', pword: '', name: '', question: '', answer: '' }\r\n\r\nexport const EditProfile = () => {\r\n  const dispatch = useDispatch()\r\n  const user = useSelector(state => state.user)\r\n  const history = useHistory()\r\n\r\n  const [creds, setCreds] = useState(initCreds)\r\n  const [secretChallenge, setSecretChallenge] = useState(false)\r\n  const [msg, setMsg] = useState('')\r\n\r\n  useEffect(() => {\r\n    if (user.id) setCreds(c => {\r\n      return { ...c, name: user.name, login: user.login, avatar: user.avatar }\r\n    })\r\n    return () => {\r\n      setCreds(initCreds)\r\n    };\r\n  }, [user]);\r\n  \r\n  useEffect(() => {\r\n    hideMain(dispatch)    \r\n    // eslint-disable-next-line\r\n  }, [])\r\n\r\n  function onInput(e) {\r\n    setCreds({ ...creds, [e.target.name]: e.target.value })\r\n  }\r\n\r\n  async function onSubmit(e) {\r\n    e.preventDefault()\r\n\r\n    if (!creds.login || !creds.name) return setMsg(TEXT.fillRequiredFields)\r\n\r\n    // Validation\r\n    if (creds.login.length > 50) return setMsg((TEXT.field + ' ' + TEXT.login + ' ' + TEXT.tooLong).toLocaleLowerCase().capitalize())\r\n    if (creds.pword.length > 50) return setMsg((TEXT.field + ' ' + TEXT.password + ' ' + TEXT.tooLong).toLocaleLowerCase().capitalize())\r\n    if (creds.name.length > 140) return setMsg((TEXT.field + ' ' + TEXT.userName + ' ' + TEXT.tooLong).toLocaleLowerCase().capitalize())\r\n\r\n    // Case pword change call\r\n    if (secretChallenge) {\r\n      const res = await updateUserPword(creds)\r\n      if (res.status === 'OK') {\r\n        setMsg(TEXT.successfulUpdate)\r\n        setSecretChallenge(false)\r\n        return logIntoApp(dispatch, res.data)\r\n      }\r\n      else if (res.status === 'BANEDPWORD') {\r\n        return setMsg(TEXT.bannedPwod + ' - ' + creds.pword)\r\n      }\r\n      return setMsg(TEXT.errCode + ': ' + (res.msg || res))\r\n    }\r\n\r\n    const res = await updateUser(creds)\r\n    console.log('%c⧭', 'color: #514080', res);\r\n\r\n    if (res.status === 'OK') {\r\n      setMsg(TEXT.successfulUpdate)\r\n      return logIntoApp(dispatch, res.data)\r\n    }\r\n    else if (res.status === 'EXISTING') {\r\n      return setMsg(TEXT.loginOccupied + ' - ' + creds.login)\r\n    }\r\n    else if (res.status === 'PWORDCHANGE') {\r\n      setSecretChallenge(true)\r\n      setCreds({ ...creds, question: res.data.question })\r\n      return setMsg(TEXT.secretChallenge)\r\n    }\r\n    else setMsg(TEXT.errCode + ': ' + (res.msg || res))\r\n  }\r\n\r\n  async function logOut() {\r\n    const res = await logout()\r\n    if (res.status === 'OK') {\r\n      setCreds(initCreds)\r\n      setMsg('')\r\n      setToast(dispatch, {\r\n        message: TEXT.farewell + ', ' + user.name,\r\n        status: 'complete',\r\n        title: ''\r\n      })\r\n      logOutOfApp(dispatch)\r\n      return history.push('/')\r\n    }\r\n    setMsg(TEXT.errCode + ': ' + (res.msg || res))\r\n  }\r\n\r\n  return (\r\n    <div className=\"edit-profile-area relative \">\r\n\r\n      <div className=\"edit-profile-wrapper absolute center mp-border-secondary\">\r\n        <form className=\"edit-profile \">\r\n          <h4>{TEXT.editProfile}</h4>\r\n\r\n          <label htmlFor=\"login\">{TEXT.login}:</label>\r\n          <input type=\"text\" name=\"login\" value={creds.login} onInput={onInput} autoFocus required />\r\n          <br />\r\n          <label htmlFor=\"name\">{TEXT.userName}:</label>\r\n          <input type=\"text\" name=\"name\" value={creds.name} onInput={onInput} autoFocus required />\r\n          <br />\r\n          <label htmlFor=\"pword\">{TEXT.newPassword}:</label>\r\n          <input type=\"password\" name=\"pword\" value={creds.pword} onInput={onInput} />\r\n          <br />\r\n          <br />\r\n          {secretChallenge && <>\r\n            <label htmlFor=\"question\">{TEXT.secretQuestion}:</label>\r\n            <br />\r\n            <textarea type=\"text\" name=\"question\" value={creds.question} onInput={onInput} autoComplete=\"false\" readOnly />\r\n            <br />\r\n            <label htmlFor=\"answer\">{TEXT.secterAnswer}:</label>\r\n            <input type=\"text\" name=\"answer\" value={creds.answer} onInput={onInput} required={Boolean(creds.question)} autoComplete=\"false\" />\r\n            <br />\r\n          </>}\r\n          <Responser message={msg} setMessage={setMsg} />\r\n\r\n        </form>\r\n\r\n        <hr className=\"mp-border-secondary\" />\r\n        <div className=\"logout-container\">\r\n          <button className=\"mp-border-secondary profile-logout\" onClick={logOut}>{TEXT.logout}</button>\r\n          <button className=\"mp-border-accent\" onClick={onSubmit}>{TEXT.submit}</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { useEffect, useState } from 'react'\r\nimport { useDispatch } from 'react-redux';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { registerGUser } from '../requests/users';\r\nimport { googleCreds } from '../rest/config';\r\nimport { TEXT } from '../rest/lang';\r\nimport { Responser } from '../rest/Responser';\r\nimport { logIntoApp } from '../store/user';\r\n\r\n\r\nexport const GoogleConfirm = () => {\r\n  const dispatch = useDispatch()\r\n  const history = useHistory()\r\n\r\n\r\n  const [creds, setCreds] = useState({\r\n    ...googleCreds\r\n  })\r\n  const [msg, setMsg] = useState('')\r\n\r\n\r\n  function onInput(e) {\r\n    setCreds({ ...creds, [e.target.name]: e.target.value })\r\n  }\r\n\r\n  useEffect(() => {\r\n    setCreds(googleCreds)\r\n  }, [])\r\n\r\n  async function onSubmit() {\r\n    // validation\r\n    if (creds.login.length > 50) return setMsg((TEXT.field + ' ' + TEXT.login + ' ' + TEXT.tooLong).toLocaleLowerCase().capitalize())\r\n    if (creds.name.length > 140) return setMsg((TEXT.field + ' ' + TEXT.userName + ' ' + TEXT.tooLong).toLocaleLowerCase().capitalize())\r\n\r\n    const data = { ...creds }\r\n    delete data.occupiedLogin\r\n\r\n    const res = await registerGUser(data)\r\n    console.log('%c⧭', 'color: #0088cc', res);\r\n    if (res.status === 'OK') {\r\n      setMsg(TEXT.successfullReg)\r\n      logIntoApp(dispatch, res.data)\r\n      console.log('%c⧭', 'color: #00b300', googleCreds);\r\n      Object.keys(googleCreds).forEach(key => {\r\n        googleCreds.key = null        \r\n      })\r\n      setCreds(googleCreds)\r\n      history.push('/')\r\n    }\r\n    else if (res.status === 'EXISTING') {\r\n      return setMsg(TEXT.loginOccupied + ' - ' + creds.login)\r\n    }\r\n    else if (res.status === 'BANEDPWORD') {\r\n      return setMsg(TEXT.bannedPwod + ' - ' + creds.pword)\r\n    }\r\n    else {\r\n      setMsg(TEXT.errorReg + ', ' + TEXT.errCode + ': ' + (res.msg || res))\r\n    }\r\n\r\n  }\r\n\r\n  return (\r\n    <div className=\"auth-container relative\">\r\n      <div className=\"absolute center auth-subcontainer\">\r\n        <div className=\"google-regform mp-border-secondary\">\r\n          <h4>{TEXT.oauthTitle}</h4>\r\n          <label htmlFor=\"login\">{TEXT.login}:</label>\r\n          <input type=\"text\" name=\"login\" value={creds.login} onInput={onInput} required />\r\n          {googleCreds.occupiedLogin &&\r\n            <p className=\"little-hint\">{TEXT.login + ' ' + googleCreds.occupiedLogin + ' ' + TEXT.occupied}</p>\r\n          }\r\n          <br />\r\n          <label htmlFor=\"name\">{TEXT.userName}:</label>\r\n          <input type=\"text\" name=\"name\" value={creds.name} onInput={onInput} required />\r\n          <br />\r\n\r\n          <Responser message={msg} setMessage={setMsg} />\r\n\r\n          <button className=\"mp-border-accent\" type=\"button\" onClick={onSubmit}>{TEXT.confirm}</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { useEffect, useRef, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { closeToast } from '../store/app'\r\nimport { TEXT } from './lang'\r\n\r\nexport const Toast = () => {\r\n  const data = useSelector(state => state.app.toast)\r\n  const dispatch = useDispatch()\r\n  const [visibility, setVisibility] = useState(null)\r\n  const ref = useRef(null)\r\n\r\n\r\n  useEffect(() => {\r\n    const t = setTimeout(() => {\r\n      setVisibility('opaque')\r\n    }, 4000);\r\n    if (ref?.current) ref.current.onmouseover = e => setVisibility(null)\r\n    return () => {\r\n      clearTimeout(t)\r\n    }\r\n  }, [])\r\n\r\n\r\n  function onClick() {\r\n    if (data.clickAction) data.clickAction()\r\n    closeToast(dispatch)\r\n  }\r\n\r\n  if (!data.message) return null\r\n\r\n  // Coloring\r\n  // default status = 'error'\r\n  let main = 'accent'\r\n  let info = 'dark'\r\n  let bg = 'light'\r\n  let border = 'accent'\r\n  let title = data.title !== undefined ? data.title : TEXT.error\r\n  if (data.status === 'info') {\r\n    main = 'counter'\r\n    info = 'dark'\r\n    bg = 'light'\r\n    border = 'counter'\r\n    title = ''\r\n  }\r\n  else if (data.status === 'warning') {\r\n    main = 'counter'\r\n    info = 'accent'\r\n    bg = 'light'\r\n    border = 'accent'\r\n    title = data.title !== undefined ? data.title : TEXT.warning + '!'\r\n  }\r\n  else if (data.status === 'complete') {\r\n    main = 'counter'\r\n    info = 'dark'\r\n    bg = 'light'\r\n    border = 'counter'\r\n    title = data.title !== undefined ? data.title : TEXT.complete + '!'\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={`mp-toast mp-${main} mp-bg-${bg} mp-border-${border} cursor-pointer ${visibility}`}\r\n      onClick={onClick} ref={ref}\r\n      key={data.key}\r\n    >\r\n      <div className=\"toast-header\">\r\n        {title ? <>\r\n          <h6>{title}</h6>\r\n          <div className={`close-cross mp-${info}`}>&#10006;</div>\r\n        </> :\r\n          <>\r\n            <p className={`mp-${info}`}>{data.message}</p>\r\n            <div className={`close-cross mp-${main}`}>&#10006;</div>\r\n          </>\r\n        }\r\n      </div>\r\n      {Boolean(title) && <div className={`toast-contetnt mp-${info}`}>\r\n        {data.message}\r\n      </div>}\r\n      <div className=\"toast-bottom\"></div>\r\n    </div>\r\n  )\r\n}\r\n","import { useEffect, useRef, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useHistory, useLocation } from 'react-router-dom'\r\nimport { logout } from '../requests/auth'\r\nimport { registerUser } from '../requests/users'\r\nimport { TEXT } from '../rest/lang'\r\nimport { Responser } from '../rest/Responser'\r\nimport { logIntoApp, logOutOfApp } from '../store/user'\r\nconst initCreds = { login: '', pword: '', name: '', question: TEXT.secretExample, answer: '' }\r\n\r\nexport const AlphaReg = () => {\r\n  const dispatch = useDispatch()\r\n  const history = useHistory()\r\n  const user = useSelector(state => state.user)\r\n  const { search } = useLocation();\r\n\r\n  const [creds, setCreds] = useState(initCreds)\r\n  const [msg, setMsg] = useState('')\r\n  const ref = useRef(null)\r\n  const [replica, setReplica] = useState(false);\r\n\r\n  useEffect(() => {\r\n    (async function () {\r\n      if (user.id) {\r\n        const res = await logout()\r\n        res.status === 'OK' ? logOutOfApp(dispatch) : setMsg('Ошибка сети')\r\n      }\r\n      const query = new URLSearchParams(search);\r\n      // eslint-disable-next-line \r\n      setCreds({\r\n        ...creds,\r\n        login: query.get('login'),\r\n        name: query.get('name'),\r\n        level: query.get('level')\r\n      })\r\n    })()\r\n\r\n    return () => {\r\n      setCreds(initCreds)\r\n    }\r\n    // eslint-disable-next-line \r\n  }, [])\r\n\r\n  function onInput(e) {\r\n    setCreds({ ...creds, [e.target.name]: e.target.value })\r\n  }\r\n  function onReplica() {\r\n    setReplica(false)\r\n    setMsg(TEXT.secretReplica2)\r\n    ref.current.focus()\r\n  }\r\n\r\n  async function onSubmit() {\r\n    if (!creds.login) return setMsg(TEXT.fillRequiredFields)\r\n    if (creds.question && !creds.answer) {\r\n      if (creds.question === TEXT.secretExample) setReplica(true)\r\n      ref.current.focus()\r\n      return setMsg(TEXT.secretValidation)\r\n    }\r\n\r\n    // Validation\r\n    if (creds.question?.length > 300) return setMsg((TEXT.field + ' ' + TEXT.secretQuestion + ' ' + TEXT.tooLong).toLocaleLowerCase().capitalize())\r\n    if (creds.answer?.length > 255) return setMsg((TEXT.field + ' ' + TEXT.secterAnswer + ' ' + TEXT.tooLong).toLocaleLowerCase().capitalize())\r\n    if (creds.login.length > 50) return setMsg((TEXT.field + ' ' + TEXT.login + ' ' + TEXT.tooLong).toLocaleLowerCase().capitalize())\r\n    if (creds.name.length > 140) return setMsg((TEXT.field + ' ' + TEXT.userName + ' ' + TEXT.tooLong).toLocaleLowerCase().capitalize())\r\n\r\n\r\n    const res = await registerUser(creds)\r\n    if (res.status === 'OK') {\r\n      setMsg(TEXT.successfullReg)\r\n      // await loginWithCreds({ login: creds.login, pword: creds.pword })\r\n      logIntoApp(dispatch, res.data)\r\n      setCreds(initCreds)\r\n      history.push('/')\r\n    }\r\n    else if (res.status === 'EXISTING') {\r\n      return setMsg(TEXT.loginOccupied + ' - ' + creds.login)\r\n    }\r\n    else if (res.status === 'BANEDPWORD') {\r\n      return setMsg(TEXT.bannedPwod + ' - ' + creds.pword)\r\n    }\r\n    else {\r\n      setMsg(TEXT.errorReg + ', ' + TEXT.errCode + ': ' + (res.msg || res))\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"auth-container relative\">\r\n      <div className=\"absolute center auth-subcontainer\">\r\n        <div className=\"auth-action-wrap mp-border-secondary\">\r\n          <div className=\"register-form\">\r\n            <h4>Регистрация по ссылке, без смс</h4>\r\n            <label htmlFor=\"login\">{TEXT.login}:</label>\r\n            <input type=\"text\" name=\"login\" value={creds.login} onInput={onInput} autoFocus required />\r\n            <br />\r\n            <label htmlFor=\"name\">{TEXT.userName}:</label>\r\n            <input type=\"text\" name=\"name\" value={creds.name} onInput={onInput} required />\r\n            <br />\r\n            <label htmlFor=\"pword\">{TEXT.password}:</label>\r\n            <input type=\"password\" placeholder=\"пароль не обязателен\" name=\"pword\" value={creds.pword} onInput={onInput} required />\r\n            <br />\r\n            <br />\r\n            <label htmlFor=\"question\">{TEXT.secretQuestion}:</label>\r\n            <br />\r\n            <textarea type=\"text\" name=\"question\" value={creds.question} onInput={onInput} autoComplete=\"false\" />\r\n            <p className=\"little-hint\">{TEXT.secretHint}</p>\r\n\r\n            <label htmlFor=\"answer\">{TEXT.secterAnswer}:</label>\r\n            <input type=\"text\" name=\"answer\" value={creds.answer} onInput={onInput} required={Boolean(creds.question)} ref={ref} autoComplete=\"false\" />\r\n            <div className=\"register-responser\">\r\n              <Responser message={msg} setMessage={setMsg} />\r\n            </div>\r\n            {replica &&\r\n              <button className=\"btn-replica mp-border-counter mp-primary-hover\" onClick={onReplica}>{TEXT.secretReplica}</button>}\r\n            <button className=\"mp-border-accent\" type=\"button\" onClick={onSubmit}>{TEXT.submit}</button>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { useSelector } from \"react-redux\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { TEXT } from \"../rest/lang\";\r\nconst link = window.location.origin + '/friends/addByLink?id='\r\n\r\nexport const DefaultLayout = () => {\r\n  const history = useHistory()\r\n  const { id: userID, friends, requests } = useSelector(s => s.user)\r\n\r\n\r\n  function onClick(id) {\r\n    history.push(`/friends/item/${id}`)\r\n  }\r\n  function onLink(e) {\r\n    e.target.select()\r\n  }\r\n\r\n\r\n  return (\r\n    <div className=\"friendsDefault\">\r\n      {/* <h3>myFriends + addMeLink + addByLink</h3> */}\r\n      {/* My friends */}\r\n      <h4>{TEXT.friendList}</h4>\r\n      <div className=\"friendList\">\r\n        {Boolean(friends?.length) ? friends.map(user => {\r\n          return (\r\n            <div className=\"friendContainer\" key={user.id1 + user.id2}>\r\n              <div className=\"resultUser cursor-pointer mp-accent-hover transition-small\"\r\n                key={user.id} onClick={() => onClick(user.id)}\r\n              >\r\n\r\n                <div className=\"authorLogo mp-bg-secondary\">\r\n                  <span className=\"mp-dark\" title={user.login}>{String(user.name)?.[0]?.toUpperCase()}</span>\r\n                </div>\r\n\r\n                <div className=\"resultUser-creds\">\r\n                  <p className=\"mp-secondary\">{user.name}</p>\r\n                  <label className=\"cursor-pointer\">({user.login})</label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )\r\n        }) :\r\n          <div className=\"noFriendsCase\">\r\n            <h5>{TEXT.sadlyNoFriends}</h5>\r\n            {/* <button>{TEXT.addFriends}</button> */}\r\n          </div>}\r\n      </div>\r\n      {/* My requests */}\r\n      <h4>{Boolean(requests?.length) && TEXT.friendRequests}</h4>{\r\n        Boolean(requests?.length) &&\r\n        <div className=\"friendList\">\r\n          {Boolean(requests?.length) && requests.map(user => {\r\n            return (\r\n              <div className=\"friendContainer\" key={user.id1 + user.id2}>\r\n                <div className=\"resultUser cursor-pointer mp-accent-hover transition-small\"\r\n                  key={user.id} onClick={() => onClick(user.id)}\r\n                >\r\n\r\n                  <div className=\"authorLogo mp-bg-secondary\">\r\n                    <span className=\"mp-dark\" title={user.login}>{String(user.name)?.[0]?.toUpperCase()}</span>\r\n                  </div>\r\n\r\n                  <div className=\"resultUser-creds\">\r\n                    <p className=\"mp-secondary\">{user.name}</p>\r\n                    <label className=\"cursor-pointer\">({user.login})</label>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )\r\n          })}\r\n        </div>}\r\n\r\n      {/* Add me link */}\r\n      <div className=\"addMeLink\">\r\n        <h4>{TEXT.addMeLink}</h4>\r\n        <input type=\"text\" value={link + userID} onFocus={onLink} readOnly />\r\n      </div>\r\n      {/* Add by link */}\r\n      <Link to=\"/friends/addByLink\">\r\n        <button className=\"button\">{TEXT.addByLink}</button>\r\n      </Link>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\n","export const Loading = ({ loading }) => {\r\n\r\n  if (loading) return (\r\n    <div>\r\n      Loading anmation...\r\n    </div>\r\n  )\r\n\r\n  return null\r\n}\r\n","import { useState } from 'react';\r\nimport { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Link, useParams } from 'react-router-dom';\r\nimport { getProfileDetails, addFriend as addFriendReq, acceptRequest, removeFriend as removeFriendReq } from '../requests/friends';\r\nimport { getFriendsInfo } from '../rest/helperFuncs';\r\nimport { TEXT } from '../rest/lang';\r\nimport { Loading } from '../rest/Loading';\r\nimport { setToast } from '../store/app';\r\n\r\nexport const Profile = () => {\r\n  const { userId } = useParams();\r\n  const dispatch = useDispatch()\r\n  const curUser = useSelector(store => store.user)\r\n\r\n  const [user, setUser] = useState(null)\r\n  const [loading, setLoading] = useState(true)\r\n  const [friendButton, setFriendButton] = useState(\r\n    // user.friendStatus === 'init'\r\n    <button className=\"button\" onClick={addFriend}>{TEXT.addFriend}</button>\r\n  )\r\n\r\n\r\n  useEffect(() => {\r\n    (async function () {\r\n\r\n      // Case it's client wathing hos profile\r\n      if (curUser.id === userId) {\r\n        setUser({ ...curUser })\r\n        setFriendButton(\r\n          <Link to=\"/editProfile\"><button className=\"button\">{TEXT.profile}</button></Link>\r\n        )\r\n        return setLoading(false)\r\n      }\r\n\r\n      const res = await getProfileDetails(userId)\r\n\r\n      if (res.status !== 'OK') setToast(dispatch, { message: TEXT.requestError + ' #profEr1' })\r\n      else setUser(res.data)\r\n      setLoading(false)\r\n    })()\r\n    // eslint-disable-next-line \r\n  }, [userId])\r\n\r\n  useEffect(() => {\r\n    if (!user?.friendStatus) { }\r\n    // Friend statuses\r\n    else if (user.friendStatus === 'friends') setFriendButton(\r\n      <div>\r\n        <Link to=\"/friends\">\r\n          <button className=\"button\" >{TEXT.inFriendlist}</button>\r\n        </Link>\r\n        <button className=\"button mp-border-counter\" onClick={removeFriend}>{TEXT.removeFriend}</button>\r\n      </div>\r\n    )\r\n    else if (user.friendStatus === 'youRequested') setFriendButton(\r\n      <button className=\"button mp-border-secondary mp-secondary\" >{TEXT.youRequested}</button>\r\n    )\r\n    else if (user.friendStatus === 'youAsked') setFriendButton(\r\n      <button className=\"button mp-border-accent\" onClick={confirmRequest}>{TEXT.confirmRequest}</button>\r\n    )\r\n    // eslint-disable-next-line\r\n  }, [user?.friendStatus]);\r\n\r\n  if (loading) return (\r\n    <div className=\"profileContainer\">\r\n      <Loading loading={loading} />\r\n    </div>\r\n  )\r\n\r\n  async function addFriend() {\r\n    const res = await addFriendReq(userId)\r\n    if (res.status !== 'OK') return setToast(dispatch, { message: TEXT.requestError + ' #profEr2' });\r\n    await getFriendsInfo(dispatch)\r\n    setFriendButton(\r\n      <button className=\"button\">{TEXT.sent}</button>\r\n    )\r\n  }\r\n\r\n  async function removeFriend() {\r\n    const res = await removeFriendReq(userId)\r\n    if (res.status !== 'OK') return setToast(dispatch, { message: TEXT.requestError + ' #profEr3' });\r\n    await getFriendsInfo(dispatch)\r\n    setUser({ ...user, friendStatus: 'youAsked' })\r\n  }\r\n\r\n  async function confirmRequest() {\r\n    const res = await acceptRequest(userId)\r\n    if (res.status !== 'OK') return setToast(dispatch, { message: TEXT.requestError + ' #profEr4' });\r\n    await getFriendsInfo(dispatch)\r\n    setUser({ ...user, friendStatus: 'friends' })\r\n  }\r\n\r\n  if (!user) return (\r\n    <div className=\"profileContainer\">\r\n      <div className=\"userProfile mp-border-dark\">\r\n        <p>{TEXT.noResults}</p>\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n  return (\r\n    <div className=\"profileContainer\">\r\n      <div className=\"userProfile mp-border-dark\">\r\n        {Boolean(user.avatar) && <div className=\"avatar\"><img src={user.avatar} alt={TEXT.avatar} /></div>}\r\n        <div className=\"mp-primary credentials \" title={TEXT.userName}>{user.name} <label\r\n          className=\"mp-dark\" title={TEXT.login}>({user.login})\r\n        </label>\r\n        </div>\r\n        {Boolean(user.commentsn) && <div className=\"commentsn\">{TEXT.commentsn}: {user.commentsn}</div>}\r\n        <div className=\"level capitalize\">{TEXT.level}: <label className=\"mp-dark\">{user.level}</label></div>\r\n      </div>\r\n      <div className=\"friends-actionButton\">\r\n        {\r\n          friendButton\r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { useHistory, useLocation } from \"react-router-dom\"\r\nimport { TEXT } from \"../rest/lang\";\r\n\r\nexport const Results = ({ searchResults }) => {\r\n  const query = new URLSearchParams(useLocation().search).get('query')\r\n  const history = useHistory()\r\n\r\n  if (!searchResults) return null\r\n\r\n  if (!searchResults.length) return (\r\n    <div className=\"resultsContainer\">\r\n      <h5>{TEXT.noResults}</h5>\r\n    </div>\r\n  )\r\n\r\n  function onClick(id) {\r\n    history.push(`/friends/item/${id}?from=${query}`)\r\n  }\r\n\r\n  return (\r\n    <div className=\"resultsContainer\">\r\n      {searchResults.map(user => {\r\n        return (\r\n          <div className=\"resultUser cursor-pointer mp-accent-hover transition-small\"\r\n            key={user.id} onClick={() => onClick(user.id)}\r\n          >\r\n\r\n            <div className=\"authorLogo mp-bg-secondary\">\r\n              <span className=\"mp-dark\" title={user.login}>{String(user.name)?.[0]?.toUpperCase()}</span>\r\n            </div>\r\n\r\n            <div className=\"resultUser-creds\">\r\n              <p className=\"mp-secondary\">{user.name}</p>\r\n              <label className=\"cursor-pointer\">({user.login})</label>\r\n            </div>\r\n          </div>\r\n        )\r\n      })}\r\n    </div>\r\n  )\r\n}\r\n","import { useState } from \"react\"\r\nimport { useDispatch } from \"react-redux\"\r\nimport { useHistory } from \"react-router-dom\"\r\nimport { searchUsers } from \"../requests/friends\"\r\nimport { searchTags } from \"../requests/tags\"\r\nimport { TEXT } from \"../rest/lang\"\r\nimport { setToast } from \"../store/app\"\r\nimport { ReactComponent as SearchIcon } from '../rest/svg/search.svg';\r\n\r\n// Used both for friends and tags\r\nexport const SearchBar = ({ setSearchResults }) => {\r\n  const dispatch = useDispatch()\r\n  const history = useHistory()\r\n\r\n  const [input, setInput] = useState('')\r\n\r\n\r\n  function onInput(e) {\r\n    setInput(e.target.value)\r\n  }\r\n\r\n  async function submitEnter() {\r\n    const chapter = history.location.pathname.split('/')[1]\r\n    let res\r\n    if (chapter === 'friends') { res = await searchUsers(input) }\r\n    else { res = await searchTags(input) }\r\n\r\n    if (res.status !== 'OK') return setToast(dispatch, { message: TEXT.requestError + ' #subErr1'});\r\n    setSearchResults(res.data)\r\n    history.push(`/${chapter}/search?query=${input}`)\r\n  }\r\n\r\n  function onKeyDown(e) {\r\n    if (e.key !== 'Enter') return;\r\n    submitEnter()\r\n  }\r\n\r\n  function onBack() {\r\n    history.goBack()\r\n  }\r\n\r\n  return (\r\n    <div className=\"searchContainer transition\">\r\n\r\n      <div onClick={onBack} className=\"backButton\">\r\n        <button className=\"button mp-primary\">{\"<<\"}</button>\r\n      </div>\r\n\r\n      <input type=\"text\" name=\"search\" value={input} onInput={onInput} onKeyDown={onKeyDown} />\r\n      <div className=\"searchButton relative\">\r\n        <button onClick={submitEnter} className=\"button\">&#8203;<SearchIcon fill=\"var(--accent)\" /></button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { useEffect } from 'react'\r\nimport { useState } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { Link, useLocation } from 'react-router-dom'\r\nimport { addByLink } from '../requests/friends'\r\nimport { TEXT } from '../rest/lang'\r\nimport { Loading } from '../rest/Loading'\r\nimport { setToast } from '../store/app'\r\n\r\nexport const AddByLink = () => {\r\n  const paramId = new URLSearchParams(useLocation().search).get('id')\r\n  const dispatch = useDispatch()\r\n\r\n  const [id, setId] = useState(null)\r\n  const [loading, setLoading] = useState(true)\r\n  const [link, setLink] = useState('')\r\n  function onInput(e) {\r\n    const val = e.target.value\r\n    setLink(val)\r\n    if (val?.includes('id')) {\r\n      const q = new URLSearchParams(val.split('?')[1])\r\n      if (q.get('id')) setId(q.get('id'))\r\n    }\r\n  }\r\n  const [readOnly, setReadOnly] = useState(false)\r\n\r\n  useEffect(() => {\r\n    if (paramId) setId(paramId)\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    (async function () {\r\n      if (!id) return;\r\n\r\n      console.log('%c⧭ id run', 'color: #733d00', id);\r\n\r\n      await addFriend()\r\n      setLoading(false)\r\n    })()\r\n    // eslint-disable-next-line\r\n  }, [id]);\r\n\r\n  async function addFriend() {\r\n    const res = await addByLink(id)\r\n    console.log('%c⧭', 'color: #00e600', res);\r\n    if (res.status !== 'OK') return setToast(dispatch, { message: TEXT.requestError + ' #adBLi1'});\r\n    setToast(dispatch, { message: TEXT.yourFriendsNow, status: 'complete' })\r\n    setReadOnly(true)\r\n  }\r\n\r\n  if (paramId && loading) return (\r\n    <Loading loading={loading} />\r\n  )\r\n\r\n  return (\r\n    <div className=\"addByLink\">\r\n      <h4>{TEXT.addByLink}</h4>\r\n      {!readOnly ?\r\n        <div className=\"field\">\r\n          <label htmlFor=\"link\">{TEXT.pasteAddLink}</label>\r\n          <input type=\"text\" value={link} onInput={onInput} readOnly={readOnly} />\r\n        </div> :\r\n        <div>\r\n          <Link to=\"/friends\">\r\n            <button className=\"button\">{TEXT.goBack}</button>\r\n          </Link>\r\n        </div>}\r\n    </div>\r\n  )\r\n}\r\n","import { useState } from \"react\";\r\nimport { Link, Route, Switch } from \"react-router-dom\"\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { DefaultLayout } from \"./DefaultLayout\";\r\nimport { Profile } from \"./Profile\";\r\nimport { Results } from \"./Results\";\r\nimport { SearchBar } from \"./SearchBar\";\r\nimport \"./Friends.css\"\r\nimport { useEffect } from \"react\";\r\nimport { hideMain } from \"../store/app\";\r\nimport { TEXT } from \"../rest/lang\";\r\nimport { AddByLink } from \"./AddByLink\";\r\n\r\n\r\nexport const FriendsMain = () => {\r\n  const dispatch = useDispatch()\r\n  const app = useSelector(state => state.app)\r\n\r\n  const [searchResults, setSearchResults] = useState(null);\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    hideMain(dispatch)\r\n    // eslint-disable-next-line\r\n  }, [])\r\n\r\n  if (!app.isLogged) {\r\n    return (\r\n      // Styles from /Auth/Auth.css\r\n      <div className=\"friendsNotLoggedWrap auth-container relative\">\r\n        <div className=\"absolute center auth-subcontainer\">\r\n          <div className=\"auth-action-wrap mp-border-secondary\">\r\n            <p>{TEXT.loginToUseThis}</p>\r\n            <Link to=\"/auth\">\r\n              <button className=\"primary mp-border-accent loginBtn capitalize\">\r\n                {TEXT.authorization}\r\n              </button>\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // <Link to={`${url}/rendering`}>Rendering with React</Link>\r\n  return (\r\n    <div>\r\n      <SearchBar setSearchResults={setSearchResults} />\r\n\r\n      <Switch>\r\n        <Route exact path=\"/friends\">\r\n          <DefaultLayout />\r\n        </Route>\r\n        <Route path=\"/friends/item/:userId\">\r\n          <Profile />\r\n        </Route>\r\n        <Route path=\"/friends/search\">\r\n          <Results searchResults={searchResults} />\r\n        </Route>\r\n        <Route path=\"/friends/addByLink\">\r\n          <AddByLink />\r\n        </Route>\r\n\r\n      </Switch>\r\n      \r\n      <div className=\"bottom\"></div>\r\n    </div>\r\n  )\r\n}\r\n","import { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport { TEXT } from '../rest/lang'\r\nimport { friendModeId, hideMain, setMapMode } from '../store/app'\r\nimport { getMapModeLabel } from './NavMain'\r\nimport { ReactComponent as DrawIcon } from '../rest/svg/draw.svg'\r\n\r\nexport const MapMode = () => {\r\n  const dispatch = useDispatch()\r\n  const history = useHistory()\r\n  const { friends, id } = useSelector(s => s.user)\r\n  const app = useSelector(s => s.app)\r\n  const user = useSelector(s => s.user)\r\n\r\n\r\n  const [modeLabel, setModeLabel] = useState(TEXT.defaultMode)\r\n\r\n  useEffect(() => {\r\n    (function () {\r\n      const label = getMapModeLabel(app, friends, id)\r\n      return setModeLabel(label)\r\n    })()\r\n    // eslint-disable-next-line\r\n  }, [app.mode, app.friendModeId, app.tagModeTag])\r\n\r\n  useEffect(() => {\r\n    hideMain(dispatch)\r\n    // eslint-disable-next-line\r\n  }, [])\r\n\r\n  function runFriendMode(id) {\r\n    history.push('/')\r\n    friendModeId(dispatch, id)\r\n    setMapMode(dispatch, 'watch')\r\n  }\r\n\r\n  function reset() {\r\n    history.push('/')\r\n    setMapMode(dispatch, 'default')\r\n  }\r\n\r\n  function runDrawMode() {\r\n    history.push('/')\r\n    setMapMode(dispatch, 'draw')\r\n  }\r\n\r\n  return (\r\n    <div className=\"modeSwitch\">\r\n\r\n      <h5 className=\"currentMode\">{TEXT.currentMode + ': '}\r\n        <span className=\"mp-counter\">\r\n          {modeLabel}\r\n        </span>\r\n      </h5>\r\n\r\n      {/* friendMode */}\r\n      <div className=\"modeType mp-border-secondary\">\r\n        <h5 className=\"title\">{TEXT.watchModeSub1}</h5>\r\n        <div className=\"friendList\">\r\n          {Boolean(friends?.length) ? friends.map(friend => {\r\n            return (\r\n              <div className=\"friendContainer\" key={friend.id1 + friend.id2}>\r\n                <div className=\"resultUser cursor-pointer mp-accent-hover transition-small\"\r\n                  onClick={() => runFriendMode(friend.id)}\r\n                >\r\n\r\n                  <div className=\"authorLogo mp-bg-secondary\">\r\n                    <span className=\"mp-dark\" title={friend.login}>{String(friend.name)?.[0]?.toUpperCase()}</span>\r\n                  </div>\r\n\r\n                  <div className=\"resultUser-creds\">\r\n                    <p className=\"mp-secondary\">{friend.name}</p>\r\n                    <label className=\"cursor-pointer\">({friend.login})</label>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )\r\n          }) :\r\n            <div className=\"noFriendsCase\">\r\n              <h5>{TEXT.watchModeSub2}</h5>\r\n              <Link to=\"/friends\">\r\n                <button>{TEXT.addFriends}</button>\r\n              </Link>\r\n            </div>}\r\n\r\n        </div>\r\n      </div>\r\n\r\n      {/* my marks */}\r\n\r\n      <div className=\"myMarks\">\r\n        <button className=\"button\" onClick={() => runFriendMode(user.id)}>\r\n          <h5 className=\"title cursor-pointer capitalize\" >{TEXT.myMarks}</h5>\r\n        </button>\r\n      </div>\r\n\r\n      {/* drawMode */}\r\n      {app.mode !== 'draw' &&\r\n        <div className=\"modeType mp-border-secondary\">\r\n          <h5 className=\"title\">{TEXT.drawMode}</h5>\r\n          {Boolean(user?.level < 2) ?\r\n            <p className=\"subtitle\">{TEXT.drawModeLevelOnly}</p>\r\n            : <>\r\n              <Link to=\"/\" disabled>\r\n                <button className=\"button modeButton drawModeButton\" onClick={runDrawMode}>\r\n                  <DrawIcon fill=\"var(--secondary)\" className=\"nav-icon\" />\r\n                  {TEXT.toDrawMode}\r\n                </button>\r\n              </Link>\r\n              <p className=\"subtitle\">{TEXT.watchModeSub3}</p>\r\n            </>}\r\n        </div>\r\n      }\r\n\r\n      {/* tagMode */}\r\n      <div className=\"modeType mp-border-secondary\">{app.tagModeTag ?\r\n        <div>\r\n          <h5 className=\"title\">\r\n            <span className=\"capitalize\">{TEXT.tag + ': '}</span>\r\n            <Link to={\"/tags/item/\" + app.tagModeTag} className=\"cursor-pointer\">\r\n              <span className=\"mp-secondary\">#</span><span className=\"mp-counter mp-accent-hover\">{app.tagModeTag}</span>\r\n            </Link>\r\n          </h5>\r\n        </div> : <div>\r\n          <h5 className=\"title\">{TEXT.tags}</h5>\r\n          <Link to=\"/tags\">\r\n            <button className=\"button modeButton tagModeButton tagWrap\">\r\n              <span className=\"bigHashtag mp-secondary\">#</span><span className=\"tagContent\">{TEXT.toTags}</span>\r\n            </button>\r\n          </Link>\r\n          <p className=\"subtitle\">{TEXT.mapTagModeSub}</p>\r\n        </div>}\r\n      </div>\r\n\r\n      {app.mode &&\r\n        <div className=\"modeType mp-border-secondary\">\r\n          <button className=\"button modeButton capitalize mp-counter mp-border-counter\" onClick={reset}>{TEXT.reset}</button>\r\n        </div>\r\n      }\r\n\r\n    </div>\r\n  )\r\n}\r\n","import { TEXT } from \"../rest/lang\";\r\n\r\nexport const TagItem = ({ tagInfo, onClick }) => {\r\n  if (!tagInfo) return null;\r\n\r\n  function click() {\r\n    onClick(tagInfo.tag)\r\n  }\r\n\r\n  return (\r\n    <div className=\"tagItem cursor-pointer mp-accent-hover transition-small mp-border-dark \" onClick={click}>\r\n\r\n      <div className=\"mp-dark tagWrap\">\r\n        <span className=\"bigHashtag\"># </span>\r\n        <span className=\"tagContent mp-accent\">{tagInfo.tag}</span>\r\n      </div>\r\n\r\n\r\n      <p className=\"tagAmount mp-dark\">{TEXT.tagsAmount}: <span className=\"mp-accent\">{tagInfo.amount}</span></p>\r\n    </div>\r\n  )\r\n}\r\n","import { useEffect, useState } from \"react\"\r\nimport { useDispatch } from \"react-redux\"\r\nimport { useHistory } from \"react-router-dom\"\r\nimport { featuredTags } from \"../requests/tags\"\r\nimport { TEXT } from \"../rest/lang\"\r\nimport { setToast } from \"../store/app\"\r\nimport { TagItem } from \"./TagItem\"\r\n\r\nexport const FeaturedTags = () => {\r\n  const dispatch = useDispatch()\r\n  const history = useHistory()\r\n\r\n  const [recent, setRecent] = useState([])\r\n  const [popular, setPopular] = useState([])\r\n\r\n  useEffect(() => {\r\n    (async function () {\r\n      const res = await featuredTags()\r\n      if (res.status !== 'OK') return setToast(dispatch, { message: TEXT.requestError + ' #fts1' });\r\n      setRecent(res.data.recent)\r\n      setPopular(res.data.popular)\r\n    })()\r\n    // eslint-disable-next-line \r\n  }, [])\r\n\r\n  function onClick(tag) {\r\n    history.push(`/tags/item/${tag}`)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h4 className=\"title\">{TEXT.recentTags}</h4>\r\n      <div className=\"tagsGroup\">\r\n\r\n        {Boolean(recent.length) && recent.map(tagInfo => {\r\n          return <TagItem tagInfo={tagInfo} key={tagInfo.tag + 'recent'} onClick={onClick} />\r\n        })}\r\n      </div>\r\n\r\n      <h4 className=\"title\">{TEXT.mostPopular}</h4>\r\n      <div className=\"tagsGroup\">\r\n\r\n        {Boolean(popular.length) && popular.map(tagInfo => {\r\n          return <TagItem tagInfo={tagInfo} key={tagInfo.tag + 'popular'} onClick={onClick} />\r\n        })}\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}\r\n","import { useEffect, useState } from \"react\";\r\nimport { useHistory, useLocation } from \"react-router-dom\"\r\nimport { TEXT } from \"../rest/lang\";\r\nimport { TagItem } from \"./TagItem\";\r\n\r\nexport const Results = ({ searchResults }) => {\r\n  const query = new URLSearchParams(useLocation().search).get('query')\r\n  const history = useHistory()\r\n\r\n  const [formatted, setFormatted] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (!searchResults) return;\r\n    // () => { }\r\n    const tagsObj = {}\r\n    searchResults.forEach(tagObj => {\r\n      // first time\r\n      if (!tagsObj[tagObj.tag]) return tagsObj[tagObj.tag] = { amount: tagObj.amount, places: [tagObj.placeId], tag: tagObj.tag }\r\n      // next time\r\n      tagsObj[tagObj.tag].amount += tagObj.amount\r\n      tagsObj[tagObj.tag].places.push(tagObj.placeId)\r\n    })\r\n    setFormatted(Object.values(tagsObj))\r\n    // eslint-disable-next-line \r\n  }, [searchResults])\r\n\r\n  if (!searchResults) return null\r\n\r\n\r\n  if (!searchResults.length) return (\r\n    <div className=\"resultsContainer\">\r\n      <h5>{TEXT.noResults}</h5>\r\n    </div>\r\n  )\r\n\r\n  function onClick(tag) {\r\n    history.push(`/tags/item/${tag}?from=${query}`)\r\n  }\r\n\r\n  return (\r\n    <div className=\"resultsContainer\">\r\n      {formatted.map(tagObj => {\r\n        return <TagItem tagInfo={tagObj} key={tagObj.key} onClick={onClick} />\r\n      })}\r\n    </div>\r\n  )\r\n}\r\n","import { useEffect, useState } from \"react\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { Link, useHistory, useParams } from \"react-router-dom\"\r\nimport { getTagInfo } from \"../requests/tags\"\r\nimport { TEXT } from \"../rest/lang\"\r\nimport { setMapMode, setToast, tagModeTag } from \"../store/app\"\r\n\r\nexport const TagOverview = () => {\r\n  const dispatch = useDispatch()\r\n  const { tag } = useParams()\r\n  const history = useHistory()\r\n  const mapRef = useSelector(s => s.app.mapRef)\r\n\r\n  const [info, setInfo] = useState(null);\r\n\r\n  useEffect(() => {\r\n    tagReq()\r\n    // eslint-disable-next-line \r\n  }, [])\r\n  async function tagReq() {\r\n    const res = await getTagInfo(tag)\r\n    console.log('%c⧭', 'color: #00e600', res);\r\n    if (res.status !== 'OK') return setToast(dispatch, { message: TEXT.requestError + ' #tow1' });\r\n    // receive array of tags of buildings\r\n    if (!res.data.length) return;\r\n    const result = { amount: 0, places: [] }\r\n    res.data.forEach(tagObj => {\r\n      result.amount += tagObj.amount\r\n      result.places.push({ ...tagObj })\r\n    })\r\n    setInfo(result)\r\n  }\r\n\r\n  if (!info) return null\r\n\r\n  function onClick() {\r\n    tagModeTag(dispatch, tag)\r\n    setMapMode(dispatch, 'tags')\r\n    history.push('/')\r\n  }\r\n\r\n  // should we show tops of the buildings\r\n  return (\r\n    <div className=\"tagOverview\">\r\n      {/* Common info */}\r\n      <h3 className=\"title tagWrap\"><span className=\"bigHashtag\">#</span>\r\n        <span className=\"tagContent mp-accent\">{tag}</span>\r\n      </h3>\r\n      <p className=\"subtitle\">{TEXT.tagsAmount}: {info.amount}</p>\r\n      <Link to=\"/\">\r\n        <button className=\"button\" onClick={onClick}>{TEXT.watchAtMap}</button>\r\n      </Link>\r\n\r\n      {/* Popular buildings */}\r\n      <h4 className=\"title titlePopular\">{TEXT.mostPopularPlaces}</h4>\r\n      <div className=\"tagPlaces\">\r\n        {Boolean(info.places) && info.places.map(({ placeId, amount, name, lng, lat }) => {\r\n          if (!name) name = TEXT.noName\r\n          \r\n          function onClick() {\r\n            mapRef.flyTo({ center: [lng, lat], zoom: 16, speed: 0.5 })\r\n            tagModeTag(dispatch, tag)\r\n            setMapMode(dispatch, 'tags')\r\n            history.push('/')\r\n          }\r\n          \r\n          return (<div key={placeId}>\r\n            <div className=\"placeInTag\" >\r\n              <div className=\"amount mp-accent\" title={TEXT.mentionsAmount}>{amount}</div>\r\n              <div className=\"placeTagInfo\">\r\n                <div className=\"name\">{name}</div>\r\n                <button className=\"button\" onClick={onClick}>{TEXT.show}</button>\r\n              </div>\r\n            </div>\r\n          </div>)\r\n        })}\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}\r\n","import { useEffect, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport '../Friends/Friends.css'\r\nimport { SearchBar } from \"../Friends/SearchBar\";\r\nimport { hideMain } from \"../store/app\";\r\nimport { FeaturedTags } from \"./FeaturedTags\";\r\nimport { Results } from \"./Results\";\r\nimport { TagOverview } from \"./TagOverview\";\r\nimport './Tags.css'\r\n\r\nexport const TagsMain = () => {\r\n  const dispatch = useDispatch()\r\n  // const { app, user } = useSelector(state => state)\r\n\r\n  const [searchResults, setSearchResults] = useState(null)\r\n\r\n  \r\n  useEffect(() => {\r\n    hideMain(dispatch)\r\n    // eslint-disable-next-line\r\n  }, [])\r\n\r\n  return (\r\n    <div className=\"tags\">\r\n      <SearchBar setSearchResults={setSearchResults} />\r\n\r\n      <Switch>\r\n        <Route exact path=\"/tags\">\r\n          <FeaturedTags />\r\n        </Route>\r\n        <Route path=\"/tags/item/:tag\">\r\n          <TagOverview />\r\n        </Route>\r\n        <Route path=\"/tags/search\">\r\n          <Results searchResults={searchResults} />\r\n        </Route>\r\n\r\n      </Switch>\r\n      \r\n      <div className=\"bottom\"></div>\r\n    </div>\r\n  )\r\n}\r\n","import { useEffect, useState } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { hideMain, setToast } from '../store/app'\r\nimport { TEXT } from '../rest/lang';\r\nimport { postFeedback } from '../requests/reviews';\r\n\r\nexport const About = () => {\r\n  const dispatch = useDispatch()\r\n\r\n  const [comment, setComment] = useState('');\r\n\r\n  useEffect(() => {\r\n    hideMain(dispatch)\r\n    // eslint-disable-next-line\r\n  }, [])\r\n\r\n  function onInput(e) {\r\n    setComment(e.target.value);\r\n  }\r\n\r\n  async function onClick() {\r\n    const res = await postFeedback(comment)\r\n\r\n    if (res.status !== 'OK') return setToast(dispatch, { message: TEXT.requestError + ' #aboutus1' })\r\n    else setToast(dispatch, { message: TEXT.sent, status: 'complete' })\r\n    setTimeout(() => {\r\n      setComment('')\r\n    }, 500)\r\n  }\r\n\r\n  return (\r\n    <div className=\"aboutPage relative\">\r\n      <div className=\"paddingcontainer\">\r\n        <p>{TEXT.aboutMain}</p>\r\n        <h5 className=\"mp-border-dark\">{TEXT.aboutFutureTitle}</h5>\r\n        <p>{TEXT.aboutFuture}</p>\r\n\r\n        <br />\r\n        <p htmlFor=\"comment\">{TEXT.comment}:</p>\r\n        <textarea\r\n          name=\"comment\" rows=\"3\"\r\n          value={comment} onInput={onInput}\r\n          className=\"raterComment mp-border-dark mp-dark\"\r\n          placeholder={TEXT.aboutPlaceholder}\r\n        />\r\n        <br />\r\n        <button className=\"button\" onClick={onClick}>{TEXT.submit}</button>\r\n        <br />\r\n        <h5 className=\"mp-border-dark\">{TEXT.techInfo}</h5>\r\n        <p>{TEXT.techSpecs}</p>\r\n\r\n        <br />\r\n        <br />\r\n\r\n        <p className=\"version mp-counter\">{TEXT.author}: @ilyaizr</p>\r\n        <p className=\"version mp-counter\">{TEXT.version}: alpha 3.1</p>\r\n\r\n        <div className=\"bottom\"></div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n} from \"react-router-dom\";\r\n// Components\r\nimport { Main } from \"./Map/Main\";\r\nimport './Map/Maps.css'\r\nimport { AuthMain } from './Auth/AuthMain'\r\nimport { useEffect } from \"react\";\r\n\r\nimport './App.css'\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { NavMain } from \"./navigation/NavMain\";\r\nimport { setModal } from \"./store/app\";\r\nimport { Modal } from \"./rest/Modal\";\r\nimport { EditProfile } from \"./Auth/EditProfile\";\r\nimport { GoogleConfirm } from \"./Auth/GoogleConfirm\";\r\nimport { Toast } from \"./rest/Toast\";\r\nimport { AlphaReg } from \"./Auth/AlphaReg\";\r\nimport { TEXT } from \"./rest/lang\";\r\nimport { Login } from \"./Auth/Login\";\r\nimport { getPreferences, setPreference } from \"./store/localstorage\";\r\nimport { FriendsMain } from \"./Friends/FriendsMain\";\r\nimport { MapMode } from \"./navigation/MapMode\";\r\nimport { getFriendsInfo } from \"./rest/helperFuncs\";\r\nimport { TagsMain } from \"./Tags/TagsMain\";\r\nimport { About } from \"./navigation/About\";\r\n\r\n\r\nfunction App() {\r\n  const dispatch = useDispatch()\r\n  const app = useSelector(state => state.app)\r\n  const children =\r\n    <div className=\"auth-modal-containter mp-border-secondary\">\r\n      <Login />\r\n    </div>\r\n\r\n  useEffect(() => {\r\n    if (!app.isLogged && !getPreferences().skipLogin) {\r\n      setModal(dispatch, {\r\n        acceptLabel: null,\r\n        cancelLabel: TEXT.skip,\r\n        cancelAction() {\r\n          setPreference('skipLogin', true)\r\n        },\r\n        message: TEXT.wannaAuthorize,\r\n        children,\r\n      })\r\n    }\r\n    (async function () {\r\n      await getFriendsInfo(dispatch)      \r\n    })()\r\n    /* eslint-disable */\r\n  }, [])\r\n  /* eslint-enable */\r\n\r\n  return (\r\n    <Router >\r\n      <Modal />\r\n      <NavMain />\r\n      {app.toast && <Toast key={app.toast?.key} />}\r\n\r\n      <Main />\r\n\r\n      {/* Extra subpages */}\r\n\r\n      <Switch>\r\n\r\n        <Route path=\"/auth\">\r\n          <div className=\"routeWrapper\">\r\n            <AuthMain />\r\n          </div>\r\n        </Route>\r\n        {/* TODO alpha only */}\r\n        <Route path=\"/alphaReg\">\r\n          <div className=\"routeWrapper\">\r\n            <AlphaReg />\r\n          </div>\r\n        </Route>\r\n\r\n        <Route path=\"/editProfile\">\r\n          <div className=\"routeWrapper\">\r\n            <EditProfile />\r\n          </div>\r\n        </Route>\r\n        <Route path=\"/googleConfirm\">\r\n          <div className=\"routeWrapper\">\r\n            <GoogleConfirm />\r\n          </div>\r\n        </Route>\r\n\r\n        <Route path=\"/friends\">\r\n          <div className=\"routeWrapper\">\r\n            <FriendsMain />\r\n          </div>\r\n        </Route>\r\n\r\n        <Route path=\"/mapMode\">\r\n          <div className=\"routeWrapper\">\r\n            <MapMode />\r\n          </div>\r\n        </Route>\r\n\r\n        <Route path=\"/tags\">\r\n          <div className=\"routeWrapper\">\r\n            <TagsMain />\r\n          </div>\r\n        </Route>\r\n        \r\n        <Route path=\"/about\">\r\n          <div className=\"routeWrapper\">\r\n            <About />\r\n          </div>\r\n        </Route>\r\n\r\n      </Switch>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { combineReducers, createStore } from 'redux';\r\nimport { appReducer } from './app';\r\nimport { userReducer } from './user';\r\n\r\n\r\nexport const rootReducer = combineReducers({\r\n  user: userReducer,\r\n  app: appReducer\r\n});\r\n\r\nexport const store = createStore(rootReducer);\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { refresh } from \"../requests/auth\";\r\nimport { initialState as appInitialState } from \"../store/app\";\r\nimport { initialState as userInitialState } from \"../store/user\";\r\nimport { getPreferences, initLocalStorage } from \"../store/localstorage\";\r\nimport { initializeThemeColors, setColors } from \"./colors\"\r\nimport { appThemes } from \"./config\"\r\nimport { TEXT } from \"./lang\";\r\n\r\nexport async function initActions() {\r\n  // Prototypes\r\n  // eslint-disable-next-line\r\n  String.prototype.capitalize = function () {\r\n    return this.charAt(0).toUpperCase() + this.slice(1);\r\n  }\r\n\r\n  initLocalStorage()\r\n\r\n  // Set prefered theme\r\n  let theme = appThemes[3]\r\n  \r\n  let preferences = getPreferences()\r\n  // console.log('%c⧭', 'color: #bfffc8', preferences)\r\n  // Rewrite theme if any\r\n  if (preferences.theme && appThemes.indexOf(preferences.theme) > -1) theme = preferences.theme\r\n\r\n  appInitialState.theme = theme\r\n\r\n  initializeThemeColors()\r\n  document.head.insertAdjacentHTML(\"beforeend\", `<style>:root{}</style>`)\r\n  setColors(theme)\r\n\r\n  // Refresh cookie and info\r\n  const res = await refresh()\r\n  if (res.status === 'OK') {\r\n    if (res.data) {\r\n      Object.entries(res.data).forEach(([key, val]) => userInitialState[key] = val)\r\n      appInitialState.isLogged = true\r\n    }\r\n  }\r\n  else if (res.status === 'REAUTH') {\r\n    return;// do nothing\r\n  }\r\n\r\n  else {\r\n    appInitialState.toast = {\r\n      message: TEXT.initConnectionErr\r\n    }\r\n    return 'connection_error'\r\n  }\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport { store } from './store/root';\nimport { Provider } from 'react-redux'\nimport reportWebVitals from './reportWebVitals';\nimport { initActions } from './rest/beforeApp';\n\n(async function () {\n  // const refresh = \n  await initActions()\n  // if (refresh === 'connection_error')\n\n  ReactDOM.render(\n    <React.StrictMode>\n      <Provider store={store}>\n        <App />\n      </Provider>\n    </React.StrictMode>,\n    document.getElementById('root')\n  );\n}())\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}